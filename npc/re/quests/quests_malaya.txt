//============================================================
//= rAthenaCN 脚本汉化 www.rAthenaCN.com 转自 [ www.99Max.mE ]
//============================================================
//= GIT 代码库 https://github.com/rAthenaCN/rAthenaCN.git
//============================================================
//= 问题反馈 https://github.com/rAthenaCN/rAthenaCN/issues
//============================================================

//===== rAthena Script ======================================= 
//= Port Malaya Quest NPCs
//===== By: ==================================================
//= Euphy
//===== Current Version: =====================================
//= 1.2
//===== Compatible With: =====================================
//= rAthena Project
//===== Description: =========================================
//= [Official Conversion]
//= Quest NPCs related to Port Malaya:
//== Cautious Village, Port Malaya Daily Quests,
//== Secret in the Woods, Bakonawa Extermination
//== Nurse in Port Malaya, Pintados Festival
//= Merchants:
//== Traders, Upgrade Boss Equipment
//===== Additional Comments: =================================
//= 0.1 Traders only. Adapted from Masao's conversion. [Euphy]
//= 0.2 Added Tribe Blacksmith [DeadlySilence]
//= 0.3 Added "Secret in the Woods" quest [DeadlySilence]
//= 0.4 Added "Cautious Village" and subsequent quests [DeadlySilence]
//= 0.5 Added "Bakonawa Extermination" quest. [Euphy]
//= 1.0 Added "Nurse in Port Malaya" and "Pintados Festival" quests. [Euphy]
//= 1.1 Added GM management function and NPC. [Euphy]
//= 1.2 Added VIP features. [Euphy]
//============================================================

// Cautious Village & Daily Quests :: hi_malaya
//============================================================
malaya,266,76,3	script	罗德尔 守卫#malaya	4_MAL_SOLDIER,4,4,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "不能继续进行任务. 你的负重太大了. -";
		close;
	}
	if (malaya_hi == 0) {
		mes "[罗德尔 守卫]";
		mes "在这么多事的时候来旅行?";
		mes "最近因为恶魔气息的原故, 村民感到更加恐惧了.";
		mes "他们甚至因为害怕而无助的颤抖.";
		next;
		mes "[罗德尔 守卫]";
		mes "所以... 马来亚港口的市民会感到浑身不舒服, 即使没有什么实质的事件发生.";
		mes "客栈都不再向外地人开放.";
		next;
		mes "[罗德尔 守卫]";
		mes "目前还没有很好的办法来解决此事, 但是你可以先见一见梦巴奇的峰先生.";
		mes "他是村子的领导人, 如果他能给你一些确切的说法, 其他的人或许会少一些忧虑.";
		next;
		mes "[罗德尔 守卫]";
		mes "我会在地图上标注出峰先生的位置.";
		mes "尽管目前气氛不是很好, 但我还是欢迎你的来访.";
		viewpoint 1, 185, 358, 0, 0x0A82FF;
		set malaya_hi, 1;
		setquest 7350;
		close;
	} else if (malaya_hi == 1) {
		mes "[罗德尔 守卫]";
		mes "先和峰先生见一见面吧.";
		mes "如果你表现的足够真诚, 村民是不会躲着你的.";
		mes "你若对这里还不是很熟悉, 我会在地图上为你标注的.";
		viewpoint 1, 185, 358, 0, 0x0A82FF;
		close;
	} else if (malaya_hi >= 20) {
		if (BaseLevel < 100) {
			mes "[罗德尔 守卫]";
			mes "这儿的生活怎么样?";
			mes "人们还是不错的吧, 是吗?";
			mes "如果你有什么特长的话, 或许可以为你提供一份工作. 现在, 你还没有达到标准.";
			next;
			mes "[罗德尔 守卫]";
			mes "我曾考虑让你参加本市正在进行的一项灭绝任务,";
			mes "可是你的力量还不够强大. 真遗憾了. ";
			close;
		}
		.@playtime = checkquest(7405, PLAYTIME);
		if (.@playtime == 0) {
			mes "[罗德尔 守卫]";
			mes "哟, 谢谢你了, 我担心的事情又少了一件.";
			mes "感到轻松了不少啊.";
			mes "做的好.";
			next;
			mes "[罗德尔 守卫]";
			mes "想好了再来吧.";
			mes "你明白我的意思, 对吗?";
			close;
		} else if (.@playtime == 2) {
			erasequest 7405;
			mes "[罗德尔 守卫]";
			mes "噢, 是关于你原来追捕过的食人波利.";
			mes "在巴库旅游的人们对此很有兴趣.";
			mes "如果不是太麻烦的话, 我想再请你帮一次忙.";
			next;
			mes "[罗德尔 守卫]";
			mes "不必马上答复我, 如果你觉的可以了.";
			mes "来找我就是了.";
			close;
		} else {
			.@hunting = checkquest(7404, HUNTING);
			if (.@hunting == -1) {
				mes "[罗德尔 守卫]";
				switch(rand(1, 6)) {
				case 1:
					mes "最近一段时间, 部分村民的无畏得到大家的认可." + $malayaNames$[0] + ", " + $malayaNames$[3] + ", " + $malayaNames$[5] + "... 是不是很疯狂?";
					break;
				case 2:
					mes "昨天, 我看到有个人从公园的楼梯下来后, 就被绑去了医院. 那个被绑走的人叫做 " + $malayaNames$[1] + ". 我想知道那个人现在是否安全.";
					break;
				case 3:
					mes "有一个人捕获了最多的食人波利, 他的名字叫做 " + $malayaNames$[1] + ".";
					break;
				case 4:
					mes "如是你很无聊, 替我站一会儿岗好吗? 这真尼玛是个操蛋的工作. 即使烈日射你一脸, 你也要跟雕像一样杵在这里.";
					break;
				case 5:
					mes "你曾经和一个女人单独呆在一辆吉普尼车里过吗? 哇, 那真是太尴尬了...  我绝不会这么快就结婚的...";
					break;
				case 6:
					mes "最近在来访者里面, 有一个人和我关系非常好. 你听说过 " + $malayaNames$[1] + " 吗? 噢, 当然了, 你和我的关系也很好啦.";
					break;
				}
				mes "是的, 如果你不是太忙的话, 的确有一份工作给你. 有兴趣吗?";
				next;
				mes "[罗德尔 守卫]";
				mes "这次我们准备组织一次大规模的食人波利追捕行动.";
				mes "往来于巴库的商人一直对食人波利有所抱怨.";
				next;
				if (select("加入追捕行动.:拒绝.") == 2) {
					mes "[罗德尔 守卫]";
					mes "是吗? 真是太失望了.";
					mes "如果有像你一样的成员加入, 事情就会变的简单多了.";
					close;
				}
				mes "[罗德尔 守卫]";
				mes "每一次只用杀掉20只食人波利就可以了.";
				mes "对你来说是小意思了.";
				setquest 7404;
				close;
			} else if (.@hunting == 0) {
				mes "[罗德尔 守卫]";
				mes "你必须清除掉20只食人波利.";
				mes "这个数量足够让那些食人波利长个记性了.";
				close;
			} else if (.@hunting == 1) {
				mes "[罗德尔 守卫]";
				mes "噢, 结束了吗? 但是你并没有杀掉足够数目的食人波利啊.";
				mes "完成任务再来吧.";
				erasequest 7404;
				close;
			} else {
				mes "[罗德尔 守卫]";
				mes "噢, 经过确认, 你的确杀掉了20只食人波利";
				mes "这里是参与了食人波利捕杀活动的奖励.";
				next;
				mes "[罗德尔 守卫]";
				mes "将来还会有食人波利的捕杀任务的. 以后你还可以来哦.";
//				if (IsPremiumPcCafe == 10)
					getitem 6497, 2; // Lesser_Agimat
//				else
//					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				erasequest 7404;
				setquest 7405;
				if (rand(2))
					$malayaNames$[1] = strcharinfo(0);
//				SavePPL Jejellopy
				close;
			}
		}
	} else {
		mes "[罗德尔 守卫]";
		mes "请理解这里的人们谨慎的看着你的原因.";
		mes "因为总有鬼魂困扰着他们.";
		close;
	}
OnTouch:
	emotion ET_SURPRISE;
	end;

OnInit:
	// if there are no names set, set some default values
	if (!getarraysize($malayaNames$)) {
		$malayaNames$[0] = "unknown";
		$malayaNames$[1] = "unknown";
		$malayaNames$[2] = "unknown";
		$malayaNames$[3] = "unknown";
		$malayaNames$[4] = "unknown";
		$malayaNames$[5] = "unknown";
	}
	end;
}

malaya,185,358,3	script	梦巴奇领导人.峰	4_BARYO_CHIEF,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 不能继续进行任务. 你的负重太大了. -";
		close;
	}
	if (malaya_hi < 2) {
		mes "[峰]";
		mes "看起来像是水中化出的灵魂一样....";
		mes "年青的朋友啊.";
		mes "你来找我的原因是... 噢... 我知道了.";
		next;
		mes "[峰]";
		mes "你不用说出来.";
		mes "人们都很警惕着你.";
		mes "罗德尔肯定一直在关注着这些, 所以他派你到我这儿来.";
		next;
		if (malaya_hi == 0) {
			mes "[峰]";
			mes "不是吗?";
			mes "那么, 有可能是我们俩在心灵上有某种联系.";
			next;
		}
		mes "[峰]";
		mes "总之, 很高兴见到你, 年青的朋友.";
		mes "不要怪罪于村民看你的态度.";
		next;
		mes "[峰]";
		mes "我们周围一直环绕着祥和的精灵.";
		mes "我们和它们生活在一起, 祈祷平安.";
		mes "但是最近, 出现了一些问题.";
		next;
		mes "[峰]";
		mes "因为某些未知的原因,";
		mes "精灵疯狂的逃窜, 而恶灵袭击了村庄.";
		next;
		mes "[峰]";
		mes "这是笼罩在这个村庄的阴霾.";
		mes "村民们非常警惕, 因为他们不知道阴影会降临到谁的头上.";
		mes "噩耗来的毫无征兆.";
		next;
		mes "^4d4dff峰先生转过身, 后面显露出那些黑暗的阴影.";
		mes "村民们非常害怕, 每一个人都透露着恐惧的表情.^000000";
		cutin "malaya_ghost01", 4;
		next;
		select("朝阴影走去.:拿出武器.");
		mes "[峰]";
		mes "那些阴影跟踪了外地人的足迹. ";
		mes "不要和它们走的太近.";
		mes "否则, 你的灵魂会被禁锢.";
		next;
		mes "[峰]";
		mes "嗯? 它们有反应了.";
		mes "我不明白啊? 当面对一个强大的灵魂时, 它们会害怕起来.";
		mes "这种感觉... 不会是...";
		cutin "malaya_ghost02", 4;
		next;
		mes "^4d4dff正如峰先生所说, 鬼魂犹豫着, 不知是进是退.";
		mes "一直留心着它们的反应, 你走得更近了. 鬼魂们很慌张.^000000";
		next;
		cutin "", 255;
		mes "[峰]";
		mes "太不可思议了. 你拥有如此强大和纯洁的灵魂...!";
		mes "因为你的出现, 邪恶的鬼魂全部消失了.";
		next;
		mes "[峰]";
		mes "现在, 我想其他村民对你的看法会发生改变了...";
		mes "我们不都看到这个奇迹了吗?";
		next;
		mes "[峰]";
		mes "年青的朋友啊. 总之, 非常欢迎你的到访.";
		mes "你的纯洁灵魂之光, 会保护你远离黑暗的.";
		set malaya_hi, 10;
		if (checkquest(7350) > -1)
			erasequest 7350;
		close;
	} else if (malaya_hi == 10) {
		mes "[峰]";
		mes "每一个村民都见证了你纯洁灵魂的力量.";
		mes "不再害怕黑暗了.";
		close;
	} else if (malaya_hi == 11) {
		mes "[峰]";
		mes "有什么问题吗?";
		mes "你看起来有些不安.";
		mes "你的衣着也很零乱. 发生了什么事情吗?";
		next;
		switch (select("解释发生了什么事.:没什么可说的.")) {
		case 1:
			mes "[峰]";
			mes "是这样的吗?";
			mes "哈哈... 那可是个大问题. ";
			mes "你一定很担心吧.";
			next;
			mes "[峰]";
			mes "你知道";
			mes "我们正在为被鬼魂困扰的村民准备驱魔十字架...";
			mes "但是进展不是很顺利.";
			next;
			mes "[峰]";
			mes "作为一个暂时的解决办法, 不如给他们想要的, 怎么样?";
			mes "挑一些你所拥有的, 但对你不是很重要的东西给他们.";
			next;
			mes "[峰]";
			mes "总之, 他们只想让内心平静下来.";
			mes "他们赋予一些东西以某种意义, 通过这样来获得平静.";
			next;
			mes "[峰]";
			mes "真正重要的是, 只要拿着那些东西就会保证安全的一种信念.";
			mes "即便是通过旧衬衫的一个纽扣而得到平静, 那个纽扣就是他们的驱魔十字架.";
			next;
			mes "^4d4dff正如峰先生所说, 拿出一些东西为他们制作驱魔十字架是一个不错的想法.";
			mes "那么拿出多少才算合适呢...^000000";
			next;
			switch (select("圣水!:蓝色魔力矿石?!:学习用品")) {
			case 1:
				mes "[峰]";
				mes "名字本身就显示出了它的神圣之意.";
				mes "这是被神圣祝福过的, 是吗?";
				mes "不错.";
				mes "还有其它的吗? 有说服性的东西会更好.";
				next;
				select("谈到蓝色魔力矿石");
				mes "[峰]";
				mes "啊, 代替主人吸收诅咒和魔力, 然后就消失了的石头.";
				mes "可以使用神圣的魔法?";
				mes "听起来不错.";
				next;
				break;
			case 2:
				mes "[峰]";
				mes "啊, 代替主人吸收诅咒和魔力, 然后就消失了的石头.";
				mes "可以使用神圣的魔法?";
				mes "但是听起来还不足够神奇啊.";
				next;
				select("谈到圣水.");
				mes "[峰]";
				mes "名字本身就显示出了它的神圣之意.";
				mes "这是被神圣祝福过的, 是吗?";
				mes "不错.";
				next;
				break;
			case 3:
				mes "[峰]";
				mes "嗯? 对于努力学习的孩子来说还是挺有用的.";
				mes "但是我想能有一些比较有说服力的就更好了.";
				next;
				mes "[峰]";
				mes "如果有神圣之意就更好了...";
				mes "你有什么物品是被你们的上帝祝福过的吗?";
				next;
				select("圣水还是蓝色魔力矿石?");
				mes "[峰]";
				mes "名字本身就显示出了它的神圣之意.";
				mes "这是被神圣祝福过的, 是吗?";
				mes "保护主人的石头...";
				mes "听起来太完美了.";
				next;
				break;
			}
			mes "[峰]";
			mes "你能带来你所说的圣水和蓝色魔力矿石吗?";
			mes "把那些神圣的物品给我, 我来制作驱魔十字架.";
			next;
			mes "[峰]";
			mes "如果你能做到的话, 人们会更加信任你.";
			mes "他们会依赖并听命于你.";
			mes "是的, 你将成为他们心脏的救星.";
			next;
			mes "^4d4dff听从了峰先生的建议, 你打算把圣水和蓝色魔力矿石拿给村民.";
			set malaya_hi, 12;
			erasequest 7358;
			setquest 7351;
			close;
		case 2:
			mes "[峰]";
			mes "是这样的吗?";
			mes "如果有什么事情的话一定要说出来.";
			mes "有困难随时来找我.";
			close;
		}
	} else if (malaya_hi == 12) {
		mes "[峰]";
		mes "你说到的圣水和蓝色魔力矿石一定会很有作用的. ";
		mes "我希望他们能通过这些物品来驱散心中的忧虑...";
		close;
	} else if (malaya_hi == 13) {
		mes "[峰]";
		mes "把你的礼物给他们的了吗?";
		mes "如果你这样做了, 你会和每一个村民成为朋友的.";
		next;
		mes "[峰]";
		mes "我找到了制作驱魔十字架的办法.";
		mes "我的孙女伊梅尔达能帮助到你的.";
		mes "所以不用担心. 你不必再给更多的东西了.";
		erasequest 7365;
		set malaya_hi, 20;
		getexp 200000, 200000;
//		SavePPL Soul_Protection
		close;
	} else {
		mes "[峰]";
		switch(rand(1, 6)) {
		case 1:
			mes "有一个和你一样勇敢的冒险家. 他的名字叫做 " + $malayaNames$[0] + ". 你听说过他吗?";
			break;
		case 2:
			mes "最近, 有一位冒险家在村子里获得了很大的声誉. 他的名字叫做 " + $malayaNames$[0] + ". 外地人的精力总是那么充沛.";
			break;
		case 3:
			mes "作为一个梦巴奇的村民, 我从来没有见过像 " + $malayaNames$[0] + " 一样拥有那么强大力量的人. 是的, 甚至比你的力量还要强大还要纯洁.";
			break;
		case 4:
			mes "我曾经看到过一个路人踩到水果皮上, 摔了个底朝天. " + $malayaNames$[1] + ". 他大声呼喊着 '操! 谁来帮帮我~'. 我们都笑尿了.";
			break;
		case 5:
			mes "欢迎! 欢迎! 您永远是我们的贵宾.";
			break;
		case 6:
			mes "我不清楚你是否知道, 但是 " + $malayaNames$[0] + " 甚至帮助过巴库. 听说还有一个高尚的灵魂在这里, 真是一件不错的事情.";
			break;
		}
		next;
		switch (select("请求给予建议.:祝福小花...")) {
		case 1:
			if (malaya_diwata == 2) {
				mes "[峰]";
				mes "港口的摆渡?";
				mes "事情就是那样发生的...";
				mes "最重要的事是, 必须首先搞明白那个小孩为什么不高兴.";
				next;
				mes "[峰]";
				mes "这么说来, 贿赂会比较凑效.";
				mes "对于女士来说, 花朵永远是最动人的, 是吗?";
				next;
				select("我可不是爱情顾问.");
				mes "[峰]";
				mes "我只是说说罢了.";
				mes "不论生还是死, 那个灵魂只是一个弱小的女孩.";
				next;
				mes "[峰]";
				mes "即使是在落叶的秋季, 那个年龄的女孩也应该是常?心的笑着的?";
				mes "就让我们用花朵来打开她的心扉吧. ";
				next;
				mes "[峰]";
				mes "让我们看看...";
				mes "^4d4dff3个神秘的花, 3个典雅的花, 3个美丽的花^000000 就可以做成一个 纪念花束 了.";
				next;
				mes "[峰]";
				mes "收集好这些花朵, 我就能做出一个花束并给其祝福.";
				mes "你可以在村庄外面找到这些花朵的.";
				set malaya_diwata, 3;
				erasequest 7396;
				setquest 7397;
				close;
			} else if (malaya_diwata == 3) {
				if ((countitem(6509) < 3) || (countitem(6510) < 3) && (countitem(6511) < 3)) {
					mes "[峰]";
					mes "我需要 ^4d4dff3个神秘的花, 3个典雅的花, 3个美丽的花^000000.";
					mes "记住了吗?";
					close;
				}
				mes "[峰]";
				mes "噢... 我能闻到这里的花香.";
				mes "我能把它们聚集起来并做成纪念花束.";
				next;
				mes "-峰先生把花朵小心的扎进花束里面, 并对其给予了祝福.-";
				mes "-只是在旁边看着, 圣洁之感就扑面而来.-";
				next;
				mes "[峰]";
				mes "是不是很漂亮啊?";
				mes "老头子能有这样的手艺, 还不错吧?";
				mes "我原来接过很多定花的业务, 所以现在即使闭着眼睛也能做得出来.";
				next;
				mes "[峰]";
				mes "现在, 把纪念花束交给那个孩子吧.";
				mes "我希望这个花束能打开她的心扉, 让她愿意和你说说心里话.";
				delitem 6509, 3; // Mysterious_Flower
				delitem 6510, 3; // Elegant_Flower
				delitem 6511, 3; // Beautiful_Flower
				getitem 6506, 1; // Memorial_Bouquet
				set malaya_diwata, 4;
				erasequest 7397;
				setquest 7398;
				close;
			} else if (malaya_diwata == 4) {
				mes "[峰]";
				mes "带着这个纪念花束, 去和禁锢在小船上的灵魂谈谈吧.";
				close;
			} else if (malaya_diwata > 5) {
				mes "[峰]";
				mes "很遗憾看到这么一个不幸的灵魂... 只是因为那起摆渡的事故.";
				mes "如果你准备给她献上一束花的话, 我很乐意帮你这个忙.";
				close;
			} else {
				mes "[峰]";
				mes "我这个老头子再没什么可以聊了的.";
				mes "到我这个年纪, 就只该关心养生了, 不是吗?";
				close;
			}
		case 2:
			if (checkquest(7402) == -1) {
				mes "[峰]";
				mes "这个植物样的礼物是送给谁的?";
				mes "不要告诉我你拿了这么个玩意儿来, 是因为你太懒了.";
				mes "送礼物给别人应该是很虔诚的. 不要忘记了这一点.";
				close;
			}
			if (countitem(6506) > 0) {
				mes "[峰]";
				mes "你送出去了吗?";
				mes "那你手上的是什么?";
				mes "为什么一直在这儿转来转去? 快去把花束送出去.";
				close;
			}
			if ((countitem(6509) < 3) || (countitem(6510) < 3) || (countitem(6511) < 3)) {
				mes "[峰]";
				mes "要去找迪瓦塔吗?";
				mes "你要有神秘的花, 典雅的花, 美丽的花, 每种各3朵, 明白了吗?";
				mes "都装备好了我才能开始制作.";
				close;
			}
			mes "[峰]";
			mes "迪瓦塔是一个女人的名字.";
			mes "你去找她就会明白一些事情的.";
			next;
			mes "[峰]";
			mes "嘿, 把花束拿好吧.";
			mes "用你的灵魂和祈福去取得收获吧.";
			delitem 6509, 3; // Mysterious_Flower
			delitem 6510, 3; // Elegant_Flower
			delitem 6511, 3; // Beautiful_Flower
			getitem 6506, 1; // Memorial_Bouquet
			close;
		}
	}
}

malaya,169,350,5	script	伊梅尔达#malaya	4_M_BRZ_JACI,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 不能继续进行任务. 你的负重太大了. -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[伊梅尔达]";
		mes ".... 嗯.";
		close;
	} else if (malaya_hi < 20) {
		mes "[伊梅尔达]";
		mes "..........";
		mes "不错.";
		mes "我有很多眼线. 让我们看看你在这里都干了什么好事... *咯咯的笑*";
		next;
		mes "- 她真是一个熊孩子. -";
		close;
	} else if (malaya_hi == 20) {
		mes "[伊梅尔达]";
		mes "你不就是那个最近一直用廉价的小玩意儿来沽名钓誉的外地人吗?";
		mes "我说错了吗?";
		next;
		select ("你想做成一个传说中的驱魔十字架?");
		mes "[伊梅尔达]";
		mes "是的, 我的爷爷想到了一个办法.";
		mes "我打算把它落实.";
		next;
		mes "[伊梅尔达]";
		mes "这是我的, 而不是其他任何人的工作.";
		mes "守护传说就是我的工作.";
		next;
		switch (select("是这样的吗?:祝你好运!")) {
		case 1:
			if (BaseLevel < 100) {
				mes "[伊梅尔达]";
				mes "必须的.";
				mes "向你这么弱的人求助真是一点儿用处也没有.";
				next;
				mes "[伊梅尔达]";
				mes "收集材料可不是那么容易的事情.";
				mes "也许当你更强大了就可以了吧, 但是现在不行, 根本不行.";
				close;
			}
			mes "[伊梅尔达]";
			mes "然后呢?";
			mes "你准备去收集材料了吗?";
			mes "好吧, 我接受你的提议.";
			next;
			select ("....?!");
			mes "[伊梅尔达]";
			mes "如果你这么想帮助我, 你为什么不从一开始就这样说?";
			mes "或者问问我的爷爷呢?";
			next;
			mes "[伊梅尔达]";
			mes "如果你这么狂热的想要做成驱魔十字架.";
			mes "我就不得不松口了, 是吗?";
			next;
			mes "[伊梅尔达]";
			mes "那么, 需要的材料有 ^4d4dff6个尖头竹竿, 6个海盐袋, 6个纯银十字架^000000.";
			next;
			mes "[伊梅尔达]";
			mes "海盐袋 呢, 你得在西北边的海滩自己制作.";
			mes "你会找到我早在那儿挖好的坑.";
			next;
			mes "[伊梅尔达]";
			mes "再到武器店找 帕多依 买 纯银十字架.";
			mes "他曾答应为我制作几把的.";
			next;
			mes "[伊梅尔达]";
			mes "你可以在巴库或附近的森林里找到 尖头竹竿.";
			mes "都记住了吗?";
			next;
			mes "[伊梅尔达]";
			mes "是时候证明你的英勇了!";
			set malaya_hi, 21;
			setquest 7366;
			close;
		case 2:
			mes "[伊梅尔达]";
			mes "的确如此.";
			mes "我会保护整个村庄的!";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "目前为止我还没有看到用这些物品做成的驱魔十字架!";
			mes "真是有趣啊~";
			mes "我肯定你只会生火~";
			mes "哈哈哈哈~";
			next;
			mes "[伊梅尔达]";
			mes "不要惹恼了我, 滚开!";
			close;
		}
	} else if (malaya_hi == 21) {
		if ((countitem(6501) < 6) || (countitem(6500) < 6) || (countitem(6502) < 6)) {
			mes "[伊梅尔达]";
			mes "如果你把做成驱魔十字架的材料都拿来了, 我会证明给你看的!";
			next;
			mes "[伊梅尔达]";
			mes "在西北边的海滩制造出 海盐袋, 在巴库的马赫瓦伽镇可以取得 尖头竹竿.";
			mes "向 帕多依 要 纯银十字架.";
			mes "不要忘了, 每个材料都要6个.";
			close;
		}
		mes "[伊梅尔达]";
		mes "... 噢... 我的天啊, 你真的拿到那些材料了?";
		mes "不可貌相啊.";
		mes "这次是真心实意的夸奖你!";
		next;
		mes "[伊梅尔达]";
		mes "现在我准备举行一个圣礼来完成驱魔十字架.";
		mes "把材料给我吧! 在我作法时不要来打扰我!";
		set malaya_hi, 22;
		delitem 6500, 6; // Sharp_Bamboo
		delitem 6501, 6; // Salt_Bag
		delitem 6502, 6; // Silver_Cross
		erasequest 7366;
		setquest 7367;
		close;
	} else if (malaya_hi == 22) {
		.@playtime = checkquest(7367, PLAYTIME);
		if (.@playtime == 0 || .@playtime == 1) {
			mes "伊梅尔达周身散发着虔诚的光环, 和之前她流露出的轻浮判若两人.";
			mes "最好不要去打扰她.";
			close;
		} else if (.@playtime == 2) {
			mes "[伊梅尔达]";
			mes "你还在这里吗?";
			mes "噢, 你是想看看我完成的驱魔十字架比你廉价的手工品要好多少, 是吗?";
			next;
			mes "[伊梅尔达]";
			mes "好吧.";
			mes "现在去把驱魔十字架送给人们吧!";
			mes "我赋予你这样做的权力!";
			mes "*咯咯的笑*";
			next;
			mes "接过驱魔十字架, 不再去理会她的轻蔑.";
			mes "让我们拿去分发给村民吧.";
			set malaya_hi, 23;
			getitem 6503, 6; // Soul_Protection
			erasequest 7367;
			setquest 7368;
			setquest 7369;
			setquest 7370;
			setquest 7371;
			setquest 7372;
			setquest 7373;
			setquest 7374;
			close;
		} else {
			mes "[伊梅尔达]";
			mes "不要干扰圣礼, 快走开.";
			mes "在我完成之前, 稍等一会儿吧.";
			setquest 7367;
			close;
		}
	} else if (malaya_hi == 23) {
		mes "[伊梅尔达]";
		mes "这儿有一张表, 列出了哪些人已经拿到驱魔十字架.";
		mes "去把新的驱魔十字架送给他们吧.";
		next;
		mes "[伊梅尔达]";
		mes "你这么善良的一个人, 一定会做好这件事情的, 是吗? ";
		mes "*呵呵的笑*";
		close;
	} else if (malaya_hi == 24) {
		mes "[伊梅尔达]";
		mes "... 你真的做了我和你讲的事情了吗?";
		mes "是真的吗?";
		mes "我原来以为, 你是想通过一些甜言蜜语来获得村里的一些东西, 然后早就离开了...";
		next;
		mes "[伊梅尔达]";
		mes "我为我粗鲁的言行向你道歉.";
		mes "....我必须承认我的错误.";
		next;
		mes "[伊梅尔达]";
		mes "非常高兴你能来帮我, 因为驱魔十字架每天都要制作.";
		set malaya_hi, 25;
		erasequest 7374;
		erasequest 7379;
		setquest 7375;
//		if (IsPremiumPcCafe == 10)
			getitem 6497, 2; // Lesser_Agimat
//		else
//			getitem 6497, 1; // Lesser_Agimat
		getexp 200000,200000;
		if (rand(2))
			$malayaNames$[0] = strcharinfo(0);
		close;
	} else {
		mes "[伊梅尔达]";
		mes "你好啊.";
		mes "觉的马来亚的风景如何?";
		mes "在吉普小巴车里和朋友聊天, 感觉不错啊.";
		next;
		switch (select("我会帮你制作驱魔十字架的.:爱和驱魔十字架是为所有人而存在.")) {
		case 1:
			if (checkquest(7380) > -1) {
				if ((countitem(6501) < 6) || (countitem(6502) < 6) || (countitem(6500) < 6)) {
					mes "[伊梅尔达]";
					mes "制作驱魔十字架的材料有以下这些:";
					mes "海盐袋, 纯银十字架 和 尖头竹竿, 每种都要6个.";
					next;
					mes "[伊梅尔达]";
					mes "西北边的海滩制作海盐袋, 从帕多依那儿拿到纯银十字架, 在巴库的附近可以找到尖头竹竿.";
					close;
				}
				mes "[伊梅尔达]";
				mes "不错, 你每一样都准确的带来了.";
				mes "谢谢你的帮助.";
				next;
				mes "[伊梅尔达]";
				mes "如果明天你也能来, 我会非常高兴的.";
				mes "给你添麻烦了.";
				delitem 6500, 6; // Sharp_Bamboo
				delitem 6501, 6; // Salt_Bag
				delitem 6502, 6; // Silver_Cross
				erasequest 7380;
				setquest 7381;
//				if (IsPremiumPcCafe == 10)
					getitem 6497, 2; // Lesser_Agimat
//				else
//					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				close;
			} else {
				.@playtime = checkquest(7381, PLAYTIME);
				if ((.@playtime == 0) || (.@playtime == 1)) {
					mes "[伊梅尔达]";
					mes "感谢你的好意, 但是我们今天做的已经够多了.";
					mes "必要的时候, 我会再叫你的.";
					close;
				} else if (.@playtime == 2) {
					mes "[伊梅尔达]";
					mes "太及时了.";
					mes "我今天制作驱魔十字架的材料刚好用完.";
					mes "能去帮我弄来一些吗?";
					erasequest 7381;
					next;
					switch (select("妥妥儿的.:我还需要再做一些准备.")) {
					case 1:
						mes "[伊梅尔达]";
						mes "好的, 就和原来一样.";
						mes "6个海盐袋, 6个纯银十字架, 6个尖头竹竿.";
						setquest 7380;
						close;
					case 2:
						mes "[伊梅尔达]";
						mes ".......我知道了.";
						mes "我会继续等着的.";
						close;
					}
				} else {
					mes "[伊梅尔达]";
					mes "真是不错的消息.";
					mes "你知道要哪些材料才能做成驱魔十字架吗?";
					mes "我想答案是肯定的, 这不是你第一次来制作了...";
					next;
					mes "[伊梅尔达]";
					mes "我再复述一遍吧.";
					mes "海盐袋. 纯银十字架, 还有尖头竹竿.";
					setquest 7380;
					close;
				}
			}
		case 2:
			if (checkquest(7374) != -1) {
				if (checkquest(7379) == -1) {
					mes "[伊梅尔达]";
					mes "请把这些新的驱魔十字架带给村民吧.";
					mes "你认识他们的, 对吗?";
					close;
				}
				mes "[伊梅尔达]";
				mes "他们不能永远依赖于这些驱魔十字架...";
				mes "最好, 他们能拥有和你一样强大的信念.";
				next;
				mes "[伊梅尔达]";
				mes "强大的灵魂充满光明.";
				mes "黑暗无法接近耀眼的光芒";
				next;
				mes "[伊梅尔达]";
				mes "我想今天就到这里吧.";
				mes "非常感谢你.";
				setquest 7375;
				erasequest 7374;
				erasequest 7379;
//				if (IsPremiumPcCafe == 10)
					getitem 6497, 2; // Lesser_Agimat
//				else
//					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				if (rand(2))
					$malayaNames$[0] = strcharinfo(0);
				close;
			} else {
				.@playtime = checkquest(7375, PLAYTIME);
				if (.@playtime == 0 || .@playtime == 1) {
					mes "[伊梅尔达]";
					mes "原来的驱魔十字架仍然有用.";
					mes "目前为止还没出问题.";
					close;
				} else if (.@playtime == 2) {
					mes "[伊梅尔达]";
					mes "I was wondering when you would drop by.";
					mes "今天你能把驱魔十字架分发给大家吗?";
					erasequest 7375;
					next;
					if (select("妥妥儿的.:今天不行.") == 2) {
						mes "[伊梅尔达]";
						mes "好的.";
						mes "今天到马来亚四处逛逛吧.";
						mes "同样的, 你也会不时的邂逅各种灵魂.";
						close;
					}
					if ((checkquest(7381) == 0) || (checkquest(7381) == 1)) {
						mes "[伊梅尔达]";
						mes "非常感谢你.";
						mes "把它们都分发出去以后再来吧.";
						setquest 7374;
						setquest 7368;
						setquest 7369;
						setquest 7370;
						setquest 7371;
						setquest 7372;
						setquest 7373;
						getitem 6503, 6; // Soul_Protection
						close;
					} else {
						mes "[伊梅尔达]";
						mes "谢谢你的关心, 但是今天做不了更多的了, 因为原料不够了.";
						mes "有点儿遗憾, 是吗?";
						mes "我非常希望有人能帮我搞些材料过来.";
						close;
					}
				} else {
					mes "[伊梅尔达]";
					mes "你还好吗? 我一路走来都能感觉到你内心的平静.";
					mes "你愿意为我花费一些时间吗?";
					next;
					mes "[伊梅尔达]";
					mes "你愿意帮我把这些驱魔十字架拿给村民吗?";
					next;
					switch (select("好的.:今天不行.") == 2) {
						mes "[伊梅尔达]";
						mes "好吧.";
						mes "今天到马来亚四处逛逛吧.";
						mes "同样的, 你也会不时的邂逅各种灵魂.";
						close;
					}
					if ((checkquest(7381, PLAYTIME) == 0) || (checkquest(7381, PLAYTIME) == 1)) {
						mes "[伊梅尔达]";
						mes "非常感谢.";
						mes "把它们都分发给村民后再来吧.";
						setquest 7374;
						setquest 7368;
						setquest 7369;
						setquest 7370;
						setquest 7371;
						setquest 7372;
						setquest 7373;
						getitem 6503, 6; // Soul_Protection
						close;
					} else {
						mes "[伊梅尔达]";
						mes "谢谢你的关心, 但是今天做不了更多的了, 因为原料不够了.";
						mes "有点儿遗憾, 是吗?";
						mes "我非常希望有人能帮我搞些材料过来.";
						close;
					}
				}
			}
			break;
		}
	}
	end;
}

malaya,181,353,5	script	老头纳多#malaya	4_M_BARYO_OLD,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 不能继续进行任务. 你的负重太大了. -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[老头 那勒德]";
		mes ".......";
		mes "不是本地人啊, 我知道了. 没什么说的了.";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7353) == 2) {
			mes "[老头 那勒德]";
			mes "帮我这个老头子一把, 行吗?";
			mes "我不在意能给我多大帮助, 只要你有帮我的意思就可以了.";
			next;
			mes "[老头 那勒德]";
			mes "你知道的, 我活不了多久了...";
			mes "帮我个忙, 让我走的平静一些吧.";
			close;
		} else {
			mes "[老头 那勒德]";
			mes "你... 你!!";
			mes "你就是那位拥有强大的精神力, 能阻挡恶灵的年青人吗?!";
			mes "能不能... 能分一些精神力给我吗?";
			next;
			mes "[老头 那勒德]";
			mes "因为城镇周围鬼魂的原因, 我睡眠不好, 而且在阴雨天时我的背会很痛.";
			next;
			mes "[老头 那勒德]";
			mes "请和我分享一下那种神奇的力量吧.";
			mes "例如你的一个纽扣什么的?";
			next;
			mes "-因为你能驱散鬼魂, 村民很想要留下你的一件物品. -";
			setquest 7353;
			completequest 7353;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "-太多的人问你要东西了. 最好还是和峰先生谈谈吧.-";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "[" + strcharinfo(0) + "]";
		mes "如果和他交谈的话, 我所有的纽扣估计都会被扒掉.";
		mes "必须向峰先生求助了!";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7360) != -1) {
			mes "[老头 那勒德]";
			mes "老实说吧, 我想这些神圣的制品并没有什么特殊的能力.";
			mes "只能让心神安宁罢了.";
			next;
			mes "[老头 那勒德]";
			mes "然而, 我现在看到了你的不同.";
			mes "因为是外地人的原故就对他进行排斥, 再也不是一个好办法了.";
			mes "忽略了你的存在, 实在对不起.";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dff准备拿出蓝色魔力矿石和圣水.^000000";
			close;
		}
		mes "[老头 那勒德]";
		mes "怎么, 对分享你的精神力, 改变看法了吗?";
		next;
		select("把准备好的东西递给他.");
		mes "[老头 那勒德]";
		mes "啊... 谢谢你了.";
		mes "现在, 我能保持平静一段时间了...";
		mes "...宁静总是最好的. 太好了.";
		next;
		mes "- 把蓝色魔力矿石和圣水交给纳多.-";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7360;
		completequest 7360;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-这位老人作为最后的分发者, 已经有足够多的圣物送出去了.-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if ((malaya_hi > 12) && (malaya_hi < 20)) {
		mes "[老头 那勒德]";
		mes "老实说吧, 我想这些圣物并没有什么特殊的能力.";
		mes "只能让心神安宁罢了.";
		next;
		mes "[老头 那勒德]";
		mes "如果有可能的话, 你能帮我个忙吗?";
		mes "现在还好, 我的意思是有可能的话.";
		close;
	} else {
		mes "[老头 那勒德]";
		switch(rand(1, 6)) {
		case 1:
			mes "你知道卡普多吗? 我听说 " + $malayaNames$[1] + " 旅行者正在帮助卡普多... 总之...";
			break;
		case 2:
			mes "这些天已经有很多驱魔十字架了. " + $malayaNames$[0] + " 非常热心的发送着驱魔十字架. 在你住的地方, 这是个传统吗?";
			break;
		case 3:
			mes "我听说, 商人们中间, " + $malayaNames$[1] + " 的名字经常被提起. 看起来他很会做生意的样子.";
			break;
		case 4:
			mes "有一次, 我看到有个人踩到水果皮上了. '谁来帮帮我 " + $malayaNames$[1] + "~' 他大叫着, 那样子让我笑尿了.";
			break;
		case 5:
			mes "噢, 还是你? 谢谢那时你给我们的帮助.";
			break;
		case 6:
			mes "我听说 " + $malayaNames$[2] + " 的名字在巴库很出名. 你也想赢得一些声望吗?";
			break;
		}
		mes "这是什么?";
		next;
		switch (select("交谈.:拿出驱魔十字架.:老头和铸铁锅")) {
		case 1:
			mes "[老头 那勒德]";
			mes "马来亚港口是一座美丽的城市.";
			mes "不论是陈旧还是崭新的东西都能很好的融合.";
			next;
			mes "[老头 那勒德]";
			mes "当然了, 最近的一些关于鬼魂的事让人担扰...";
			mes "但是你和其他一些年青人努力处理此事, 减轻了我不少的负担.";
			mes "谢谢你.";
			close;
		case 2:
			if ((checkquest(7374) != -1) && (checkquest(7369) != -1)) {
				if (!countitem(6503)) {
					mes "^4d4dff没有更多的驱魔十字架给这位老人了.^000000";
					close;
				}
				mes "[老头 那勒德]";
				mes "这是一个用传说中的方法制作出的驱魔十字架吗?";
				mes "太感激了, 你为我换了一个新的.";
				mes "我欠你和伊梅尔达的一个人情.";
				next;
				mes "-把驱魔十字架递给老头纳多.-";
				delitem 6503, 1; // Soul_Protection
				erasequest 7369;
				setquest 7383;
				if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
					mes "- 老头作为最后一个分发者, 所有的驱魔十字架都已被送出. 回去找伊梅尔达.-";
					if (malaya_hi == 23) {
						set malaya_hi, 24;
					}
					setquest 7379;
					erasequest 7382;
					erasequest 7383;
					erasequest 7384;
					erasequest 7385;
					erasequest 7386;
					erasequest 7387;
				}
				close;
			} else {
				mes "[老头 那勒德]";
				mes "什么? 一个崭新的驱魔十字架?";
				mes "暂时不用. 你之前给我的那个我还留着呢.";
				mes "这个用坏了的时候, 你再给我一个新的, 好吗?";
				close;
			}
			break;
		case 3:
			if (BaseLevel < 100) {
				mes "[老头 那勒德]";
				mes "嗯... 你还不够强大, 在巴库旅行可是很危险的.";
				mes "对不起, 我还不能让你拿着珍贵的铸铁锅.";
				close;
			}
			if ((checkquest(7378, PLAYTIME) == 0) || (checkquest(7378, PLAYTIME) == 1)) {
				mes "[老头 那勒德]";
				mes "你已经把铸铁锅带到巴库了, 今天就到这儿吧.";
				mes "不管锅有多么的坚硬, 即使用的是最精良的铸铁, 它也只能使用一天.";
				next;
				mes "[老头 那勒德]";
				mes "如果可以的话, 明天再来帮我吧.";
				close;
			} else if (checkquest(7378, PLAYTIME) == 2) {
				mes "[老头 那勒德]";
				mes "你好啊!";
				mes "吃的还好吗, 住的还好吗?";
				mes "有时间的话再来啊.";
				next;
				mes "[老头 那勒德]";
				mes "是关于铸铁锅的事情, 不过等你把手头上的事儿完成了再说吧.";
				erasequest 7378;
				close;
			 } else {
				if (checkquest(7377) != -1) {
					if (countitem(6503) < 5) {
						mes "[老头 那勒德]";
						mes "你把铸铁锅完好无损的带到了吗?";
						mes "梦巴奇的 其克 应该会给你一个驱魔十字架. 拿到了吗?";
						mes "你肯定把它落在什么地方了. 去把它找回来吧.";
						close;
					}
					mes "[老头 那勒德]";
					mes "好的. 这就是梦巴奇的 其克 答应给我作为回报的驱魔十字架.";
					mes "我知道你把伊梅达尔制作的驱魔十字架每天都带来一些, 但是我们还需要更多.";
					next;
					mes "[老头 那勒德]";
					mes "顺便再来啊.";
					mes "我一直在巴库准备好需要的铸铁锅哦.";
					delitem 6503, 5; // Soul_Protection
					setquest 7378;
					erasequest 7377;
//					if (IsPremiumPcCafe == 10)
						getitem 6497, 2; // Lesser_Agimat
//					else
//						getitem 6497, 1; // Lesser_Agimat
					getexp 200000,200000;
					if (!rand(3))
						$malayaNames$[2] = strcharinfo(0);
					close;
				} else {
					if (checkquest(7376) > -1) {
						mes "[老头 那勒德]";
						mes "去找梦巴奇的其克, 并把这些铸铁锅交给他.";
						mes "应该能帮助解决食月暴龙的麻烦了.";
						close;
					} else {
						mes "[老头 那勒德]";
						mes "是的, 铸铁锅.";
						mes "去找梦巴奇的其克, 并把这些铸铁锅交给他.";
						mes "我想你帮我做这件事情...";
						next;
						switch (select("铸铁锅?:我去做吧.:我现在很忙.")) {
						case 1:
							mes "[老头 那勒德]";
							mes "因为食月暴龙的原因.";
							mes "敲打铁锅发出噪音, 才会让食月暴龙受惊, 吐出月亮.";
							next;
							mes "[老头 那勒德]";
							mes "食月暴龙就生活在 巴勒攸马西瓦哥 附近, 所以那里经常有麻烦发生.";
							next;
							mes "[老头 那勒德]";
							mes "必须准备足够多的铁锅来打造.";
							mes "但在这里锻造更方便.";
							mes "所以我每天都运来一些.";
							close;
						case 2:
							mes "[老头 那勒德]";
							mes "这就是铸铁锅了. 马来亚有很不错的铁匠.";
							mes "把铸铁锅交给梦巴奇的其克, 就在 巴勒攸马西瓦哥 附近的一个镇子里.";
							setquest 7376;
							getitem 6504, 5; // Cast_Iron_Caldron
							close;
						case 3:
							mes "[老头 那勒德]";
							mes "就是这样了.";
							mes "你得抓紧时间了.";
							close;
						}
					}
				}
			}
			break;
		}
	}
	end;
}

malaya,224,267,3	script	罗梅#malaya	4_M_MAYOR,{
	if (malaya_hi < 10) {
		mes "[罗梅]";
		mes ".........";
		mes " ";
		mes "(他躲避你的目光而忽略你.)";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7357) == 2) {
			mes "[罗梅]";
			mes "....如此的寒心.";
			mes "这里的我们, 总是在焦虑中颤抖...";
			next;
			mes "[罗梅]";
			mes "甚至不允许心灵的平静...";
			close;
		} else {
			mes "[罗梅]";
			mes "啊....";
			mes "... 你是...";
			mes "对不起没注意到你.";
			mes "但是... 你一定是他们正在谈论的那个人...";
			next;
			mes "[罗梅]";
			mes "你是那个规避了鬼魂的人吗?";
			mes "如果允许的话, 能给我留一件你的物品或是你的一缕头发吗?";
			next;
			mes "[罗梅]";
			mes "我想拿着它... 就像拿着神符一样.";
			next;
			mes "-这个不安的村民想得到一件你的物品, 因为你能规避鬼魂. -";
			setquest 7357;
			completequest 7357;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "- 已经问你要了足够多了. 可能和峰先生谈一谈会好点.-";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "罗梅悲伤的看着你离开.";
		mes "他肯定会以他的方式把东西用在什么地方!";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7364) != -1) {
			mes "[罗梅]";
			mes "坦白地说, 为了心灵的平静.";
			mes "拿着它们, 我会更勇敢的去面对.";
			next;
			mes "[罗梅]";
			mes "我的意思是, 我依赖这些物品.";
			mes "但是如果我拥有他们, 我就是勇士.";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dff准备拿出 蓝色魔力矿石 和 圣水. ^000000";
			close;
		}
		mes "[罗梅]";
		mes "...这是什么?";
		next;
		select ("把物品交给他");
		mes "[罗梅]";
		mes "噢... 谢谢你.";
		mes "我能感受到你的灵魂.";
		mes "它们会保佑我平安的.";
		next;
		mes "[罗梅]";
		mes "嘿... 你还能给我女儿一些吗?";
		next;
		mes "- 把准备好的 蓝色魔力矿石 和 圣水 交给罗梅.-";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7364;
		completequest 7364;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-最后, 我想已经给了足够多的圣物了.-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[罗梅]";
		mes "这些圣物出自一把好手啊.";
		mes "就像我女儿一样.";
		close;
	} else {
		mes "[罗梅]";
		mes "你好啊.";
		switch(rand(1, 6)) {
		case 1:
			mes "哈哈, 我昨天晚上做了个梦, 你懂的, 梦见了 " + $malayaNames$[0] + ". 哈哈... 真是奇怪啊...";
			break;
		case 2:
			mes "有时候, 我妻子在梦中会发出这种声音. " + $malayaNames$[0] + "... " + $malayaNames$[0] + "... 她这样说着. 这是谁啊? 你知道吗?! 她被魔鬼上身了吗?";
			break;
		case 3:
			mes  "" + $malayaNames$[0] + " 改变了屋子的气氛, 这全部要归功于他. 看起来, 我们获救于这些圣物和驱魔十字架.";
			break;
		case 4:
			mes  "住在 巴勒攸马西瓦哥 附近的村民非常强壮. 他们的小孩就在森林里玩耍. 如果我是那样... 我都不敢想象.";
			break;
		case 5:
			mes  "毋庸置疑, 村子里最出名的要属 " + $malayaNames$[2] + " 了. 他们说甚至在巴勒攸, 他都很出名.";
			break;
		case 6:
			mes  "在喝醉的时候, Merchant Woeon says '我们的 " + $malayaNames$[1] + " ' '我们 " + $malayaNames$[1] + " ' . 我不知道他俩之间发生了什么?";
			break;
		}
		next;
		if (select("交给他驱魔十字架:事情如何了?") == 2) {
			mes "[罗梅]";
			mes "这些天我很平静.";
			close;
		}
		if ((checkquest(7374) == -1) || (checkquest(7373) == -1)) {
			mes "[罗梅]";
			mes "一个新的驱魔十字架?";
			mes "你原来给我的那个还能用呢.";
			mes "现在还好啦.";
			close;
		}
		if (!countitem(6503)) {
			mes "^4d4dff没有更多的驱魔十字架给罗梅了.^000000";
			close;
		}
		mes "[罗梅]";
		mes "一把新的驱魔十字架.";
		mes "我想先把原来的那把用坏了再说吧... 感谢你的到来.";
		mes "这个驱魔十字架一样会保佑我们的.";
		next;
		mes "- 把罗梅的驱魔十字架交给他.-";
		delitem 6503, 1; // Soul_Protection
		erasequest 7373;
		setquest 7387;
		if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
			mes "- 最后, 所有的驱魔十字架都发出去了. 去找伊梅达尔吧.-";
			if (malaya_hi == 23) {
				set malaya_hi, 24;
			}
			setquest 7379;
			erasequest 7382;
			erasequest 7383;
			erasequest 7384;
			erasequest 7385;
			erasequest 7386;
			erasequest 7387;
		}
		close;
	}
	end;
}

malaya,223,267,5	script	托拉#malaya	4_F_DST_CHILD,{
	if (malaya_hi < 10) {
		mes "[托拉]";
		mes "..........呼... 呼!";
		mes " ";
		mes "(当你和她的目光相对时, 她就跑开躲在她爸爸背后.)";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7356) == 2) {
			mes "[托拉]";
			mes "今天晚上托拉会被带走.";
			mes "吓人的小孩会来找托拉.";
			next;
			mes "托拉扯着她爸爸的衣角时, 罗梅悲伤的看着你.";
			mes "最好做些什么...";
			close;
		} else {
			mes "[托拉]";
			mes "....我...嗯...那个......";
			mes ".........噢... 爸爸....";
			next;
			mes "[罗梅]";
			mes "嘿, 能给我女儿一粒纽扣或是一缕你的头发吗?";
			mes "她总是失眠 .......";
			next;
			mes "[罗梅]";
			mes "如果她有你的某件物品当作神符, 她不就能睡的更好一些了吗?";
			next;
			mes "- 这两位不安的村民想得到你的一些东西作为庇护神符. -";
			setquest 7356;
			completequest 7356;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "- 已经给出去足够多的物品了. 最好和梦巴奇的峰先生谈谈了 -";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "托拉好奇的看看你, 又看看她爸爸.";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7363) != -1) {
			mes "[托拉]";
			mes "我也不能肯定.";
			mes "但是我能感觉到它们传递给我的温暖.";
			mes "爸爸更强大了, 托拉也变的更勇敢了呢.";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dff拿出 蓝色魔力矿石 和 圣水. ^000000";
			close;
		}
		mes "[托拉]";
		mes ".... 我可以问声好吗?";
		mes "你好啊... 这位...";
		next;
		select("把准备好的物品交给她.");
		mes "[托拉]";
		mes "好漂亮的蓝色石头啊...!";
		mes "哇~ 真是太漂亮了!";
		mes "这些石头可以保佑托拉平安吗?";
		next;
		mes "- 把 蓝色魔力矿石 和 圣水 交给托拉. -";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7363;
		completequest 7363;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-最后, 我想已经给出足够的圣物了.-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[托拉]";
		mes "爸爸告诉我要紧紧的抓住这些圣物.";
		mes "这样, 那些坏蛋鬼魂就不能来找托拉了...";
		close;
	} else {
		mes "[托拉]";
		mes "你好...";
		next;
		if (select("把 驱魔十字架 给她.:你好啊?") == 2) {
			mes "[托拉]";
			mes "...嘿...谢谢你.";
			mes "你在保佑着我们的平安, 是吗?";
			close;
		}
		if ((checkquest(7374) != -1) && (checkquest(7372) != -1)) {
			if (!countitem(6503)) {
				mes "^4d4dff没有更多的 驱魔十字架 给托拉了.^000000";
				close;
			}
			mes "[托拉]";
			mes "这是一个新的驱魔十字架吗?";
			mes "谢谢你.";
			mes "托拉抱着驱魔十字架, 就可以甜甜的睡觉了呢.";
			mes "爸爸也很喜欢它.";
			next;
			mes "- 把新的 驱魔十字架 给托拉.-";
			delitem 6503, 1; // Soul_Protection
			erasequest 7372;
			setquest 7386;
			if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
				mes "- 最后, 所有的 驱魔十字架 都已经分发出去了. 去找伊梅达尔吧. -";
				if (malaya_hi == 23) {
					set malaya_hi, 24;
				}
				setquest 7379;
				erasequest 7382;
				erasequest 7383;
				erasequest 7384;
				erasequest 7385;
				erasequest 7386;
				erasequest 7387;
			}
			close;
		} else {
			mes "[托拉]";
			mes "嗯...";
			mes "原来你给托拉的东西, 还在保佑着托拉的平安呢.";
			mes "我很好.";
			close;
		}
	}
	end;
}

malaya,62,274,0	script	沙坑#malaya	4_SOIL,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 不能继续任务. 你的负重太大了. -";
		close;
	}
	if ((checkquest(7366) == -1) && (checkquest(7380) == -1)) {
		mes "一个蒸发海水用的设备埋在沙子里了...";
		close;
	}
	if (countitem(6501) >= 6) {
		mes "盐袋已经收集够了.";
		close;
	}
	mes "一个蒸发海水用的设备安装在沙坑里.";
	next;
	mes "盐?梢源痈墒饕渡瞎温湎吕?";
	mes "这些树叶是有人专门放在海水里的.";
	close2;
	progressbar "0xffff00", 5;
	disablenpc strnpcinfo(0);
	initnpctimer;
	getitem 6501, 1; // Salt_Bag
	mes "[" + strcharinfo(0) + "]";
	mes "这些应该足够了吧.";
	close;

OnTimer30000:
	enablenpc strnpcinfo(0);
	stopnpctimer;
	end;
}
malaya,66,277,0	duplicate(沙坑#malaya)	沙坑#malaya01	4_SOIL
malaya,70,282,0	duplicate(沙坑#malaya)	沙坑#malaya02	4_SOIL

ma_fild01,178,206,0	script	黑竹#malaya	CLEAR_NPC,4,4,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 不能继续任务. 你的负重太大了. -";
		close;
	}
	if ((checkquest(7366) == -1) && (checkquest(7380) == -1)) {
		mes "这儿有一片短小的黑色竹林.";
		close;
	}
	if (countitem(6500) >= 6) {
		mes "已经收集足够多的尖头竹竿了...";
		close;
	}
	mes "这儿有一片黑色枝叶的竹子.";
	mes "如果把它们砍下来削尖了, 我想就是伊梅达尔想要的尖头竹竿了吧.";
	close2;
	progressbar "0xffff00", 3;
	disablenpc strnpcinfo(0);
	initnpctimer;
	getitem 6500, 1; //Sharp_Bamboo
	mes "[" + strcharinfo(0) + "]";
	mes "我就知道我能成功的!";
	close;
OnTouch:
	if ((checkquest(7366) != -1) || (checkquest(7380) != -1)) {
		specialeffect EF_LEVEL99_4;
	}
	end;
OnTimer30000:
	enablenpc strnpcinfo(0);
	stopnpctimer;
	end;
}
ma_fild01,225,186,0	duplicate(黑竹#malaya)	黑竹#malaya01	CLEAR_NPC,4,4
ma_fild01,230,244,0	duplicate(黑竹#malaya)	黑竹#malaya02	CLEAR_NPC,4,4
ma_fild01,174,238,0	duplicate(黑竹#malaya)	黑竹#malaya03	CLEAR_NPC,4,4
ma_fild01,180,273,0	duplicate(黑竹#malaya)	黑竹#malaya04	CLEAR_NPC,4,4
ma_fild01,179,145,0	duplicate(黑竹#malaya)	黑竹#malaya05	CLEAR_NPC,4,4

malaya,295,171,3	script	收集品商人 卫恩	4_M_MALAYA,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 不能继续进行任务. 你的负重太大了. -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[卫恩]";
		mes "啊... 啊... 我头痛...";
		mes "我的头痛病一定是你这个外地人带来的!";
		mes "快走开. 呸, 走开!";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7355) == 2) {
			mes "[卫恩]";
			mes "现在, 看看这里吧, 我的朋友...";
			mes "给我一个纽扣就都解决了.";
			mes "看起来很廉价的一件事儿啊.";
			close;
		} else {
			mes "[卫恩]";
			mes "噢! 你是那个他们都在谈论的人了吧!";
			mes "我有一点粗鲁, 是吗? 算了吧!";
			mes "是的, 别提了...";
			next;
			mes "[卫恩]";
			mes "如果你有可怕的需求, 我能给你在附近找一份工作, 你懂的..";
			mes ".... 你能给我一些你的物品吗?";
			next;
			mes "[卫恩]";
			mes "我听到了一些传闻, 你可以驱散鬼魂!";
			mes "你难道看不到因为害怕那些鬼魂, 我的手一直在颤抖吗?";
			mes "我想如果你能给我一些你袖子上的纽扣, 我会好一点儿的...";
			next;
			mes "- 不安的村民想得到你的一些物品, 因为你能驱散鬼魂. -";
			setquest 7355;
			completequest 7355;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "- 已经给出足够多的物品了, 最好和梦巴奇的峰先生谈谈.-";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "[卫恩]";
		mes "唉... 近来日子太难过了.";
		mes "为什么鬼魂偏偏来找我.";
		mes "我真希望有什么幸运神符...";
		next;
		mes "[卫恩]";
		mes "为什么不给我一个你的物品, 这样我就能当作神符使用了?";
		mes "来吧, 别羞射啊, 一个臭袜子都可以挽救一条生命啊, 你知道的.";
		mes "太寒心了, 真尼玛想...";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7362) != -1) {
			mes "[卫恩]";
			mes "嗯. 看看我的双手.";
			mes "抖的不是那么厉害了, 对吗?";
			mes "不是吗?";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dff准备拿出 蓝色魔力矿石 和 圣水. ^000000";
			close;
		}
		mes "[卫恩]";
		mes "哼! 你想要干什么吧?";
		next;
		select ("把准备好的东西给我.");
		mes "[卫恩]";
		mes "噢... 忘了这个事儿吧.";
		mes "你知道的, 你走后我一直被鬼魂困绕...";
		mes "唉...";
		next;
		mes "[卫恩]";
		mes "这是你精神的源泉吗?";
		mes "看起来略虐!";
		mes "也许, 这的确能驱散它们...";
		next;
		mes "[卫恩]";
		mes "总之, 多谢了.";
		mes "如果有工作了, 我会第一个通知你的.";
		next;
		mes "- 把 蓝色魔力矿石 和 圣水 交给卫恩.-";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7362;
		completequest 7362;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-最后, 我想已经分发出足够多的圣物了.-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[卫恩]";
		mes "好了... 让我们谈正事儿吧.";
		mes "多谢你了, 我再也没看到那些鬼魂了.";
		mes "哈哈哈哈哈";
		close;
	} else {
		mes "[卫恩]";
		mes "嗨, 你好啊!";
		next;
		if (select("给他驱魔十字架.:商人和他的收集品") == 1) {
			if (((checkquest(7374) == 0) || (checkquest(7374) == 1)) && ((checkquest(7371) == 0) || (checkquest(7371) == 1))) {
				if (!countitem(6503)) {
					mes "^4d4dff没有更多的驱魔十字架给卫恩了.^000000";
					close;
				}
				mes "[卫恩]";
				mes "哎哟~ 一个新的驱魔十字架?";
				mes "这是官方制作的神符吗? 伊梅达尔的工艺不错啊.";
				mes "同样也谢谢你, 必须的.";
				next;
				mes "-把驱魔十字架交给卫恩.-";
				delitem 6503, 1; // Soul_Protection
				erasequest 7371;
				setquest 7385;
				if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
					mes "-最后, 足够多的驱魔十字架已经分发出去了.-";
					if (malaya_hi == 23) {
						set malaya_hi, 24;
					}
					setquest 7379;
					erasequest 7382;
					erasequest 7383;
					erasequest 7384;
					erasequest 7385;
					erasequest 7386;
					erasequest 7387;
				}
				close;
			} else {
				mes "[卫恩]";
				mes "驱魔十字架?";
				mes "我原来的那个还用着呢.";
				mes "效果相当不错.";
				close;
			}
		} else {
			if (BaseLevel < 100) {
				mes "[卫恩]";
				mes "是的, 我收集各种各样从魔物身上掉落的物品.";
				mes "事实上, 我在这里收集 光泽杰勒比 ...";
				next;
				mes "[卫恩]";
				mes "对你来说, 这项工作太繁重了.";
				mes "周围的魔物十分丑陋, 你知道的.";
				mes "你如果能变的更强大, 我会通知你来接活的!";
				close;
			}
			if ((checkquest(7392, PLAYTIME) == 0) || (checkquest(7392, PLAYTIME) == 1)) {
				mes "[卫恩]";
				mes "噢, 光泽杰勒比?";
				mes "今天我已经收集到足够多了.";
				mes "明天再来吧.";
				close;
			} else if (checkquest(7392, PLAYTIME) == 2) {
				mes "[卫恩]";
				mes "噢, 是的是的.";
				mes "你今天还要去收集光泽杰勒比吗?";
				mes "我知道这不是一件简单的事情, 但你会做好的.";
				erasequest 7392;
				next;
				if (select("我今天太忙了.:交给我吧!") == 1) {
					mes "[卫恩]";
					mes "是吗? 好吧.";
					mes "你需要工作的时候, 顺路来找我吧.";
					close;
				}
				mes "[卫恩]";
				mes "和平时一样, 给我拿来 30个光泽杰勒比 吧.";
				mes "你可以从 食人波利 那儿得到的.";
				setquest 7391;
				close;
			} else {
				if ((checkquest(7391) == 0) || (checkquest(7391) == 1)) {
					if (countitem(6498) < 30) {
						mes "[卫恩]";
						mes "嗯? 我想你还没有收集足够吧.";
						mes "我要的是 30个光泽杰勒比. 公事公办嘛.";
						close;
					}
					mes "[卫恩]";
					mes "噢, 数目足够了吗?";
					mes "我收下了.";
					mes "它们对你来说是没有用的, 是吗?";
					next;
					mes "[卫恩]";
					mes "那我就收下光泽杰勒比了...";
					mes "等你再来哈!";
					delitem 6498, countitem(6498); //Jejellopy
					setquest 7392;
					erasequest 7391;
//					if (IsPremiumPcCafe == 10)
						getitem 6497, 2; // Lesser_Agimat
//					else
//						getitem 6497, 1; // Lesser_Agimat
					getexp 200000,200000;
					set .@memo_name, rand(1,3);
					if (!rand(3))
						$malayaNames$[1] = strcharinfo(0);
					close;
				} else {
					mes "[卫恩]";
					mes "正如你看到的, 我就是一个收集商人了.";
					mes "我收集各式魔物的掉落品.";
					next;
					mes "[卫恩]";
					mes "它们可以当作制造其它物品的材料.";
					mes "当然了, 在马来亚港口, 需求量最大的就是光泽杰勒比了..";
					next;
					mes "[卫恩]";
					mes "光泽杰勒比可以从食人波利那儿得到.";
					mes "能给我拿来 30个光泽杰勒比 吗?";
					next;
					if (select("妥妥儿的.:不可能.") == 2) {
						mes "[卫恩]";
						mes "是吗? 太可惜了吧.";
						mes "你需要工作的时候再来吧.";
						close;
					}
					mes "[卫恩]";
					mes "好的, 我相信你能做好的.";
					mes "记住了, 是 30个光泽杰勒比.";
					setquest 7391;
					close;
				}
			}
		}
	}
	end;
}

malaya,119,217,3	script	铁匠 潘度伊	4_M_DEWBOY,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 不能继续进行任务. 你的负重太大了. -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[潘度伊]";
		mes "...呸!";
		mes "走开... 快走开!";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7354) == 2) {
			mes "[潘度伊]";
			mes "求求你了...";
			mes "你就不能帮帮我吗, 只是为了帮帮我?";
			mes "你真的以为忽视我就是最好的选择吗?!";
			next;
			mes "[潘度伊]";
			mes "看看这里.";
			mes "求你只看一眼.";
			mes "只是一个按钮...";
			close;
		} else {
			mes "[潘度伊]";
			mes "你好啊!";
			mes "我听说过你的声望.";
			mes "我在想, 我能不能从你这儿拿到什么东西, 以便证明我和你面对面见过...";
			next;
			mes "[潘度伊]";
			mes "噢... 很惊奇我突然对你这么好吧.";
			mes "我听说过你驱散鬼魂的事情.";
			mes "疟了!";
			next;
			mes "[潘度伊]";
			mes "用一个存有你的精神的物品, 就可以驱散鬼魂, 是吗?";
			mes "求求你, 慷慨些, 施舍一点儿给我吧...";
			next;
			mes "-不安的村民想得到你的一些物品, 因为你能驱散鬼魂. -";
			setquest 7354;
			completequest 7354;
			if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
				next;
				mes "- 已经给出足够多的物品了, 最好和梦巴奇的峰先生谈谈.-";
				set malaya_hi, 11;
				setquest 7358;
			}
			close;
		}
	} else if (malaya_hi == 11) {
		mes "[潘度伊]";
		mes "唉... 近来日子很难过啊.";
		mes "为什么鬼魂偏偏来找我?";
		mes "真希望有个幸运神符什么的...";
		next;
		mes "[潘度伊]";
		mes "求求你...";
		mes "你就不能帮帮我吗, 只是为了帮帮我?";
		mes "你真的以为忽视我就是最好的选择吗?!";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7361) != -1) {
			mes "[潘度伊]";
			mes "现在我信心十足, 留给我做的唯一一件事情就是冲向医院或什么有材料的地方!";
			mes "但... 但是, 我好怕...";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dff准备拿出 蓝色魔力矿石 和 圣水. ^000000";
			close;
		}
		mes "[潘度伊]";
		mes "什, 什么, 你终于肯帮我了?!";
		mes "你准备给我一件物品, 为了让我得到平静?!";
		next;
		select ("把准备好的东西给他.");
		mes "[潘度伊]";
		mes "太棒了, 我就知道你会回来的!";
		mes "太好了... 现在我有了你的一点精神力, 晚上可以睡个好觉了.";
		next;
		mes "- 把 蓝色魔力矿石 和 圣水 给潘度伊.-";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7361;
		completequest 7361;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-最后, 我想我已经给出足够多的圣物了.-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[潘度伊]";
		mes "银... 银... 我需要银器.";
		mes "我曾想过如果鬼魂都走了我就能取得一些银器了, 但那是不可能的...";
		close;
	} else {
		mes "[潘度伊]";
		switch(rand(1, 6)) {
		case 1:
			mes "你知道的. " + $malayaNames$[1] + ". 你是我的英雄. 我看好你!";
			break;
		case 2:
			mes "我见过你, " + $malayaNames$[1] + " 打败了城外的那些食人波利. 那种力量... 我... 我太吃惊了!";
			break;
		case 3:
			mes "你, " + $malayaNames$[0] + ", 照亮了我的灵魂. 那么耀眼, 你不知道? 真的不知道?";
			break;
		case 4:
			mes "据我所知, 这些天, " + $malayaNames$[1] + " 是最勤奋的一个人. 他像是一个勤奋的上帝.";
			break;
		case 5:
			mes $malayaNames$[5] + "有一个大发现. 一条龙, 他们说的.";
			break;
		case 6:
			mes "你好啊?!";
			break;
		}
		next;
		switch (select("拿出驱魔十字架.:银刃.:纯银十字架")) {
		case 1:
			if ((checkquest(7374) == -1) || (checkquest(7370) == -1)) {
				mes "[潘度伊]";
				mes "很高兴你小心保存着驱魔十字架.";
				mes "我想我的还用的挺好. ";
				mes "如果哪天用坏了, 我会找你的!";
				close;
			}
			if (!countitem(6503)) {
				mes "^4d4dff没有更多的驱魔十字架给潘度伊了.^000000";
				close;
			}
			mes "[潘度伊]";
			mes "好的, 一把新的驱魔十字架.";
			mes "再也不用去面对那些阴影, 真是一件不错的事情!";
			next;
			mes "-把驱魔十字架交给潘度伊.-";
			delitem 6503, 1; // Soul_Protection
			erasequest 7370;
			setquest 7384;
			if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
				mes "-最后, 所有的驱魔十字架都已经分发出去了.-";
				if (malaya_hi == 23) {
					set malaya_hi, 24;
				}
				setquest 7379;
				erasequest 7382;
				erasequest 7383;
				erasequest 7384;
				erasequest 7385;
				erasequest 7386;
				erasequest 7387;
			}
			close;
		case 2:
			if (BaseLevel < 100) {
				mes "[潘度伊]";
				mes "嗯... 要做银刃, 你就需要银子.";
				mes "我可以熔化银手环来获得银子";
				mes "而银手环可以从医院里找到.";
				next;
				mes "[潘度伊]";
				mes "然而, 我认为你现在还做不了. 对不起, 这项工作对你来说还为时过早!";
				mes "如果你现在就进去... 你就不会活着出来了!";
				close;
			}
			.@hunting = checkquest(7393, HUNTING);
			if (.@hunting == 2) {
				if (countitem(6508) < 10) {
					mes "[潘度伊]";
					mes "银手环在哪儿呢?";
					mes "我知道你是无敌的...";
					mes "但我还是得需要足够的银手环才能熔成银子啊.";
					next;
					mes "[潘度伊]";
					mes "10个银手环!";
					mes "不管你私藏了多少个, 而我只需要10个银手环就可以了!!";
					mes "现在就在你的手里了!";
					close;
				}
				mes "[潘度伊]";
				mes "我从来都很尊敬你!";
				mes "你打败了它们, 并且带回来了银手环.";
				next;
				mes "[潘度伊]";
				mes "从今天开始, 我打算做成一把银制武器了..!!";
				mes "如果我手里有一把银刃的话, 我就会开始锻造...!!";
				next;
				mes "[潘度伊]";
				mes "问题不大, 但是你去取得银手环时, 的确会遇到一些麻烦.";
				mes "如果我失败了... 我还会请你去进行这项任务的!";
				delitem 6508, 10; //Silver_Bracelet
				setquest 7394;
				erasequest 7393;
//				if (IsPremiumPcCafe == 10)
					getitem 6497, 2; // Lesser_Agimat
//				else
//					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				if (!rand(3))
					$malayaNames$[1] = strcharinfo(0);
				close;
			} else if (.@hunting == 0 || .@hunting == 1) {
				mes "[潘度伊]";
				mes "村子里的那所医院, 容纳了最可怕的事情.";
				mes "我不是了解的很清楚... 不论里面有什么, 我都不愿意靠近它...";
				next;
				mes "[潘度伊]";
				mes "去清除那些传说中的魔物, 拿回银手环吧.";
				mes "你是我唯一可以信赖的人了!";
				close;
			} else {
				.@playtime = checkquest(7394, PLAYTIME);
				if (.@playtime == 0 || .@playtime == 1) {
					mes "[潘度伊]";
					mes "我手里还有一些银子.";
					mes "如果我锻造失败了, 我会再跟你说的.";
					close;
				} else if (.@playtime == 2) {
					erasequest 7394;
					mes "[潘度伊]";
					mes "噢... 我该怎么办?";
					mes "我浪费了你帮我带回来的珍贵的材料...";
					next;
					mes "[潘度伊]";
					mes "也许我不适合做一名铁匠!";
					mes "尽管我很善于制造银器!";
					next;
					if (select("我会拿到材料的, 振作一些.:放弃吧, 骚年.") == 2) {
						mes "[潘度伊]";
						mes "... 你说的对...";
						mes "我再也不能做出一把银刃了...";
						mes "放弃... 呵呵... 我对你很失望啊.";
						close;
					}
					mes "[潘度伊]";
					mes "我就知道你会这么说的!";
					mes "我就知道你会这么说的!";
					mes "10个银手环, 谢谢了.";
					setquest 7393;
					next;
					mes "[潘度伊]";
					mes "潘度伊会一直对着你微笑~";
					mes "*咧嘴而笑*";
					close;
				} else {
					mes "[潘度伊]";
					mes "银刃!";
					mes "好了. 太棒了! 一挥手就可以切开魔鬼的圣物...!";
					next;
					mes "[潘度伊]";
					mes "我想成为一名通过制造出银刃, 而让人们瞩目的铁匠.";
					mes "然而, 我拿不到材料.";
					next;
					mes "[潘度伊]";
					mes "我听说在医院里, 他们穿上银手环做为标识.";
					mes "但是当我到那儿的时候, 我发现那里再也不是我记忆中的医院了.";
					next;
					mes "[潘度伊]";
					mes "你可以杀死那些可怕的魔物并取得银手环吗?";
					next;
					if (select("妥妥儿的!:你想多了.") == 2) {
						mes "[潘度伊]";
						mes "... 你是对的...";
						mes "我永远不可能做出一把银刃...";
						mes "赤裸裸的嘲讽我啊. 你知道什么? 我恨死你了.";
						close;
					}
					mes "[潘度伊]";
					mes "我就知道!";
					mes "给医院里那些魔物好好上一课...";
					mes "并且别忘了带回来10个银手环啊.";
					setquest 7393;
					next;
					mes "[潘度伊]";
					mes "潘度伊会一直对着你微笑~";
					mes "*咧嘴而笑*";
					close;
				}
			}
		case 3:
			mes "[潘度伊]";
			mes "你需要纯银十字架?";
			mes "潘度伊可以制作出来的!";
			mes "但是, 我不可能凭空创造, 所以我需要一些银子.";
			next;
			mes "[潘度伊]";
			mes "我需要 ^4d4dff2个银手环^000000 就能做出一把纯银十字架...";
			mes "如果你有足够的银手环, 我就能利用它们来制作纯银十字架.";
			next;
			switch(select("制作一把纯银十字架:制作6把纯银十字架:输入数量:退出.")) {
			case 1:
				set .@amount,1;
			case 2:
				if (!.@amount) set .@amount,6;
				if (countitem(6508) < (.@amount * 2)) {
					mes "[潘度伊]";
					mes "你需要至少" + (.@amount * 2) + "个银手环才能制作出" + .@amount + "个纯银" + ((.@amount == 1) ? "十字架" : "十字架") + ".";
					close;
				}
				set .@time,5;
				break;
			case 3:
				mes "[潘度伊]";
				mes "你需要多少把纯银十字架?";
				mes "我最多一次可以制作50把.";
				next;
				input .@amount;
				if (.@amount == 0) {
					mes "[潘度伊]";
					mes "不需要纯银十字架?";
					mes "那么我就可以休息一会儿了. 哈哈哈~";
					close;
				} else if (.@amount > 50) {
					mes "[潘度伊]";
					mes "一次最多50把!";
					close;
				}
				if (countitem(6508) < (2 * .@amount)) {
					mes "[潘度伊]";
					mes "要制作" + .@amount + "个纯银" + ((.@amount == 1) ? "十字架" : "十字架") + ", 我需要至少" + (2 * .@amount) + "个银手环.";
					close;
				}
				set .@time,15;
				break;
			case 4:
				mes "[潘度伊]";
				mes "如果需要的话, 我会在这儿等你的!";
				close;
			}
			mes "[潘度伊]";
			mes "几秒钟的事儿.";
			mes "我瞬间就能完成!";
			close2;
			progressbar "0xffff00", .@time;
			delitem 6508, .@amount * 2; //Silver_Bracelet
			getitem 6502, .@amount; // Silver_Cross
			mes "[潘度伊]";
			mes "看看吧!";
			mes "多么漂亮啊.";
			mes "我应该是一名艺术家, 而不仅仅是一名铁匠!";
			close;
		}
	}
	end;
}

malaya,326,68,2	script	船员 裴多乐	4W_SAILOR,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 不能继续进行任务. 你的负重太大了. -";
		close;
	}
	if (malaya_hi < 10) {
		mes "[裴多乐]";
		mes "噢... 这艘船暂停服务.";
		mes "更精确的说, 它不能启航了. *偷偷的笑*";
		mes "我能看见鬼魂了. 我想我快死了.";
		close;
	} else if (malaya_hi == 10) {
		if (checkquest(7352) == 2) {
			mes "- 裴多乐看起来要放弃了, 但是他还在看着我.-";
			close;
		}
		mes "[裴多乐]";
		mes "噢... 你就是... 你就是那个驱散了鬼魂的人?!";
		mes "能占用你一点儿时间, 听我随意说两句吗?!";
		next;
		if (select("对不起.:没问题.") == 1) {
			mes "[裴多乐]";
			mes "明晃晃的拒绝啊.";
			mes "你打碎了我最后一丝的希望.";
			mes "或许我还不是很有说服力...";
			close;
		}
		mes "[裴多乐]";
		mes "直入主题吧, 这个镇子就是鬼魂的窝!";
		mes "唉... 我曾经是一名水手, 去了世界上很多的地方, 但是这里的情况是我从来没有经历过的.";
		next;
		mes "[裴多乐]";
		mes "你看到那边的船了吗?";
		mes "虽说是一个小港口, 但却常常停运, 就是因为那些可恶的鬼魂!";
		next;
		mes "[裴多乐]";
		mes "从外界来看没什么, 但这里充满鬼魂, 我告诉你.";
		mes "顺便说一句, 听说那些鬼魂很怕你, 是吗?";
		next;
		select ("噢不是的, 你太...:不要碰我的纽扣!");
		mes "[裴多乐]";
		mes "我听说很多人问你要一些物品来做为神符.";
		mes "我能排个队吗?";
		next;
		mes "[裴多乐]";
		mes "我需要和那边的那个灵魂有一次真诚的交谈.";
		mes "但那个灵魂的力量太强大了, 我无法接近.";
		next;
		mes "[裴多乐]";
		mes "...........那是一个很烂的故事.";
		mes "并且把你的东西给别人也不是一件很容易的事情.";
		next;
		mes "- 裴多乐看起来放弃了, 但他的目光还没有从我身上离开.-";
		setquest 7352;
		completequest 7352;
		if ((checkquest(7352) + checkquest(7353) + checkquest(7354) + checkquest(7355) + checkquest(7356) + checkquest(7357)) > 9) {
			next;
			mes "- 已经给出足够多的物品了, 最好和梦巴奇的峰先生谈谈. -";
			set malaya_hi, 11;
			setquest 7358;
		}
		close;
	} else if (malaya_hi == 11) {
		mes "[裴多乐]";
		mes "唉...";
		mes "真是尴尬啊.";
		close;
	} else if (malaya_hi == 12) {
		if (checkquest(7359) != -1) {
			mes "[裴多乐]";
			mes "总之, 现在我有了他们所讨厌的...";
			mes "时候进去看看我的船了...!";
			close;
		}
		if (!countitem(523) || !countitem(717)) {
			mes "^4d4dff准备拿出 蓝色魔力矿石 和 圣水.^000000";
			close;
		}
		mes "[裴多乐]";
		mes "什么? 我能在你手里看到一些提神的东西. 那是些什么?";
		next;
		mes "[裴多乐]";
		mes "你把它们给我了吗?";
		mes "鬼魂们很怕这些?";
		mes "真是太棒了啊!";
		next;
		mes "[裴多乐]";
		mes "裴多乐, 乐意为您效劳!";
		mes "当你处理完了这里的事情后, 我会用我的船载着您周游世界的!";
		next;
		mes "- 把蓝色魔力矿石和圣水拿给裴多乐. -";
		delitem 717, 1; //Blue_Gemstone
		delitem 523, 1; //Holy_Water
		setquest 7359;
		completequest 7359;
		if ((checkquest(7359) + checkquest(7360) + checkquest(7361) + checkquest(7362) + checkquest(7363) + checkquest(7364)) > 11) {
			mes "-最后, 我想已经给出足够多的圣物了.-";
			set malaya_hi, 13;
			erasequest 7351;
			setquest 7365;
		}
		close;
	} else if (malaya_hi == 13) {
		mes "[裴多乐]";
		mes "总之, 我拥有了他们所讨厌的...";
		mes "走吧, 是时候进船看看了...!";
		next;
		mes "-裴多乐看起来下定了决心.-";
		close;
	} else {
		mes "[裴多乐]";
		mes "哇噢... 你看见了吗?";
		mes "那些鬼魂刚一靠近就消失了.";
		mes "哇, 像在做梦一样.";
		next;
		if (select("把驱魔十字架给他.:关于乘坐客轮") == 1) {
			if ((checkquest(7374) == -1) || (checkquest(7368) == -1)) {
				mes "[裴多乐]";
				mes "你之前给我的那个驱魔十字架还用得很好呢.";
				mes "我也还好.";
				mes "它还可以做来作战的!";
				close;
			}
			if (!countitem(6503)) {
				mes "^4d4dff没有更多的驱魔十字架给裴多乐了.^000000";
				close;
			}
			mes "[裴多乐]";
			mes "一把新的驱魔十字架.";
			mes "好吧. 我今天就会用这一把了.";
			next;
			mes "-把驱魔十字架给裴多乐.-";
			delitem 6503, 1; // Soul_Protection
			erasequest 7368;
			setquest 7382;
			if ((checkquest(7382) + checkquest(7383) + checkquest(7384) + checkquest(7385) + checkquest(7386) + checkquest(7387)) > 5) {
				mes "-最后, 驱魔十字架已经分发的足够多了.-";
				if (malaya_hi == 23) {
					set malaya_hi, 24;
				}
				setquest 7379;
				erasequest 7382;
				erasequest 7383;
				erasequest 7384;
				erasequest 7385;
				erasequest 7386;
				erasequest 7387;
			}
			close;
		}
		if (BaseLevel < 100) {
			mes "[裴多乐]";
			mes "嗯... 你还记的我曾和你谈论过的鬼魂吗?";
			mes "港口遍布鬼魂.";
			mes "等一下, 我说的是一只还是很多?";
			next;
			mes "[裴多乐]";
			mes "不说那么多了. 以你目前的能力, 还解决不了问题.";
			mes "不, 你还做不了. 你会被装在拖尸袋里扔出去的.";
			next;
			mes "[裴多乐]";
			mes "我不能眼睁睁的看着发生那样的事情. 不可能的.";
			close;
		}
		if (malaya_diwata == 0) {
			mes "[裴多乐]";
			mes "对不起, 但是我没说过那边的鬼魂的事情吗?";
			mes "就因为鬼魂的原因, 这里停运了.";
			next;
			mes "[裴多乐]";
			mes "所以这个鬼魂的故事讲的是...?";
			mes "嗯..........";
			mes "说来话长...";
			next;
			if (select("我听着呢.:现在没兴趣.") == 2) {
				mes "[裴多乐]";
				mes "我就知道.";
				mes "但是, 这不是一个无聊的故事.";
				mes "总之, 这是一个关于鬼魂的事情.";
				close;
			}
			mes "[裴多乐]";
			mes "这个故事要从我在这里做水手时开始讲起.";
			mes "当我第一次做航线经理时, 就是精神上的折磨.";
			next;
			mes "[裴多乐]";
			mes "当我将要上岸时, 看到了一些我根本不能相信的东西.";
			mes "黑暗的阴霾从四周的村庄蜂拥至港口.";
			next;
			mes "[裴多乐]";
			mes "开始, 我以为只是一些浓雾罢了.";
			mes "过了几天, 就渐渐清晰了.";
			mes "那是一大群鬼魂.";
			next;
			mes "[裴多乐]";
			mes "一大群不怀善意的鬼魂.";
			mes "在快要启航时一大群鬼魂发出凄厉的哭嚎......";
			next;
			mes "[裴多乐]";
			mes "自从那以后, 那只船就停在那个渡口, 直到今天.";
			mes "为什么? 因为它们接管了这艘船! 那是闹鬼啊!";
			next;
			mes "[裴多乐]";
			mes "如果你不相信, 那你自己去看吧.";
			mes "你就会知道我说的是什么了.";
			set malaya_diwata, 1;
			setquest 7395;
			close;
		} else if (malaya_diwata == 1) {
			mes "[裴多乐]";
			mes "如果你想知道, 就自己上船去看一看吧.";
			close;
		} else if (malaya_diwata == 2) {
			mes "[裴多乐]";
			mes "一个小女孩的灵魂?";
			mes "是不是其它的都在欺负她?";
			mes "来了又走了?";
			next;
			mes "[裴多乐]";
			mes "我不知道.";
			mes "也许梦巴奇知道该怎么办.";
			close;
		} else if (malaya_diwata == 3) {
			mes "[裴多乐]";
			mes "嗯... 献花来抚慰灵魂....";
			mes "你想在她平静下来以后, 听听她的故事吗?";
			mes "好吧... 祝你好运.";
			next;
			mes "[裴多乐]";
			mes "这对重新启航一点儿帮助也没有.";
			mes "因为那些鬼魂的原因, 我不敢靠近.";
			next;
			mes "[裴多乐]";
			mes "现在我请你去做, 完全不是因为我怕麻烦,";
			mes "只是因为我根本不可能亲自去做.";
			close;
		} else if (malaya_diwata == 4) {
			mes "[裴多乐]";
			mes "梦巴奇给这束花祝福了吗?";
			mes "希望有用吧...";
			mes "祝你好运啦!!";
			next;
			mes "[裴多乐]";
			mes "我希望你能有一次成功的谈话!";
			mes "我会尽我最大努力关注着船外面的那些鬼魂的.";
			close;
		} else if (malaya_diwata == 5) {
			mes "[裴多乐]";
			mes "我知道.";
			mes "也许渡口会重新启用...";
			mes "谢谢你为我们所做的一切.";
			next;
			mes "[裴多乐]";
			mes "那时我会做好准备, 随时启航.";
			mes "不算什么大礼, 只是为了感谢你.";
			mes "若能恢复运营, 要去依斯鲁德的话, 我只收你1000z.";
			set malaya_diwata, 6;
			erasequest 7399;
			setquest 7401;
//			if (IsPremiumPcCafe == 10)
				getitem 6497, 2; // Lesser_Agimat
//			else
//				getitem 6497, 1; // Lesser_Agimat
			getexp 200000,200000;
			if (!rand(3))
				$malayaNames$[0] = strcharinfo(0);
			close;
		} else {
			.@playtime = checkquest(7401, PLAYTIME);
			if (.@playtime == 0 || .@playtime == 1) {
				mes "[裴多乐]";
				mes "你如果要去艾尔贝塔, 就用那边的那艘大船好了.";
				mes "那艘小的到依斯鲁德.";
				mes "只用花1000z.";
				next;
				if (select("使用.:这简直是欺诈!") == 2) {
					mes "[裴多乐]";
					mes "什么?!";
					mes "你以为到艾尔贝塔的航线要花多少钱呢?";
					mes "你居然说这是欺诈... 你以为我在做慈善吗?";
					close;
				}
				if (Zeny < 1000) {
					mes "[裴多乐]";
					mes "价格是 1000 Zeny.";
					mes "不能再少了~";
					close;
				}
				mes "[裴多乐]";
				mes "谢谢~";
				mes "在鬼魂回来之前, 我们赶紧出发吧!";
				Zeny -= 1000;
				close2;
				warp "izlude",195,180;
				end;
			} else if (.@playtime == 2) {
				erasequest 7401;
				goto L_SetQuest;
			} else {
				if (checkquest(7403) == -1) {
					if (checkquest(7402) == -1) {
						goto L_SetQuest;
					}
					mes "[裴多乐]";
					mes "你知道该怎么做的.";
					mes "把各式的花收集起来交给梦巴奇, 让他来做成一个花束.";
					next;
					mes "[裴多乐]";
					mes "再把花束交给狄瓦泰小姐, 让她高兴一下.";
					mes "....谢谢.";
					close;
				}
				mes "[裴多乐]";
				mes "狄瓦泰是不一样的鬼魂!";
				mes "我在外面就能感觉出区别.";
				mes "这是我能做的了.";
				next;
				mes "[裴多乐]";
				mes "你知道吗? 为什么不更规律的来做事儿呢?";
				mes "我想你会喜欢那样做的.";
				setquest 7401;
				erasequest 7403;
//				if (IsPremiumPcCafe == 10)
					getitem 6497, 2; // Lesser_Agimat
//				else
//					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				if (!rand(3))
					$malayaNames$[0] = strcharinfo(0);
				close;
			}
		}
	}
	end;

L_SetQuest:
	mes "[裴多乐]";
	mes "嗯, 事情是这样的...";
	mes "我们现在还不能去..";
	mes "你知道的, 鬼魂们都回来了...";
	mes "我受够了那种感觉.";
	next;
	mes "[裴多乐]";
	mes "我的意思是...狄瓦泰小姐... 感觉不是很好, 作为一个普通人来说,";
	mes "即使拿着驱魔十字架也不一定能撑的住.";
	next;
	if (select("我知道, 我会小心的.:用花作为礼物呢?") == 1) {
		mes "[裴多乐]";
		mes "那就好了.";
		mes "唉...";
		close;
	}
	mes "[裴多乐]";
	mes "嗯. 不错.";
	mes "如果花朵能让她得到抚慰的话...!";
	mes "祝你好运.";
	setquest 7402;
	close;
}

ma_in01,125,107,3	script	狄瓦泰之魂	1761,4,4,{
	end;
OnTouch:
	if (malaya_diwata == 0) {
		cutin "malaya_diwata01", 2;
		mes "- 一个令人毛骨悚然的女孩站在那里.";
		mes "当我们目光相对时, 一股寒意瞬间遍布我全身. -";
		next;
		mes "[狄瓦泰]";
		mes "你也要来欺负狄瓦泰吗?";
		mes "我什么都没有!";
		next;
		cutin "", 255;
		mes "-我被小女孩恐怖的声音和眼神赶了出来.-";
		close;
		warp "malaya", 324, 66;
		end;
	} else if (malaya_diwata == 1) {
		cutin "malaya_diwata01", 2;
		mes "- 一个令人毛骨悚然的女孩站在那里.";
		mes "当我们目光相对时, 一股寒意瞬间遍布我全身. -";
		next;
		mes "[狄瓦泰]";
		mes "你也要来欺负狄瓦泰吗?";
		mes "我什么都没有!";
		next;
		select ("等一下! 我只想说几句话!");
		mes "[狄瓦泰]";
		mes "那么你身后的是谁?";
		mes "你和他们是一伙的!";
		next;
		cutin "malaya_ghost01", 4;
		mes "- 相似的鬼魂正在靠近狄瓦泰. -";
		next;
		if (select("- 这是个误会!:- 你是其中一员啊..!") == 2) {
			cutin "malaya_ghost02", 4;
			mes "[" + strcharinfo(0) + "]";
			mes "正如我想象! 你们害怕我吗?!";
			mes "滚开啊!";
			mes "我要和她谈话.";
			next;
			cutin "malaya_diwata01", 2;
			mes "[狄瓦泰]";
			mes "我不知道为什么他们后退...";
			mes "你也滚出我的视线!";
			next;
			cutin "", 255;
			mes "-我被小女孩愤怒的哭泣和目光赶了出来.-";
			set malaya_diwata, 2;
			setquest 7396;
			erasequest 7395;
			close2;
			warp "malaya", 324, 66;
			end;
		}
		cutin "malaya_diwata01",2;
		mes "[狄瓦泰]";
		mes "够了!";
		next;
		cutin "", 255;
		mes "-我被小女孩决绝的哭泣和目光赶了出来.-";
		set malaya_diwata, 2;
		setquest 7396;
		erasequest 7395;
		close2;
		warp "malaya", 324, 66;
		end;
	} else if ((malaya_diwata == 2) || (malaya_diwata == 3)) {
		cutin "malaya_diwata01", 2;
		mes "[狄瓦泰]";
		mes "你又爬回来了?";
		mes "出去!!!!!";
		next;
		cutin "", 255;
		mes "-我被小女孩凄厉的尖叫和目光赶了出来.-";
		close;
		warp "malaya", 324, 66;
		end;
	} else if (malaya_diwata == 4) {
		if (!countitem(6506)) {
			cutin "malaya_diwata01", 2;
			mes "- 狄瓦泰的灵魂怒视着我.";
			mes "没有给她花束...!!! -";
			next;
			cutin "", 255;
			mes "-我被她的怒视赶了出来.-";
			close;
			warp "malaya", 324, 66;
			end;
		}
		mes "- 狄瓦泰的灵魂怒视着我. -";
		mes "- 拿出花束... -";
		cutin "malaya_diwata01", 2;
		next;
		if (select("把花扔给她.:顺着门滑过去.") == 1) {
			mes "- 在她把我赶出去之前, 我把花扔了过去. 她接住了花, 非常惊讶...";
			mes "这次, 她没赶我走了, 现在, 她拿着花呆呆的...-";
		} else {
			mes "- 我把花束从门边滑了过去. 她看起来很困惑. -";
		}
		next;
		mes "[狄瓦泰]";
		mes "这是什么意思?";
		mes "你不是来欺负我的吗?";
		next;
		mes "[狄瓦泰]";
		mes "什么?你也是一个外地人?";
		mes "呵呵, 现在活着的人可以了, 而我不行吗?";
		next;
		mes "[狄瓦泰]";
		mes "有一个老套的说辞, 本地人比外地人高贵.";
		mes "我非常气愤. 我恨不得将他们从世上抹去.";
		next;
		mes "[狄瓦泰]";
		mes "什么? 我不该这么做?";
		mes "为什么不?";
		mes "我让这艘船停运了?";
		next;
		mes "[狄瓦泰]";
		mes "因为这些花的原因, 我想听你说几句话.";
		mes "但是你却对我说谎?!";
		next;
		mes "[狄瓦泰]";
		mes "你是说我把乡下人带到了船上,";
		mes "他们的争斗导致了船舶的停运?";
		next;
		mes "[狄瓦泰]";
		mes "... 呵呵... 哼. 这并不是我想做的事情.";
		mes "但是他们的确把我惹火了!";
		next;
		mes "[狄瓦泰]";
		mes "... 反正我无法摆脱.";
		mes "这意味着让我再次不爽. 明白了?";
		next;
		mes "[狄瓦泰]";
		mes "... 今天我会试着控制我自己的.";
		mes "这不是因为我喜欢这束花或我愿意合作!";
		mes "只是因为我也被那些可恶的鬼魂同样对待过!";
		next;
		mes "[狄瓦泰]";
		mes "如果你继续打扰我.";
		mes "那我把话说清楚. 我的脾气可不会再克制这么久了.";
		next;
		mes "[狄瓦泰]";
		mes "好了, 走... 走吧!";
		set malaya_diwata, 5;
		delitem 6506, 1; // Memorial_Boquet
		erasequest 7398;
		setquest 7399;
		close;
	} else if (malaya_diwata == 5) {
		cutin "malaya_diwata02", 2;
		mes "[狄瓦泰]";
		mes "我发誓我会成为一个乖女孩, 如果那些乡下人不再来打扰我的吧.";
		mes "如果他们还是来烦我的话, 我不会答应的.";
		close;
	} else {
		if (checkquest(7402) == -1) {
			if (checkquest(7403) == -1) {
				if ((checkquest(7401, PLAYTIME) == 0) || (checkquest(7401, PLAYTIME) == 1)) {
					cutin "malaya_diwata02", 2;
					mes "[狄瓦泰]";
					mes "很惊奇, 我能这么平静.";
					mes "当然了, 他们再来时我会很紧张,";
					mes "但是, 不论如何, 我仍将是最后的赢家.";
					next;
					mes "[狄瓦泰]";
					mes "那时, 全部船员只会再次哭泣.";
					mes "我只是不能在一次争斗后让自己平静下来.";
					next;
					mes "[狄瓦泰]";
					mes "你给我带来的这些鲜花, 让我感觉好多了.";
					mes "....";
					mes ".. 这并不代表我想念谁或喜欢这些花. 不要理解错了.";
					close;
				}
				cutin "malaya_diwata01", 2;
				mes "[狄瓦泰]";
				mes "丢了!";
				mes "什么? 噢, 是你啊.";
				mes "那些乡下人又再来了!";
				mes "我要杀死他们!";
				close;
			}
			cutin "malaya_diwata02", 2;
			mes "[狄瓦泰]";
			mes "在外面看到花朵是一件很不错的事情~";
			mes "是不是只要在世界上温暖的地方, 花儿都笑的这么美丽?";
			next;
			mes "[狄瓦泰]";
			mes "你给我带来的这些鲜花, 让我感觉好多了.";
			mes "....";
			mes ".. 这并不代表我想念谁或喜欢这些花. 不要理解错了.";
			close;
		}
		cutin "malaya_diwata01", 2;
		mes "[狄瓦泰]";
		mes "真是烦人! 你还想干什么?!";
		mes "什么?";
		mes "噢, 是你啊?";
		mes "我现在太沮丧了.";
		next;
		mes "- 狄瓦泰伸出她的双手, 好像在期待着什么. -";
		next;
		if (select("把花束递给她.:握住她的双手.") == 2) {
			mes "[狄瓦泰]";
			mes "你认为你在干什么?!!??!?!!";
			mes "啊... - 这儿有足够多的怪物了, 不少你一个!!";
			next;
			cutin "", 255;
			mes "-我被狄瓦泰雷鸣似的吼叫赶了出来.-";
			close;
			warp "malaya", 324, 66;
			end;
		}
		if (!countitem(6506)) {
			mes "[狄瓦泰]";
			mes "什么? 你想让我动摇?";
			mes "你没有带来?";
			mes "你什么都没有?!?";
			mes "任何人都不能信任, 谁都不行!";
			next;
			cutin "", 255;
			mes "-我被狄瓦泰雷鸣般的吼叫赶了出来.-";
			close;
			warp "malaya", 324, 66;
			end;
		}
		cutin "malaya_diwata02", 2;
		mes "[狄瓦泰]";
		mes "... 噢... 和我想的一样!";
		mes "我唯存的幸福感, 我唯存的心灵的安宁..!";
		mes "这些外面的花朵啊~!";
		next;
		mes "-狄瓦泰看起来好了一些. 气氛也变的祥和一些了.-";
		next;
		mes "[狄瓦泰]";
		mes "告诉裴多乐!";
		mes "狄瓦泰将会成为这片海的女神. 算是我的慷慨, 他可以启航了.";
		delitem 6506, 1; // Memorial_Boquet
		setquest 7403;
		erasequest 7402;
		close;
	}
	cutin "", 255;
	end;
}

ma_fild01,261,208,2	script	梦巴奇的其克	4_BARYO_CHIEF,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 不能继续进行任务. 你的负重太大了. -";
		close;
	}
	mes "[其克]";
	mes "欢迎来到巴勒攸, 外地人.";
	mes "我是一位灵魂引导者, 保护巴勒攸的村民和灵魂.";
	mes "啊哈, 我就是梦巴奇的领志者 其克.";
	next;
	switch (select("把铸铁锅交给他.:申请加入净化仪式.:用光泽杰勒比换钱.")) {
		case 1:
			if (checkquest(7376) == -1) {
				if (checkquest(7377) == -1) {
					mes "[其克]";
					mes "什么铁锅?";
					mes "据我所知, 你不是把它带来的那个人.";
					next;
					mes "[其克]";
					mes "可怜的人啊.";
					mes "不要活在谎言之中.";
					close;
				}
				mes "[其克]";
				mes "巴勒攸对铁匠来说不是一个好地方.";
				mes "所以我们一直向马来亚的锻造厂寻求帮助.";
				next;
				mes "[其克]";
				mes "食月暴龙不喜欢大的噪音.";
				mes "这就是为什么我们要制造铸铁锅.";
				next;
				mes "[其克]";
				mes "驱魔十字架? 噢, 也就是说你会给我铸铁锅咯?";
				mes "请小心的运送. 好吗?";
				close;
			}
			if (countitem(6504) < 5) {
				mes "[其克]";
				mes "噢, 一定是我预定的铁锅.";
				mes "但是, 在哪儿呢?";
				mes "你在嘲笑我吗?!";
				close;
			}
			mes "[其克]";
			mes "耶, 太棒了!";
			mes "太好了.";
			mes "我们用这个就可以更加激怒食月暴龙了.";
			next;
			mes "[其克]";
			mes "铸铁锅给我, 我来制作驱魔十字架.";
			mes "我听说你遇到鬼魂了, 有点儿麻烦?";
			mes "拿好这个. 会有用的.";
			delitem 6504, 5; // Cast_Iron_Caldron
			getitem 6503, 5; // Soul_Protection
			setquest 7377;
			erasequest 7376;
			close;
		case 2:
			if (checkquest(7406) == -1) {
				if (checkquest(7407) == -1) {
					mes "[其克]";
					mes "村子里唯一需要净化的就是妮妮的食物.";
					mes "像你这样的外地人, 是不能参与这里的祭典的.";
					close;
				}
				mes "[其克]";
				mes "妮妮一定饿了.";
				mes "把这个给它.";
				mes "快点儿.";
				close;
			}
			if ((countitem(523) < 10) || (countitem(6507) < 10)) {
				mes "[其克]";
				mes "警犬妮妮的食用骨头的净化仪式?";
				mes "我在这儿的工作是愈来愈有意思了啊.";
				next;
				mes "[其克]";
				mes "到森林里去, 并且拿给我 ^4d4dff10个邪恶兽骨^000000 和 ^4d4dff10瓶圣水^000000 , 才能举行净化仪式.";
				mes "我会自行举行仪式.";
				close;
			}
			mes "[其克]";
			mes "这片森林里动物的骨头都有邪恶的灵魂在里面.";
			mes "由于乱窜的恶灵的缘故, 这些骨头是不能直接使用的...";
			next;
			mes "[其克]";
			mes "你可以随意的去打死一些魔物...";
			mes "恶灵褪去, 骨头变的干净, 然后它就可以咬着吃了";
			next;
			mes "[其克]";
			mes "现在, 把这个拿给警备队员 东.";
			mes "吃了这些恶灵兽骨以后, 妮妮会变得更加强大.";
			next;
			mes "[其克]";
			mes "此外, 长时间拿着邪恶兽骨会对你身体有伤害,";
			mes "所以我先把它们全部净化了.";
			delitem 6507, countitem(6507); // Evil_Bone
			delitem 523, 10; //Holy_Water
			getitem 6505, 10; //Purified_Bone
			setquest 7407;
			erasequest 7406;
			close;
		case 3:
			mes "[其克]";
			mes "噢, 不是吧!";
			mes "你怎么敢这么做!";
			close;
	}
	end;
}

ma_fild01,239,253,3	script	警备队员 东	4_MAL_SOLDIER,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 不能继续进行任务. 你的负重太大了. -";
		close;
	}
	mes "[警备队员 东]";
	mes "你好啊!";
	mes "欢迎来到巴勒攸.";
	next;
	if (select("你的工作看起来很困难~:警卫犬 妮妮") == 1) {
		mes "[警备队员 东]";
		mes "还好啦. 我只是监视着从这儿进进出出的人们.";
		mes "旅行中的人们在这里进出更困难了.";
		close;
	}
	if (BaseLevel < 100) {
		mes "[警备队员 东]";
		mes "妮妮是一条好狗.";
		mes "他或许比你还要强壮.";
		next;
		mes "[警备队员 东]";
		mes "没错, 但是";
		mes "你看起来比原本妮妮骨头的持有者要弱啊.";
		next;
		mes "[警备队员 东]";
		mes "意思就是和我一样强壮!";
		mes "哈哈哈哈哈哈哈!";
		close;
	}
	.@playtime = checkquest(7408, PLAYTIME);
	if (.@playtime == 0 || .@playtime == 1) {
		mes "[警备队员 东]";
		mes "你带来的骨头对妮妮来说一次大餐啊.";
		mes "他会吃的很饱很愉快啊.";
		mes "在这里, 没有什么比妮妮的侦查工作做的更好的了.";
		next;
		mes "[警备队员 东]";
		mes "虽说有可能不是那么好听,";
		mes "但是有时候人们还不如狗狗啊.";
		close;
	} else if (.@playtime == 2) {
		erasequest 7408;
		mes "[警备队员 东]";
		mes "妮妮?";
		mes "你说的没错.";
		mes "既然你说起来了, 这时候他也差不多饿了.";
		next;
		mes "[警备队员 东]";
		mes "当然了, 他吃普通的骨头, 但是只靠这种骨头是不够的.";
		mes "你懂的, 是吗?";
		mes "-得意的笑-...";
		next;
		mes "[警备队员 东]";
		mes "我和妮妮一直在等待";
		mes "等待着有人能从森林里面带来一些恶灵兽骨.";
		close;
	} else {
		if (checkquest(7406) != -1) {
			mes "[警备队员 东]";
			mes "我的意思就是, 想成为一条合格的警犬, 他必须四处巡视来抵抗恶灵.";
			mes "所以他要吃一些恶灵兽骨, 但是一定要是净化过的.";
			next;
			mes "[警备队员 东]";
			mes "你可以从森林里的魔物身上得到恶灵兽骨.";
			mes "然后拿给梦巴奇的其克来进行净化.";
			close;
		} else {
			if (checkquest(7407) == 1) {
				if (countitem(6505) < 10) {
					mes "[警备队员 东]";
					mes "梦巴奇的其克会让你拿给他10个恶灵兽骨.";
					mes "一次至少需要10个. 当然一天不止这些了...";
					close;
				}
				mes "[警备队员 东]";
				mes "嘿嘿, 妮妮会非常喜欢这些骨头的!";
				mes "质量非常不错啊...";
				mes "经过净化的恶灵兽骨...";
				next;
				mes "[警备队员 东]";
				mes "这是最好的狗粮了!!";
				mes "现在他会很好的感知恶灵,";
				mes "而且因为吃了这些骨头, 他会彻底的消灭恶灵.";
				next;
				mes "[警备队员 东]";
				mes "我敢打赌, 现在妮妮是村子里最强的生物了.";
				mes "当然不包括我. 我说的是妮妮啊.";
				next;
				mes "[警备队员 东]";
				mes "这是给你的报酬.";
				mes "如果明天你还能来帮助我们, 就太好了.";
				delitem 6505, 10; // Purified_Bone
				setquest 7408;
				erasequest 7407;
//				if (IsPremiumPcCafe == 10)
					getitem 6497, 2; // Lesser_Agimat
//				else
//					getitem 6497, 1; // Lesser_Agimat
				getexp 200000,200000;
				if (!rand(0, 2))
					$malayaNames$[2] = strcharinfo(0);
				close;
			} else {
				mes "[警备队员 东]";
				mes "妮妮不只是一只警犬, 而且是一名优秀的斥候.";
				mes "但是如果要求他做到这些, 他就必须要吃恶灵骨头.";
				next;
				mes "[警备队员 东]";
				mes "你知道的, 我不能离开这里,";
				mes "我想你能不能帮妮妮搞到一些这样的骨头呢...";
				next;
				if (select("好吧.:不好意思.") == 2) {
					mes "[警备队员 东]";
					mes "我知道了.";
					mes "妮妮!";
					mes "今天没吃的了..!!";
					next;
					mes "- 看起来妮妮的眼睛里含着泪光. -";
					close;
				}
				mes "[警备队员 东]";
				mes "骨头可以从这儿附近的魔物身上得到.";
				mes "把那些骨头拿给梦巴奇的其克, 他会净化那些骨头, 然后妮妮就可以食用了.";
				next;
				mes "[警备队员 东]";
				mes "给我们带来10个邪恶兽骨吧.";
				mes "还有一点, 你需要10个圣水才能完成净化工作.";
				next;
				mes "[警备队员 东]";
				mes "抓紧时间吧.";
				mes "看这里. 妮妮也在等你啊.";
				setquest 7406;
				close;
			}
		}
	}
	end;
}

ma_fild01,238,257,2	script	警犬妮妮	4_RUS_DWOLF,{
	mes "[妮妮]";
	mes "呜......";
	mes " ";
	mes "(他在恐吓你.)";
	close;
}

ma_fild01,200,190,3	script	莫利斯#malaya	4_F_BARYO_WOMAN,{
	if (MaxWeight - Weight < 1000 || checkweight(1201,1) == 0) {
		mes "- 不能继续进行任务. 你的负重太大了. -";
		close;
	}
	if (BaseLevel < 100) {
		mes "[莫利斯]";
		mes "嗯... 嘿...";
		mes "噢, 对不起. 你看起来还不够强壮.";
		mes "对不起. 我只是不能安宁...";
		close;
	}
	if (malaya_hi < 20) {
		mes "一位看上去很忧虑的女人站在这里.";
		close;
	}
	.@playtime = checkquest(7390, PLAYTIME);
	if (.@playtime == 0 || .@playtime == 1) {
		mes "[莫利斯]";
		mes "孩子们只有穿着倒挂衬衫才能找到回家的路";
		mes "但她却在森林里尽情的玩耍, 再也没有回来.";
		next;
		mes "[莫利斯]";
		mes "目前来看, 这孩子肯定又迷路了.";
		mes "如果真是这样, 我会寻求你的帮助的.";
		close;
	} else if (.@playtime == 2) {
		mes "[莫利斯]";
		mes "我丢了一个孩子... 又丢了.";
		mes "我的天啊...";
		erasequest 7390;
		close;
	} else {
		if (checkquest(7389) != -1) {
			mes "[莫利斯]";
			mes "你回来了.";
			mes "太谢谢你了, 我的孩子都安全的回家了.";
			next;
			mes "[莫利斯]";
			mes "尽管衬衫是倒挂的, 但是却能很神奇的把孩子带回他们本来的地方.";
			mes "谢谢你把珍贵的衬衫给我的孩子们.";
			setquest 7390;
			erasequest 7389;
//			if (IsPremiumPcCafe == 10)
				getitem 6497, 2; // Lesser_Agimat
//			else
//				getitem 6497, 1; // Lesser_Agimat
			getexp 200000,200000;
			if (!rand(3))
				$malayaNames$[2] = strcharinfo(0);
			close;
		} else {
			if (checkquest(7388) != -1) {
				mes "[莫利斯]";
				mes "因为太淘气了, 我想她肯定在森林里迷路了.";
				mes "如果你遇到她了, 请把 ^4d4dff倒挂衬衫^000000 交给她.";
				next;
				mes "[莫利斯]";
				mes "倒挂衬衫...";
				mes "你可以从恶魔身上得到的, 因为这些恶魔穿着衬衫跑掉了.";
				close;
			} else {
				mes "[莫利斯]";
				mes "你好... 我在寻找我的孩子...";
				mes "我的女儿一直没有回来.";
				mes "请帮帮我, 我想她在森林里迷路了.";
				next;
				switch (select("好的.:我现在太忙了.:你有这么多的孩子啊.")) {
				case 1:
					mes "[莫利斯]";
					mes "因为她太淘气的缘故, 我敢肯定她在森林里迷路了.";
					next;
					mes "[莫利斯]";
					mes "如果她被诅咒了, 她将很难从森林里出来.";
					mes "她会在森林里四处漂泊, 即使是你, 也会一样的.";
					next;
					mes "[莫利斯]";
					mes "需要一件 ^4d4dff倒挂衬衫^000000 送给我的女儿.";
					mes "尽管衬衫是倒挂的, 但它会把孩子们带到他们原本该在的地方.";
					next;
					mes "[莫利斯]";
					mes "倒挂衬衫...";
					mes "你可以从恶魔身上得到的, 因为这些恶魔穿着衬衫跑掉了.";
					setquest 7388;
					close;
				case 2:
					mes "[莫利斯]";
					mes "... 好吧... 我知道了.";
					mes "我不得不去找其他的人了.";
					mes "好吧.";
					mes "唉...";
					close;
				case 3:
					mes "[莫利斯]";
					mes "...我生了个三胞胎.";
					mes "甚至我都会感到困惑. *咯咯的笑*";
					next;
					mes "[莫利斯]";
					mes "他们中的一个好像是中了诅咒, 因为她常常在森林里迷路.";
					mes "唉...";
					close;
				}
			}
		}
	}
	end;
}

ma_fild01,203,189,3	script	小女孩#malaya	4_F_BARYO_GIRL,{
	mes "[小女孩]";
	mes "嘿嘿, 森林里好怕怕噢, 但是里面又很好玩, 所以我常去那儿玩呢~";
	mes "很奇怪, 我们为什么会常常迷路.";
	next;
	mes "[小女孩]";
	mes "不过还好啦, 我也是其中一个~";
	mes "我们是三胞胎~ 咯咯地笑着~";
	close;
}

ma_fild01,251,93,3	script	迷路的小孩#malaya01	4_F_BARYO_GIRL,{
	if (checkquest(7388) > -1) {
		if (!countitem(12700)) {
			mes "[迷路的小孩]";
			mes "唉, 你也迷路了吗?";
			mes "他们太淘气了.";
			next;
			mes "[迷路的小孩]";
			mes "我只需要一件倒挂衬衫.";
			mes "*咯咯的笑*...";
			close;
		}
		mes "[迷路的小孩]";
		mes "噢, 真是讨厌.";
		mes "他们肯定又在耍我, 让我迷路!";
		next;
		select ("你想回家吗?");
		mes "[迷路的小孩]";
		mes "如果我不很快回家的话, 我妈妈会很着急的.";
		mes "唉... 真希望能有一件倒挂衬衫我就能回去了.";
		next;
		select ("给你吧.");
		mes "[迷路的小孩]";
		mes "真的吗?";
		mes "就是这件衬衫!";
		mes "它会把我领回家的!";
		next;
		mes "[迷路的小孩]";
		mes "是妈妈让你来的吗?";
		mes "她一定很担心了..!";
		mes "我现在就回家!";
		mes "谢谢你!";
		delitem 12700, 1; // Insideout_Shirt
		setquest 7389;
		erasequest 7388;
		close2;
		disablenpc strnpcinfo(0);
		if (strnpcinfo(0) == "迷路的小孩#malaya01") {
			enablenpc "迷路的小孩#malaya02";
		} else if (strnpcinfo(0) == "迷路的小孩#malaya01") {
			enablenpc "迷路的小孩#malaya03";
		} else {
			enablenpc "迷路的小孩#malaya01";
		}
		end;
	} else {
		if (checkquest(7389) != -1) {
			mes "[迷路的小孩]";
			mes "我想再玩一会儿.";
			mes "只要有这件衬衫, 我就能自己回家了.";
			mes "妈妈不会担心的.";
			close;
		} else {
			mes "[迷路的小孩]";
			mes "嗯. 我又迷路了吗?";
			mes "我在哪儿啊...";
			mes "我必须沿着从第三棵树洒下的阳光找到回家的路... 是吗?";
			next;
			mes "[迷路的小孩]";
			mes "为什么~ 我怎么一直在原地转圈?";
			mes "你知道为什么吗?";
			mes "路在哪儿?";
			mes "有人在耍我吗?";
			close;
		}
	}
	end;
	
OnInit:
	if (strnpcinfo(0) != "迷路的小孩#malaya01")
		disablenpc strnpcinfo(0);
}
ma_fild01,114,141,3	duplicate(迷路的小孩#malaya01)	迷路的小孩#malaya02	4_F_BARYO_GIRL
ma_fild01,130,314,3	duplicate(迷路的小孩#malaya01)	迷路的小孩#malaya03	4_F_BARYO_GIRL

ma_fild02,241,39,5	script	善良的卡普雷 布帝兑	4_MAL_BUDIDAI,{
	mes "[布帝兑]";
	mes "哟 哟 哟~";
	mes "我是一个好人~ !";
	mes "我要喝杯咖啡~!";
	mes "我比昨天更好~!";
	mes "我有梦想去追~哟!";
	next;
	mes "[布帝兑]";
	mes "嘿, 你好, 你来这里听布帝兑唱歌的吗?";
	next;
	switch (select("你喜欢唱歌吗?:关于独眼怪的深入研究.:再见!")) {
	case 1:
		mes "[布帝兑]";
		mes "必须的, 布帝兑就是爱唱歌.";
		mes "母牛, 公马, 山羊, 公鸡, 野猪都喜欢听我唱歌.";
		mes "他们是我的朋友.";
		next;
		mes "[布帝兑]";
		mes "除了那些独眼怪.";
		mes "它总是找渣儿.";
		mes "布帝兑很生气, 但布帝兑还不够强大.";
		next;
		mes "[布帝兑]";
		mes "我害怕它的注视, 但我更害怕它把我的俱乐部搞的没人了.";
		mes "我想给我的朋友们唱歌, 但就是因为独眼怪, 我的朋友都不来了.";
		next;
		mes "[布帝兑]";
		mes "所以布帝兑只能在这儿唱歌.";
		mes "很多旅行者路过这里.";
		mes "布帝兑是旅行者的朋友.";
		mes "你也是我的朋友.";
		close;
	case 2:
		if (BaseLevel < 100) {
			mes "[布帝兑]";
			mes "你对那片区域很感兴趣?";
			mes "它是森林的霸主!";
			mes "它总给我的动物朋友们找渣儿!";
			next;
			mes "[布帝兑]";
			mes "太悲伤了, 唱歌就是布帝兑生命的全部.";
			mes "然而对于独眼怪恐怖的注视和我快要倒闭的俱乐部, 我束手无策.";
			next;
			mes "[布帝兑]";
			mes "独眼怪! 我因为和它们在同一片森林而感到颤抖...";
			mes "但是布帝兑还很弱小.";
			next;
			mes "[布帝兑]";
			mes "只有你和我, 流浪的人.";
			mes "我们不可能成功的.";
			close;
		}
		.@playtime = checkquest(7410, PLAYTIME);
		if (.@playtime == 0 || .@playtime == 1) {
			mes "[布帝兑]";
			mes "旅行者, 我的朋友!";
			mes "独眼怪跑的毫无踪影了.";
			mes "母牛, 公马, 山羊, 公鸡, 野猪都会回来找我, 是吗?";
			next;
			mes "[布帝兑]";
			mes "但是布帝兑还是很担心.";
			mes "如果独眼怪又回来了怎么办.";
			mes "你还会再帮助我吗?";
			next;
			mes "[布帝兑]";
			mes "你是布帝兑的朋友";
			mes "你不会拒绝善良的布帝兑的, 是吗?";
			close;
		} else {
			if (checkquest(7409) != -1) {
				if (checkquest(7409, HUNTING) == 2) {
					mes "[布帝兑]";
					mes "你真是让我吃惊啊, 旅行家!";
					mes "一路上我都可以听到独眼怪的哀嚎!";
					mes "布帝兑又可以给他的朋友们唱歌了, 是吗?";
					next;
					mes "[布帝兑]";
					mes "那么, 我可以为杀死独眼怪的凶手做些什么呢?";
					mes "啊哈! 这是一个护身符.";
					mes "它会对你有帮助的.";
					next;
					mes "[布帝兑]";
					mes "善良的布帝兑是旅行者的朋友.";
					mes "我希望能再次见到你.";
					mes "这是给朋友们的祝福. 哟 哟 哟~";
					setquest 7410;
					erasequest 7409;
//					if (IsPremiumPcCafe == 10)
						getitem 6497, 2; // Lesser_Agimat
//					else
//						getitem 6497, 1; // Lesser_Agimat
					getexp 200000,200000;
					if (!rand(3))
						$malayaNames$[1] = strcharinfo(0);
					close;
				} else {
					mes "[布帝兑]";
					mes "请杀死那些搞破坏的独眼怪吧.";
					mes "为了我, 愿意为朋友们唱歌的布帝兑.";
					close;
				}
			} else {
				if (.@playtime == 2) {
					mes "[布帝兑]";
					mes "嘿, 亲爱的旅行家.";
					mes "独眼怪又回来了!";
					mes "我该怎么办?我能怎么办";
					next;
					mes "[布帝兑]";
					mes "当我唱歌的时候他就变得很生气的样子.";
					mes "但是母牛, 公马, 山羊, 公鸡, 野猪都喜欢我的歌啊.";
					mes "这让布帝兑很为难.";
					erasequest 7410;
					close;
				} else {
					mes "[布帝兑]";
          mes "你对那片区域很感兴趣?";
          mes "它是森林的霸主!";
          mes "它总给我的动物朋友们找渣儿!";
					next;
					mes "[布帝兑]";
          mes "太悲伤了, 唱歌就是布帝兑生命的全部.";
          mes "然而对于独眼怪恐怖的注视和我快要倒闭的俱乐部, 我束手无策.";
					next;
					mes "[布帝兑]";
					mes "独眼怪! 我因为和它们在同一片森林而感到颤抖...";
					mes "但是布帝兑好弱小.";
					next;
					if (select("我要格外小心吗?:的确让人胆寒.") == 2) {
						mes "[布帝兑]";
						mes "不要再说了.";
						mes "我的朋友们不能来听我唱歌就是因为这么个事儿.";
						mes "太让人沮丧了.";
						close;
					}
					mes "[布帝兑]";
					mes "你要去给独眼怪上一课吗?!";
					mes "好样的!!";
					mes "捅它们菊花!!";
					setquest 7409;
					close;
				}
			}
		}
		break;
	case 3:
		mes "[布帝兑]";
		mes "旅行者要路过这里~";
		mes "布帝兑会歌唱奇迹~";
		mes "你是好人给了我希冀~";
		mes "不论是谁来这里嬉戏~";
		mes "回忆都会很甜蜜~";
		next;
		mes "[布帝兑]";
		mes "哟 哟 哟~";
		mes "布帝兑不是很废 啊哈~";
		mes "独眼怪全都得跪 啊哈~";
		mes "哟 哟 哟~";
		close;
	}
	end;
}

// Traders :: malaya_npc
//============================================================
ma_fild01,166,214,6	script	对传说灵光的老人#GA	4_F_BARYO_OLD,{
	if (MaxWeight - Weight < 600 || checkweight(1201,1) == 0) {
		mes "不能继续进行任务. 你的负重太大了.";
		close;
	}
	mes "[预言者]";
	mes "噢! 恶魔从这个世上获得了愈来愈多的力量.";
	next;
	switch(select("我们需要收集一些物品来打败它们.:无视了.")) {
	case 1:
		if (countitem(6497) >= 3 && Zeny >= 1000) {
			mes "[预言者]";
			mes "你看起来不够强大啊.";
			next;
			mes "[预言者]";
			mes "你愿意花1000z的费用, 把三个小护身符做成一个御守平安符吗?";
			next;
			if(select("好的.:不了, 就这样吧.") == 1) {
				if (countitem(6497) >= 3 && Zeny >= 1000) {
					specialeffect2 EF_CONE;
					specialeffect EF_FORESTLIGHT2;
					set Zeny, Zeny-1000;
					getitem 12775,1; //Ancient_Spirit_Agimat
				} else {
					mes "[预言者]";
					mes "材料不够啊, 骚年.";
					close;
				}
			}
			mes "[预言者]";
			mes "希望你能赢得和恶魔的战斗.";
			close;
		}
		mes "[预言者]";
		mes "现在不能马上制作出来, 不过有一个通过几代人传承下来的古老的办法.";
		next;
		mes "[预言者]";
		mes "你要做出御守平安符, 首先得收集一些重要的材料.";
		next;
		select("都有些什么材料呢?");
		mes "[预言者]";
		mes "3个小护身符放在这里收集古代英灵的力量, 另外还需要一个几代人传承下来的特殊材料.";
		next;
		mes "[预言者]";
		mes "但是现在再没有人能获得这个特殊的材料了.";
		next;
		select("可以用钱买来吗?");
		mes "[预言者]";
		mes "不, 不... 是一个圆环一样的小东西, 明白了吗?";
		next;
		select("你是在说zeny吗?");
		mes "[预言者]";
		mes "看起来很像几代人传承下来的特殊材料.";
		next;
		mes "[预言者]";
		mes "只要我们有足够的材料, 就可以制造出御守平安符和恶魔一战了.";
		next;
		select("听起来不错.");
		mes "[预言者]";
		mes "假如你厌倦了和恶魔的战斗...";
		next;
		mes "[预言者]";
		mes "拿着三个小护身符过来, 并且还有那种叫做 Zeny 的东西, 1000 就好了 .";
		next;
		mes "[预言者]";
		mes "我会制作出一个御守平安符, 它可以让你在和恶魔的战斗中, 20分钟内增加10%的物理攻击力.";
		close;
	case 2:
		mes "[预言者]";
		mes "希望你能赢得和恶魔的战斗.";
		close;
	}
}

ma_fild01,238,198,4	script	邪魔马 专家#malaya	4_M_MALAYA,{
	if (MaxWeight - Weight < 50 || checkweight(1201,1) == 0) {
		mes "不能继续进行任务. 你的负重太大了..";
		close;
	}
	mes "[邪魔马 专家]";
	mes "我花了一生中九成的时间来研究邪魔马.";
	next;
	switch(select("但是你看起来很年青啊?:邪魔马是什么?:教我怎么抓住一只邪魔马.")) {
	case 1:
		mes "[邪魔马 专家]";
		mes "什么, 你真的这样认为?.";
		next;
		mes "[邪魔马 专家]";
		mes "我之所以看起来很年青, 是因为我有一张娃娃脸啊, 哈哈哈~";
		next;
		select("... ... ...");
		mes "[邪魔马 专家]";
		mes "相信我!! 俗话说信仰可以给你带来幸运.";
		close;
	case 2:
		mes "[邪魔马 专家]";
		mes "哈哈, 你算是问对了.";
		mes "我可是这个领域的专家, 随意发问吧.";
		next;
		select("你为什么不直接回答我呢?");
		mes "[邪魔马 专家]";
		mes "你曾经... 被周围的人玩弄过吗? 你怎么不相信别人说的话呢? 来吧, 问吧.";
		next;
		while(1) {
			switch(select("我没什么想问的.:特征?:特点?:传说?:习惯?")) {
			case 1:
				mes "[邪魔马 专家]";
				mes "我已经解释的足够多了. 你不会明白一些由专业术语构成的复杂议题的.";
				next;
				mes "[邪魔马 专家]";
				mes "噢! 还有些其它问题吗?";
				next;
				mes "[邪魔马 专家]";
				mes "你认为呢? 对我所掌握的知识之多, 印象很深刻吧? 有问题随时再来.";
				close;
			case 2:
				mes "[邪魔马 专家]";
				mes "邪魔马有一种办法来迷惑旅行者,  当遇见邪魔马时, 不论你走多远走到哪儿了, 它们都有办法让你在原地打转.";
				next;
				mes "[邪魔马 专家]";
				mes "他们是一种喜欢恶作剧的生物.";
				next;
				mes "[邪魔马 专家]";
				mes "肯定有办法让他们停下来. 你知道倒挂衬衫吗? ";
				next;
				mes "[邪魔马 专家]";
				mes "悄悄走你的路, 不要惊扰了邪魔马.";
				next;
				mes "[邪魔马 专家]";
				mes "哈哈哈哈~ 但是所有人都知道冒险家在旅行时是不会很安静的, 不是吗?";
				next;
				mes "[邪魔马 专家]";
				mes "永远不会的...";
				break;
			case 3:
				mes "[邪魔马 专家]";
				mes "他们说邪魔马有很多不一样的地方.";
				next;
				mes "[邪魔马 专家]";
				mes "首先, 它们都很高 ^AAAAAA(啧啧... 我要是也很高多好)^000000 而且很C, 有着不协调的手脚. 它们看起来就像人类一样, 但是当它们坐下时膝盖比脑袋还高.";
				next;
				mes "[邪魔马 专家]";
				mes "第二点, 是被社团公认的一个标准特征. 它们的头和脚跟马的一样.";
				next;
				mes "[邪魔马 专家]";
				mes "因为这些外观特征, 邪魔马有时被叫做恶魔的产物.";
				break;
			case 4:
				mes "[邪魔马 专家]";
				mes "关于邪魔马有几个有趣的传言.";
				next;
				mes "[邪魔马 专家]";
				mes "其中的一则故事是说, 邪魔马本来是一个崇拜自然的王国的守卫.";
				next;
				mes "[邪魔马 专家]";
				mes "所以邪魔马会对那些来意不明的旅行者施以魔法, 让他们迷路.";
				next;
				mes "[邪魔马 专家]";
				mes "另外一则故事是说, 这里的人们有一个说法: '如果睛天下雨了, 肯定是有邪魔马出嫁了'.";
				next;
				mes "[邪魔马 专家]";
				mes "社团就推测, 类似 '巫婆结婚就下雨' 或者 '月霞花结婚就下雨' 这样的说法, 其实是来源于邪魔马的传说.";
				next;
				mes "[邪魔马 专家]";
				mes "最后, 古老的传说中说道, 邪魔马可以变成人形甚至可以变得透明, 但还没有人能证实这些.";
				break;
			case 5:
				mes "[邪魔马 专家]";
				mes "邪魔马一般生活在黑暗里, 那些喧闹的地方一般不会去.";
				next;
				mes "[邪魔马 专家]";
				mes "嗯... 举个例子, 据了解它们生活在桥下, 香蕉林或竹林,  或者大树下面.";
				next;
				mes "[邪魔马 专家]";
				mes "这只是我的观点, 但是你难道不认为, 它们之所以生存在黑暗的地方是因为那些地方更容易迷惑人们吗?";
				break;
			}
			next;
		}
	case 3:
		mes "[邪魔马 专家]";
		mes "哈哈哈. 现在知道我的伟大了吧?";
		next;
		if (countitem(6496) >= 3 && countitem(6497) >= 5) {
			mes "[邪魔马 专家]";
			mes "噢! 这不是从魔物身上取得的做邪魔马的缰绳的材料吗?";
			next;
			mes "[邪魔马 专家]";
			mes "'^F80835邪魔马的缰绳^000000' 是用来更简单的捕获邪魔马的. 但是那也不意味着百分之百的成功. 有兴趣吗? 你想让我为你做一个吗?";
			next;
			switch(select("是的, 我很感兴趣.:不了, 我可以独立完成.")) {
			case 1:
				delitem 6496,3; //Tikbalang_Thick_Spine
				getitem 12699,1; //Tikbalang_Belt
				mes "[邪魔马 专家]";
				mes "好, 好的!";
				next;
				specialeffect EF_SONICBLOW2;
				select("嗯?");
				mes "[邪魔马 专家]";
				mes "'^F80835邪魔马的缰绳^000000' 做好了.";
				close;
			case 2:
				mes "[邪魔马 专家]";
				mes "就你? 哈... 你认为你行就去试试吧.";
				close;
			}
		}
		mes "[邪魔马 专家]";
		mes "两种办法可以抓到邪魔马, 一种简单一种复杂. 你听哪种?";
		next;
		switch(select("简单的.:复杂的.")) {
		case 1:
			mes "[邪魔马 专家]";
			mes "哈哈. 我也一直用的是简单的办法来捕获它们.";
			next;
			mes "[邪魔马 专家]";
			mes "给我带来 3个邪魔马的脊椎和5个小护身符, 就可以制成一个 '^F80835邪魔马的缰绳^000000' , 它能帮助你捕获邪魔马的.";
			next;
			mes "[邪魔马 专家]";
			mes "哈哈哈哈!";
			mes "我再说一次.";
			mes "3个邪魔马的脊椎和5个小护身符. 明白了?";
			close;
		case 2:
			mes "[邪魔马 专家]";
			mes "这个办法对我来说很简单, 但是对你来说...";
			next;
			mes "[邪魔马 专家]";
			mes "邪魔马有一个锋利的, 尖尖的鬃毛在脖子上面.";
			next;
			mes "[邪魔马 专家]";
			mes "当然了! 它们有很多但是你必须弄到最厚的三个.";
			next;
			mes "[邪魔马 专家]";
			mes "这三处就是它的弱点. 把这三处鬃毛拔出来就可以驯服它们.";
			next;
			mes "[邪魔马 专家]";
			mes "我来解释给你听如何拔鬃毛.";
			next;
			mes "[邪魔马 专家]";
			mes "你必须像苍蝇一样飞起来, 像蜜蜂一样落在邪魔马的后背上面.";
			next;
			mes "[邪魔马 专家]";
			mes "那是肯定的! 邪魔马会拼命的想把你从背上摔下来的.";
			next;
			mes "[邪魔马 专家]";
			mes "你必须要紧紧抓牢了, 直到它没有力气再挣扎.";
			next;
			mes "[邪魔马 专家]";
			mes "这以后, 因为它们实在是太强壮了, 所以还需要4天3夜它们才能彻底疲劳. 但是我们不要在意这些细节了吧.";
			next;
			mes "[邪魔马 专家]";
			mes "那就是说!! 邪魔马已经被驯服了.";
			close;
		}
	}
}

// Upgrade Boss Equipment :: malaya_mvpitem
//============================================================
ma_fild01,158,243,6	script	铁匠 巴亚尼#malaya	4_M_MALAYA,{
	mes "[巴亚尼]";
	mes "如果你能带来一件有强大力量的材料, 我就可以为你升级防具.";
	next;
	switch (select("可以升级哪些防具?:材料是什么?:升级以后有什么变化?:请为我升级.")) {
	case 1:
		mes "[巴亚尼]";
		mes "你的问题很简单!";
		next;
		mes "[巴亚尼]";
		mes "但同时也很重要.";
		next;
		mes "[巴亚尼]";
		mes "^7B4772Bakonawa Scale Armor^000000 made from the scales of the Bakonawa monster known to swallow the moon.";
		next;
		mes "[巴亚尼]";
		mes "Light but sturdy ^7B4772Kalasag^000000 made from rattan that grows wild around Port Malaya.";
		next;
		mes "[巴亚尼]";
		mes "^7B4772Buwaya Sack Cloth^000000 made from the sack of the man-eating alligator Buwaya.";
		next;
		mes "[巴亚尼]";
		mes "^7B4772恶梦死神 Boots of Nightmare^000000 imbued with the hatred and vengeance of the monster 恶梦死神.";
		next;
		mes "[巴亚尼]";
		mes "As just mentioned.";
		next;
		mes "[巴亚尼]";
		mes "I will make powerful armor out of ONLY the strongest armor dropped from fearful monsters.";
		close;
	case 2:
		mes "[巴亚尼]";
		mes "Learned well.";
		mes "Seems you learned that there is no such thing as free in life.";
		next;
		mes "[巴亚尼]";
		mes "First thing to remember is that the object to upgrade must be strong itself. At least strong enough to endure ^FF0000+9 Refinement^000000.";
		next;
		mes "[巴亚尼]";
		mes "Next is true strength that only comes out of power obtained naturally. I need ^FF000020 古代符文s^000000 for protection from evil while Im refining.";
		next;
		mes "[巴亚尼]";
		mes "When a ^FF0000+9 Refined Strong armor^000000 is combined with ^FF000020 古代符文s^000000 for protection!!";
		next;
		mes "[巴亚尼]";
		mes "You get a completely new and improved armor from old scraps.";
		next;
		mes "[巴亚尼]";
		mes "Always look forward to this.";
		close;
	case 3:
		mes "[巴亚尼]";
		mes "Listen, because this is a very important question.";
		next;
		mes "[巴亚尼]";
		mes "It won't matter if I say it more than a 100 times that upgraded armor is powerful.";
		next;
		mes "[巴亚尼]";
		mes "Unless the one that holds it doesn't believe it is! Ask about what has changed and decide for yourself!";
		next;
		while (1) {
			switch (select("There is no more.:Bakonawa Scale Armor:Kalasag:Buwaya Sack Cloth:恶梦死神 Boots of Nightmare")) {
			case 1:
				mes "[巴亚尼]";
				mes "Looks like you ran out of questions.";
				mes "Don't forget. You'll have to give up something to gain something.";
				close;
			case 2:
				mes "[巴亚尼]";
				mes "The Bakonawa Scale Armor adds +1 to all stats for all jobs which is overall great armor for everyone.";
				next;
				mes "[巴亚尼]";
				mes "But I'm sure the inner you thinks this isn't enough.";
				next;
				mes "[巴亚尼]";
				mes "That is why +2 can be added to all stats and an extra slot for a card to your socket if upgraded.";
				next;
				break;
			case 3:
				mes "[巴亚尼]";
				mes "Kalasag is a good shield to reduce damage from boss monsters by 1% per 3 refinements.";
				next;
				mes "[巴亚尼]";
				mes "But not enough. Can't believe that a shield doesnt have a place to equip a card.";
				next;
				mes "[巴亚尼]";
				mes "That is why I can add an extra slot for a card to your socket if upgraded.";
				next;
				break;
			case 4:
				mes "[巴亚尼]";
				mes "The Buwaya Sack Cloth offers healing capacity and healing item effect increase by 1% per 3 refinements. Not to mention it reduces 10% damage from Water, Earth, Fire, and Wind elemental monsters.";
				next;
				mes "[巴亚尼]";
				mes "But not enough. Can't believe that these clothes don't come with a place to equip a card. Everyone knows that clothes should have Raydric on them!";
				next;
				mes "[巴亚尼]";
				mes "Don't worry! I can add an extra slot for a card to your socket if upgraded.";
				next;
				break;
			case 5:
				mes "[巴亚尼]";
				mes "The 恶梦死神 Boots of Nightmare increases +1 MDEF per 1 refinement and speed increases starting at 14 refinement and above.";
				next;
				mes "[巴亚尼]";
				mes "The speed increase effect from shoes like Moonlight Flower Shoes and Sleipnir items are out of reach for ordinary people.";
				next;
				mes "[巴亚尼]";
				mes "But of course, +14 refinement isn't easy but there is an easy way to get it.";
				next;
				mes "[巴亚尼]";
				mes "By upgrading your shoes, you can get speed increase starting from +12 refinement!";
				next;
				mes "[巴亚尼]";
				mes "And it doesn't end there!!";
				mes "I will also put in an extra slot in your socket to add a card.";
				next;
				break;
			}
			mes "[巴亚尼]";
			mes "However, you'll have to give up something to gain something.";
			next;
			mes "[巴亚尼]";
			mes "^0000FFEquipping the Kalasag, Buwaya Sack Cloth, Bakonawa Scale Armor, and 恶梦死神 Boots of Nightmare all at once will lose the ^FF0000Set Effects^0000FF.^000000";
			next;
			mes "[巴亚尼]";
			mes "Think it through. Next question?";
			next;
		}
	}
	mes "[巴亚尼]";
	mes "Ha ha ha ha ha ha ha! Good!";
	mes "You've brought the materials, right?";
	next;
	if (select("Oh... sorry...:Preparations are complete!!") == 1) {
		mes "[巴亚尼]";
		mes "Oh no!!";
		mes "I will need an light but sturdy armor with an refinement of +9 or greater and 20 古代符文s!!";
		close;
	}
	if (countitem(6499) < 20) {
		mes "[巴亚尼]";
		mes "You said all preparations are done and you give me this?! I need at least 20 古代符文s to refine your item.";
		close;
	}
	mes "[巴亚尼]";
	mes "So what armor will it be?";
	next;
	switch (select("Bakonawa Scale Armor:Kalasag:Buwaya Sack Cloth:恶梦死神 Boots of Nightmare")) {
	case 1:
		.@part    = EQI_ARMOR;
		.@item    = 15051;
		.@newItem = 15052;
		break;
	case 2:
		.@part    = EQI_HAND_L;
		.@item    = 2169;
		.@newItem = 2170;
		break;
	case 3:
		.@part    = EQI_GARMENT;
		.@item    = 2590;
		.@newItem = 2591;
		break;
	case 4:
		.@part    = EQI_SHOES;
		.@item    = 2491;
		.@newItem = 2492;
		break;
	}
	
	if (!getequipisequiped(.@part)) {
		mes "[巴亚尼]";
		mes "You should wear the equipment to upgrade and not come without it on you.";
		close;
	} else if (getequipid(.@part) != .@item) {
		mes "[巴亚尼]";
		mes "What is this! You said you wanted to upgrade " + getitemname(.@item) + " but why are you giving me this? You should be wearing " + getitemname(.@item) + ".";
		close;
	} else if (getequiprefinerycnt(.@part) < 9) {
		mes "[巴亚尼]";
		mes "No, the sturdiness of this item has not been tested yet. It'll have to be at least +9 refined for me to say, 'Oh this is pretty sturdy armor.";
		close;
	}

	mes "[巴亚尼]";
	mes "Looks like you did your homework! Don't see a flaw! Then I have one question to ask before I start refinement.";
	next;
	mes "[巴亚尼]";
	mes "^0000FFOnce your item is refined, the refinement level will be ^FF00000^0000FF and the item will be upgraded.^000000 You get this part?";
	next;
	if (select("No.:Yes.") == 1) {
		mes "[巴亚尼]";
		mes "What? You didn't know this? Then, read through my instructions and come back again.";
		close;
	}
	mes "[巴亚尼]";
	mes "Good. Next question. Once refinement is done,";
	mes "^0000FFEquipping the Kalasag, Buwaya Sack Cloth, Bakonawa Scale Armor, and 恶梦死神 Boots of Nightmare all at once will lose the ^FF0000Set Effects^0000FF.^000000";
	mes "Do you understand this point?";
	next;
	if (select("No.:Yes.") == 1) {
		mes "[巴亚尼]";
		mes "What? You didn't know this? Then, read through my instructions and come back again.";
		close;
	}
	mes "[巴亚尼]";
	mes "Awesome! Then let's start refining " + getitemname(.@item) + ".";
	next;
	specialeffect EF_SONICBLOW;
	mes "[巴亚尼]";
	mes "Pow!! Wow!! Flip... flop!";
	next;
	specialeffect2 EF_TRIPLEATTACK;
	mes "[巴亚尼]";
	mes "BAM!!";
	next;
	delitem 6499,20; //Ancient_Grudge

	// anti-hack
	if (callfunc("F_IsEquipIDHack", .@part, .@item))
		close;

	delequip .@part;
	getitem .@newItem, 1; 
	mes "[巴亚尼]";
	mes "Ha ha. Perfect.";
	mes "Congratulations. Your armor is better than ever.";
	close;
}

// Secret in the Woods :: malaya_buwaya
//============================================================
malaya,305,281,3	script	警卫#buwaya	4_MAL_SOLDIER,7,7,{
	if (malaya_hi < 10) {
		mes "- 从警卫谨慎的目光可以看出来, 很明显他在警惕着你. 他不会恐吓你但同时也不会理睬你. -";
		next;
		mes "- 村子里有什么人可以谈一谈吗? -";
		close;
	} else if (malaya_hi < 20) {
		mes "[警卫]";
		mes "在马来亚港口的外面, 有一小片区域, 叫做^3131FF巴勒攸马西瓦哥^000000.";
		mes "那片区域比我们这里更接近大自然.";
		next;
		mes "[警卫]";
		mes "从另一方面说, 那片区域也有更多凶猛的魔物. 在那儿旅行时要格外的小心.";
		close;
	}
	if (malaya_buwaya == 0) {
		mes "[警卫]";
		mes "近些天, 有更多的人秘密的逃离了这个村子. 你也要到森林里去寻找神秘的宝藏吗?";
		next;
		if (BaseLevel < 100) {
			mes "[警卫]";
			mes "话说回来. 像你这么弱小的人怎么有胆量去那片区域.";
			next;
			mes "[警卫]";
			mes "如果你想到马来亚港口外面去的话, 可要抓紧你妈妈的手啊. 否则你会被魔物生吃的. 哈哈.";
			close;
		}
		mes "[警卫]";
		mes "这些天为什么有这么多的外地人来到这里? 不要再假装成什么都知道了. 你怎么知道我会答应带你去参观?";
		next;
		if (select("宝藏?:不理他.") == 2) {
			mes "[警卫]";
			mes "你在无视我吗? 呸...";
			close;
		}
		mes "[警卫]";
		mes "噢, 你不是来这里寻找宝藏的吗?";
		next;
		mes "[警卫]";
		mes "我听人们都在谈论森林里埋着的神秘宝藏.";
		set malaya_buwaya,1;
		setquest 2271;
		next;
	}
	if (malaya_buwaya == 1) {
		mes "[警卫]";
		mes "你看到那边的一群人了吗? 他们每天都聚在一起讨论着这个事儿.";
		mes "如果你也感兴趣的话, 去和他们聊两句吧.";
		close;
	}
	mes "[警卫]";
	mes "这么看来, 关于宝藏的事儿只是一个传说? 我不是在问啊, 我一整晚都在梦想着暴富呢. 哈哈.";
	close;
OnTouch:
	if ((malaya_hi > 19) && (malaya_buwaya == 0)) {
		emotion ET_SURPRISE;
		emotion ET_SURPRISE,1;
	}
	end;
}
malaya,276,288,5	script	Port 马来亚港的村民::buwaya_A	582,{
	if (malaya_hi < 20) {
		mes "- 他们互相耳语的时候, 谨慎的看着你. -";
		close;
	} else if (malaya_buwaya == 1) {
		emotion ET_SURPRISE, getnpcid(0, "buwaya_A");
		mes "[马来亚港的村民]";
		mes "不, 我听说他们在森林里迷路了.";
		mes "像我们这样小村子里的人们怎么会去埋宝藏呢?";
		next;
		emotion ET_PROFUSELY_SWEAT, getnpcid(0, "buwaya_B");
		mes "[马来亚港的村民]";
		mes "难道是怪兽? 我奶奶说有一只大头龙住在森林的深处.";
		next;
		emotion ET_STARE_ABOUT, getnpcid(0, "buwaya_C");
		mes "[马来亚港的村民]";
		mes "不. 听我说.";
		next;
		mes "[马来亚港的村民]";
		mes "你们知道 ^3131FF土豆^000000 吗? 这个小孩就住在 ^3131FF马来亚旅馆^000000 里.";
		mes "你们知道土豆从森林里回来了吗?";
		next;
		emotion ET_HUK, getnpcid(0, "buwaya_A");
		emotion ET_HUK, getnpcid(0, "buwaya_B");
		mes "[马来亚港的村民]";
		mes "真的吗??? 他活着回来了?";
		next;
		emotion ET_SURPRISE, getnpcid(0, "buwaya_C");
		mes "[马来亚港的村民]";
		mes "是的啊. 但是比较奇怪的是, 这个原本是个熊孩子的小屁孩儿, 现在却一直呆在家里从来不出去.";
		next;
		emotion ET_QUESTION, getnpcid(0, "buwaya_B");
		mes "[马来亚港的村民]";
		mes "为什么呢?";
		next;
		emotion ET_SURPRISE, getnpcid(0, "buwaya_C");
		mes "[马来亚港的村民]";
		mes "还不明白吗? 土豆肯定找到了宝藏.";
		next;
		emotion ET_HUK, getnpcid(0, "buwaya_A");
		emotion ET_HUK, getnpcid(0, "buwaya_B");
		mes "[马来亚港的村民]";
		mes "我靠!!!! 那 ^3131FF土豆^000000 现在不是暴富了?";
		next;
		emotion ET_STARE_ABOUT, getnpcid(0, "buwaya_C");
		mes "[马来亚港的村民]";
		mes "我不这样认为.";
		mes "我的确看到 ^3131FF土豆^000000 回来了, 但他手里并没有拿着什么东西.";
		mes "但是接下来, 我肯定漏掉了什么因为我马上跑回家了.";
		next;
		emotion ET_QUESTION, getnpcid(0, "buwaya_B");
		mes "[马来亚港的村民]";
		mes "现在 ^3131FF土豆^000000 在家里做什么呢?";
		next;
		emotion ET_THINK, getnpcid(0, "buwaya_C");
		mes "[马来亚港的村民]";
		mes "我想土豆正在策化着怎么把宝藏带回来, 不告诉我们.";
		mes "把所有宝藏据为己有, 太贪婪了.";
		next;
		emotion ET_QUESTION, getnpcid(0, "buwaya_A");
		mes "[马来亚港的村民]";
		mes "真的吗?";
		next;
		emotion ET_THROB2, getnpcid(0, "buwaya_B");
		mes "[马来亚港的村民]";
		mes "这些宝藏要是在我手里多好啊 ~";
		mes "我会每天擦洗着这些宝藏, 耀眼的光亮让它们看上去就是美丽的艺术品. 噢~~~";
		next;
		emotion ET_THINK, getnpcid(0, "buwaya_C");
		mes "[马来亚港的村民]";
		mes "那么, 我们去和土豆谈谈, 让他把宝藏的位置泄露给我们, 怎么样?";
		next;
		emotion ET_QUESTION, getnpcid(0, "buwaya_A");
		mes "[马来亚港的村民]";
		mes "哇噢. 这个想法好啊. 不用怀疑了, 你就是发起人!";
		next;
		emotion ET_THINK, getnpcid(0, "buwaya_A");
		mes "[马来亚港的村民]";
		mes "但是 ^3131FF土豆^000000 会轻易的告诉我们吗?";
		mes "土豆很狡猾啊, 他会把话题叉开的.";
		next;
		emotion ET_CRY, getnpcid(0, "buwaya_B");
		mes "[马来亚港的村民]";
		mes "那么我们就说服 ^3131FF土豆^000000 告诉我们宝藏在哪儿, 而不是让我们自己去找.";
		next;
		emotion ET_CRY, getnpcid(0, "buwaya_B");
		mes "[马来亚港的村民]";
		mes "啊~~~这些天想得到什么好东西实在是太难了~~~!!!!";
		set malaya_buwaya,2;
		erasequest 2271;
		setquest 2272;
		close;
	} else if (malaya_buwaya == 2) {
		mes "- 最好去访问一下土豆, 可以得到关于宝藏的更多的信息. -";
		close;
	} else {
		mes "- 人们在很严肃的谈讨着什么. -";
		close;
	}
}
malaya,278,288,3	duplicate(buwaya_A)	马来亚港的村民::buwaya_B	4_F_MALAYA
malaya,276,286,7	duplicate(buwaya_A)	马来亚港的村民::buwaya_C	4_M_MALAYA

ma_in01,47,101,3	script	土豆#buwaya	4_M_BARYO_BOY,7,7,{
	if ((malaya_hi < 20) || (malaya_buwaya < 2)) {
		mes "- 看到一个呆呆的眼神的人, 虚弱的站在那里. -";
		close;
	}
	if (malaya_buwaya == 2) {
		mes "- 看到一个呆呆的眼神的人, 虚弱的站在那里. -";
		next;
		if (select("轻拍一下他的肩膀.:不管他.") == 2)
			close;
		emotion ET_HUK;
		mes "[土豆]";
		mes "哇! 不! 走开! 放开我!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "嘿, 你还好吗?";
		next;
		mes "[土豆]";
		mes "呼... 你是一个人类? 你是谁?";
		next;
		mes "- 他直直的看着你的脸, 但是并没有认出你是谁. -";
		next;
		mes "[土豆]";
		mes "谁在那里?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我是 " + strcharinfo(0) + ". 你是土豆, 对吗? 人们都说你找到了宝藏, 是真的吗?";
		next;
		mes "[土豆]";
		mes "什么宝藏?";
		mes "我看不到了. 我瞎了. 请帮帮我. 我很累很沮丧.";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "发生了什么事情?";
		next;
		mes "[土豆]";
		mes "不能再说了. 我必须马上治好我的眼睛先.";
		mes "抽屉里肯定还有一些 ^3131FF绿色药水^000000. 你能帮我拿出来吗?";
		set malaya_buwaya,3;
		close;
	} else if (malaya_buwaya == 3) {
		if (!countitem(506)) {
			mes "[土豆]";
			mes "不能再说了. 我必须马上治好我的眼睛先.";
			mes "抽屉里肯定还有一些 ^3131FF绿色药水^000000. 你能帮我拿出来吗?";
			close;
		}
		mes "[土豆]";
		mes "嗨? 嘿, 你还在吗? 绿色药水呢? 啊, 我快疯了.";
		next;
		if (select("把绿色药水给他.:不给他.") == 2) {
			mes "[土豆]";
			mes "你真的走掉了吗? 喂! 我艹!";
		} else {
			mes "[土豆]";
			mes "*大口地喝着*...";
			delitem 506,1; //Green_Potion
			set malaya_buwaya,4;
		}
		close;
	} else if (malaya_buwaya == 4) {
		emotion ET_SURPRISE;
		mes "[土豆]";
		mes "我能看到了!! 我的眼睛好了!!!";
		mes "呼! 我感觉好多了!";
		next;
		emotion ET_THINK,1;
		emotion ET_BEST;
		mes "[土豆]";
		mes "哇! 你看起来比声音听起来要帅多了. 哈哈";
		next;
		mes "[土豆]";
		mes "你刚才说什么? 关于什么宝藏吗?";
		mes "你刚才说我找到了宝藏?";
		mes "那是什么玩意儿?";
		next;
		select("告诉他, 人们都在谈论的事情.");
		emotion ET_SMILE;
		mes "[土豆]";
		mes "什么?";
		mes "噗! 土豆发啦! 是一夜暴富哈!!";
		next;
		emotion ET_HNG;
		mes "[土豆]";
		mes "对不起, 我去森林里是为了收集一些小虫子. 我还真希望我看到了一处宝藏. 搞笑呢!";
		next;
		emotion ET_THINK;
		mes "[土豆]";
		mes "我的确去了森林的深处因为这附近收集不到我想要的虫子. 但谁会想到我却陷入了这种混乱?";
		next;
		if (select("你看到了什么:关于小虫子") == 2) {
			mes "[土豆]";
			mes "我只是想向人们展示一下我收集到的可爱的小虫子.";
			next;
			emotion ET_SMILE;
			mes "[土豆]";
			mes "把雪球和虫子放在大人们的衣服上很好玩的, 不是吗?";
			next;
			mes "[土豆]";
			mes "我喜欢看人们被吓的满地乱跑就像参加马拉松似的. 嘿嘿嘿.";
			next;
		}
		mes "[土豆]";
		mes "我认为大人们不会被普通的小虫子吓到, 所以我和花蹦蹦进入到森林深处.";
		next;
		mes "[土豆]";
		mes "啊哈, 花蹦蹦是一只可爱的小狗. 他长的真帅. 他是我在这个世界上最好的朋友.";
		next;
		emotion ET_THINK;
		mes "[土豆]";
		mes "花蹦蹦经常会汪汪的叫并用嘴巴拉扯我的衣袖, 这时候我就会提高警惕.";
		next;
		mes "[土豆]";
		mes "- 土豆弯下腰来和你悄悄的说话, 就好像墙壁也长了耳朵一样. -";
		next;
		mes "[土豆]";
		mes "那儿有一只怪物站在我的后面, 它的嘴巴比这个房子还要大.";
		next;
		select("一只怪物?!");
		mes "[土豆]";
		mes "嘘! 小声点. 我从来没有见过那么大的嘴巴. 从尖尖的牙齿里流出像小溪一样的口水. 只是想一想我就害怕的要躲起来了.";
		next;
		mes "[土豆]";
		mes "最可怕的是, 那个怪物有两个头. 你只有看到了才会相信我说的话.";
		next;
		emotion ET_CRY;
		mes "[土豆]";
		mes "花蹦蹦用尽全力咬住怪物的腿让我逃跑. 以后我就不知道发生什么事情了. *用力吸口气*~";
		next;
		mes "[土豆]";
		mes "就是那时候我弄伤了眼睛. 实话实说, 我都不知道我是怎么回来的.";
		next;
		select("关于怪兽");
		mes "[土豆]";
		mes "我不知道. 我第一次遇到这样的怪兽啊. 还有活着的人能和我讲讲这个故事吗?";
		next;
		mes "[土豆]";
		mes "等等, 或许 ^FF0000狩猎大师^000000 听说过这种怪物. 他们说他曾与各种怪物战斗过.";
		next;
		mes "[土豆]";
		mes "我需要单独呆一会儿. 我要为我的花蹦蹦做一块墓碑. 如果你要找 ^FF0000狩猎大师^000000, 他就在武器店.";
		next;
		mes "[土豆]";
		mes "告诉其他人不要再传播关于宝藏的传言了. 他们不知道我遇到了什么. 呼! 我要把那些怪怪的虫子放到每个人的衣服里!";
		set malaya_buwaya,5;
		erasequest 2272;
		setquest 2273;
		close;
	} else if (malaya_buwaya == 5) {
		mes "[土豆]";
		mes "我得给我的花蹦蹦做一个墓碑, 我忠诚的朋友啊...";
		mes "如果你要找 ^FF0000狩猎大师^000000, 他就在武器店.";
		close;
	} else if (malaya_buwaya == 6) {
		mes "[土豆]";
		mes "Ed!! Eeeeeddddddd!!!";
		mes "真不能相信你牺牲自己来保护我的生命!!!";
		next;
		mes "- 土豆肯定不会撒谎的, 他哭得这么动情. -";
		close;
	} else if (malaya_buwaya == 7) {
		mes "[土豆]";
		mes "我在哪儿看到怪兽的?";
		next;
		mes "[土豆]";
		mes "嗯...";
		mes "我慌的拼命在跑根本没注意啊...";
		next;
		mes "[土豆]";
		mes "森林太大了. 甚至都超过了巴勒攸马西瓦哥.";
		mes "I think I heard the sound of ^3131FFFlowing Water^000000. 很大的嘶嘶声. 这就是我记得的全部的了.";
		close;
	} else if ((malaya_buwaya > 7) && (malaya_buwaya < 12)) {
		mes "[土豆]";
		mes "可怜的花蹦蹦啊, 我再也见不到你了!!!!";
		close;
	} else if (malaya_buwaya == 12) {
		emotion ET_CRY;
		mes "[土豆]";
		mes "可怜的花蹦蹦啊, 我再也见不到你了!!!!";
		next;
		enablenpc "小狗#buwaya_totoi";
		mes "[小狗]";
		mes "汪汪!!";
		next;
		emotion ET_HUK;
		mes "[土豆]";
		mes "花蹦蹦!!";
		mes "花蹦蹦!!! 你还活着啊!!!";
		mes "你真的回来了, 我太高兴了!!!!";
		next;
		mes "[土豆]";
		mes "你把花蹦蹦带回来了吗?";
		mes "太谢谢你了!";
		mes "你没有遇到那个怪兽, 是吗?";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "那个怪兽叫做宝箱巨鳄. 我把怪兽的事儿和警卫说了. 你最好不要再靠近那片区域了.";
		next;
		mes "[土豆]";
		mes "好的!";
		mes "花蹦蹦啊花蹦蹦, 森林里太危险了我们再也不能去抓虫子了.";
		next;
		mes "[小狗]";
		mes "*呜咽声*...";
		next;
		mes "[土豆]";
		mes "但是我敢保证我们可以通过其它方式来保住咱们的声望!";
		next;
		mes "[小狗]";
		mes "汪汪!!";
		next;
		/*
		// Better translation needed.
		mes "[土豆]";
		mes "嗯... 嘿!";
		next;
		select("你是一位" + ((Sex) ? "男孩" : "女孩") + ", 不是吗?");
		emotion ET_HUK,1;
		mes "[土豆]";
		mes "嗯?";
		if (!Sex) {
			mes "土豆是一个女孩, 而你是一个男孩.";
			mes "你不是一个男孩吗?";
		} else {
			mes "土豆是一个女孩, 而你也是一个女孩.";
			mes "你不是一个女孩吗?";
		}
		next;
		mes "[土豆]";
		mes "是因为我的名字的缘故吗, 土豆? 那是因为我爸妈在还没有生我的时候觉得我会是一个男孩才起的. 哈哈!";
		next;
		*/
		mes "[土豆]";
		mes "总之, 十分感谢你把我最好的朋友带回来了.";
		mes "我没有什么东西能感谢你. 等一下, 让我看看我的抽屉里还有什么, 嘿嘿.";
		set malaya_buwaya,13;
		erasequest 2278;
		setquest 2279;
		close;
	} else if (malaya_buwaya == 13) {
//		if (IsPremiumPcCafe == 10)
			.@amount = 10;
//		else
//			.@amount = 5;
		if (checkweight(1201,1) == 0 || MaxWeight - Weight < 2000) {
			mes "- 等等!! -";
			mes "- 你的负重太大了. -";
			mes "- 会拿不下我给你的东西. -";
			mes "- 把你的物品清理一下吧. -";
			mes "- 清理好了再来找我. -";
			close;
		}
		mes "- 土豆打开抽屉, 把它翻了个底朝天. 屋子里也扔的一团乱. -";
		next;
		mes "[土豆]";
		mes "找到了!";
		next;
		mes "[土豆]";
		mes "就是它了, 我妈妈把它给我了, 但是我不知道该如何使用它.";
		mes "我希望它能帮到你的.";
		next;
		mes "[土豆]";
		mes "没事儿了再来找我玩啊!";
		mes "只是不要再问起我关于宝藏的事儿了~!";
		next;
		mes "[小狗]";
		mes "呜汪呜汪!!!!";
		set malaya_buwaya,14;
		getitem 6497,5; //Lesser_Agimat
		disablenpc "小狗#buwaya_totoi";
		erasequest 2279;
		setquest 2280;
		close;
	} else {
		mes "[土豆]";
		mes "花蹦蹦出去玩了, 我就只有一个人.";
		mes "有什么事情能给大家提提神吗?";
		close;
	}
OnTouch:
	emotion ET_HUK;
	end;
}

ma_in01,43,101,7	script	小狗#buwaya_totoi	4_DOG01,{
	end;
OnInit:
	disablenpc "小狗#buwaya_totoi";
	end;
}

ma_in01,44,105,3	script	抽屉#buwaya	CLEAR_NPC,{
	if (malaya_buwaya == 3) {
		mes "- 你在土豆的抽屉里找着绿色药水. -";
		next;
		mes "- 笨拙的到处翻. -";
		next;
		mes "- 笨拙的到处翻. -";
		mes "- 笨拙的到处翻. -";
		next;
		mes "- 哐啷, 嘎吱. -";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "什么? 我只看到了一个空瓶子.";
		mes "这是要我自己去找一瓶绿色药水的节奏吗, 土豆还真是麻烦啊.";
		close;
	}
	end;
}

malaya,290,152,5	script	狩猎大师#buwaya	4_M_BARYO_MAN,{
	if ((malaya_hi < 20) || (malaya_buwaya < 5)) {
		mes "[狩猎大师]";
		mes "噢!呼呼!";
		mes "我就是狩猎大师啦! 除了一件事我什么都不怕! 我只怕外地人...";
		close;
	}
	if (malaya_buwaya == 5) {
		mes "[狩猎大师]";
		mes "噢!呼呼!";
		mes "我为了打败米洛斯, 跑遍了整个卢恩米德加尔特大陆.";
		next;
		mes "[狩猎大师]";
		mes "并且我成功杀死了摩卡 , 一种用魔鬼的声音来骚扰世人的怪兽.";
		mes "哇噢! 他真是耐操啊. 只要一想起它我就直流冷汗.";
		next;
		mes "[狩猎大师]";
		mes "哟! 你起来也有一些自己的和怪物争斗过的故事啊. 你见过米洛斯? 哈哈哈!";
		next;
		mes "[狩猎大师]";
		mes "那么你来这里是为了向我学习所有的狩猎技巧? 或者是邀请我出版一本关于如何狩猎的书籍吗?";
		next;
		if (select("关于土豆提起过的怪兽:不潘.") == 2) {
			mes "[狩猎大师]";
			mes "噢? 嘿! 你要到哪儿去啊?!";
			close;
		}
		mes "[狩猎大师]";
		mes "你是说曾经有人见过那种怪兽?";
		next;
		mes "[狩猎大师]";
		mes "在马来亚港附近有很多怪物. 你说的那种有什么特别之处吗?";
		next;
		select("那种怪兽有两只脑袋");
		mes "[狩猎大师]";
		mes "呼? 你在开玩笑吗? 世上哪儿有两只脑袋的怪兽?!";
		next;
		mes "[狩猎大师]";
		mes "那个小孩肯定是被秃鹰或其它什么的吓坏了.";
		mes "有一个人很惊奇的看到了一只果树龟, 他却认为他看到了一棵会动的果树!";
		next;
		mes "[狩猎大师]";
		mes "你不应该向大人撒谎. 我知道你想要引起我这个狩猎大师的注意, 哈哈!";
		next;
		if (select("我能证明给你看.:对土豆有所怀疑.") == 2) {
			mes "[狩猎大师]";
			mes "小孩讲故事总有他们自己的理由. 我想土豆也是一样的.";
			set malaya_buwaya,6;
			close;
		}
		mes "[狩猎大师]";
		mes "噢, 是吗? 如果你认为他说的是实话的话, 拿证据来吧.";
		next;
		mes "[狩猎大师]";
		mes "任何生命体都会留下某些痕迹. 你也一样. 特别是在一些暧昧的场所, 嘿嘿, 你懂的!";
		next;
		mes "[狩猎大师]";
		mes "Try collecting 10 Animal Samples from where the kid saw the monster. 我将从样本中寻找那个怪物的痕迹.";
		next;
		mes "[狩猎大师]";
		mes (Sex) ? "It won't be pleasant but any brave man could easily do it, don't you agree?" : "I don't want the hands of a pretty girl to smell bad but I could care less with someone like you. Ha ha!";
		set malaya_buwaya,7;
		erasequest 2273;
		setquest 2274;
		close;
	} else if (malaya_buwaya == 6) {
		mes "[狩猎大师]";
		mes "哇, 你回来了啊!";
		next;
		if (select("让我们看看是否有怪兽!:我认为没有怪兽.") == 2) {
			mes "[狩猎大师]";
			mes "这就是小孩子的玩笑, 哈哈.";
			close;
		}
		mes "[狩猎大师]";
		mes "噢, 是吗? 如果你认为小孩说的是真话, 那么就拿出证据来吧.";
		next;
		mes "[狩猎大师]";
		mes "任何生命体都会留下某些痕迹. 你也一样. 特别是在一些暧昧的场所, 嘿嘿, 你懂的!";
		next;
		mes "[狩猎大师]";
		mes "从小孩看到怪物的地方带来10个 采集样本 吧. 我会从样本里寻找怪物的痕迹.";
		next;
		mes "[狩猎大师]";
		mes (Sex) ? "虽说挺困难, 但任何一个勇敢的人都能完成的, 不是吗?" : "我不会让一个漂亮小女孩的手弄脏, 但是对抠脚大汗就无所谓了, 哈哈!";
		set malaya_buwaya,7;
		erasequest 2273;
		setquest 2274;
		close;
	} else if (malaya_buwaya == 7) {
		if (countitem(6519) < 10) {
			mes "[狩猎大师]";
			mes "如果你认为真的有两个脑袋的怪兽的话, 把证据拿来给我看.";
			close;
		}
		mes "[狩猎大师]";
		mes "哇呼! 太尼玛恶心了.";
		mes "你还真带回来了证据啊.";
		mes "呼! 把它放在那儿, 赶快去洗手. 闻到这股恶臭, 上帝也得跪.";
		delitem 6519,10; //Collected_Sample
		set malaya_buwaya,8;
		erasequest 2274;
		setquest 2275;
		close;
	} else if (malaya_buwaya == 8) {
		mes "[狩猎大师]";
		mes "噢, 是吗?";
		next;
		mes "- 笨拙的到处翻. -";
		next;
		mes "- 着急的到处翻. -";
		mes "- 来回摇, 使劲晃. -";
		next;
		mes "- 努力的到处翻. -";
		mes "- 来回摇, 使劲晃. -";
		mes "- 来回摇, 使劲晃. -";
		next;
		mes "[狩猎大师]";
		mes "噢! 找到了!!";
		next;
		mes "[狩猎大师]";
		mes "哇! 好的! 太棒了! 哈哈!!!";
		next;
		mes "[狩猎大师]";
		mes "你! 过来感受一下!";
		set malaya_buwaya,9;
		enablenpc "#buwaya_soil";
		close;
	} else if (malaya_buwaya == 9) {
		mes "[狩猎大师]";
		mes "不要傻站在那儿! 过来尝试一下!";
		enablenpc "#buwaya_soil";
		close;
	} else if (malaya_buwaya == 10) {
		mes "[狩猎大师]";
		mes "快去告诉警卫宝箱巨鳄又复活了. 快点儿的! 在村子的北边你能找到警卫长.";
		close;
	} else {
		mes "[狩猎大师]";
		mes "ZzZzZz ...";
		close;
	}
}

malaya,291,152,3	script	#buwaya_soil	4_SOIL,{
	if (malaya_buwaya == 9) {
		mes "- 笨拙的到处翻. -";
		next;
		mes "- 着急的到处翻. -";
		mes "- 来回摇, 使劲晃. -";
		next;
		mes "- 努力的到处翻. -";
		mes "- 来回摇, 使劲晃. -";
		mes "- 来回摇, 使劲晃. -";
		next;
		if (rand(1,10) <= 5) {
			mes "[" + strcharinfo(0) + "]";
			mes "我什么都没看到.";
			next;
			mes "[狩猎大师]";
			mes "不可能啊, 靠近点儿看";
		} else {
			mes "-  你的手指感觉到有点儿尖的东西. -";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "噢啊!";
			mes "这是什么?";
			next;
			mes "[狩猎大师]";
			mes "呼! 这是大事儿啊! 它估计能把钢制品划烂啊!";
			next;
			mes "[狩猎大师]";
			mes "这是 ^3131FF宝箱巨鳄^000000' 的牙齿啊!";
			mes "这怎么可能!";
			next;
			select("宝箱巨鳄?");
			mes "[狩猎大师]";
			mes "噢! 别再拿着它了. 太难闻了. 快去洗手.";
			next;
			mes "[狩猎大师]";
			mes "嗯. 那个小孩看到的怪兽一定是宝箱巨鳄了. 不用怀疑了.";
			next;
			mes "[狩猎大师]";
			mes "我听说住在我母亲那边的我爷爷的叔叔的邻居的妻子, 就是死在宝箱巨鳄的利齿下.";
			next;
			mes "[狩猎大师]";
			mes "据说宝箱巨鳄所过之处再无生迹啊.";
			mes "土豆真是一个幸运的小孩!";
			next;
			mes "[狩猎大师]";
			mes "宝箱巨鳄已经很久没动静了. 万一它只是在蛰伏呢?";
			next;
			mes "[狩猎大师]";
			mes "现在我知道了, 像那样的怪物在外面的时候, 我也一定要小心了.";
			mes "一定要告诉村民, 千万不要到森林深处去啊.";
			next;
			mes "[狩猎大师]";
			mes "快去告诉警卫长, 宝箱巨鳄又复舒了.";
			mes "我会同时通知其它的猎人, 一起想个办法来杀掉宝箱巨鳄.";
			set malaya_buwaya,10;
			disablenpc "#buwaya_soil";
			erasequest 2275;
			setquest 2276;
		}
		close;
	}
	end;
OnInit:
	disablenpc "#buwaya_soil";
	end;
}

-	script	可疑的痕迹#buwaya	-1,{
	if (checkweight(1201,1) == 0 || MaxWeight - Weight < 2000) {
		mes "- 等等!! -";
		mes "- 你的负重太大了. -";
		mes "- 不能再接收物品. -";
		mes "- 请先清理一下你的物品. -";
		mes "- 然后再来. -";
		close;
	}
	if (malaya_buwaya == 7) {
		if (countitem(6519) >= 10) {
			mes "- 你不用再收集样本了. -";
			close;
		}
		mes "- 你看到了什么东西, 和杂草还有泥土混在一起. -";
		next;
		if (rand(1,10) <= 2) {
			mes "- 你被手里收集到的样本的气味, 恶心到想吐. -";
			sc_start SC_POISON,5000,0;
			close;
		}
		mes "- 你小心的收集着柔软的, 细小的而又温暖的材料. -";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "它温暖的就像妈妈的怀抱.";
		getitem 6519,1; //Collected_Sample
		disablenpc strnpcinfo(0);
		initnpctimer;
		close;
	}
	end;
OnTimer20000:
	enablenpc strnpcinfo(0);
	stopnpctimer;
	end;
}
ma_fild02,155,235,3	duplicate(可疑的痕迹#buwaya)	可疑的痕迹#buwaya_1	4_SOIL
ma_fild02,143,142,3	duplicate(可疑的痕迹#buwaya)	可疑的痕迹#buwaya_2	4_SOIL
ma_fild02,266,155,3	duplicate(可疑的痕迹#buwaya)	可疑的痕迹#buwaya_3	4_SOIL
ma_fild02,221,91,3	duplicate(可疑的痕迹#buwaya)	可疑的痕迹#buwaya_4	4_SOIL
ma_fild02,205,85,3	duplicate(可疑的痕迹#buwaya)	可疑的痕迹#buwaya_5	4_SOIL
ma_fild02,300,98,3	duplicate(可疑的痕迹#buwaya)	可疑的痕迹#buwaya_6	4_SOIL
ma_fild02,100,275,3	duplicate(可疑的痕迹#buwaya)	可疑的痕迹#buwaya_7	4_SOIL

malaya,290,340,3	script	警卫长#buwaya	4_MAL_CAPTAIN,{
	if (checkweight(1201,1) == 0 || MaxWeight - Weight < 2000) {
		mes "- 等等!! -";
		mes "- 你的负重太大了. -";
		mes "- 不能再接收物品. -";
		mes "- 请先清理一下你的物品. -";
		mes "- 然后再来. -";
		close;
	}
	if (malaya_hi < 20) {
		mes "- 他们谨慎的看着你, 小心的耳语着什么. -";
		close;
	}
	if (malaya_buwaya <= 10) {
		mes "[警卫长]";
		mes "我们太忙了, 因为噩梦死神的仆人袭击了医院.";
		next;
		mes "[警卫长]";
		mes "我们尽最大的努力保证村民的安全, 祝你在马来亚港玩的愉快.";
	}
	if (malaya_buwaya == 10) {
		next;
		if (select("告诉他宝箱巨鳄的事儿.:结束谈话.") == 2) {
			close;
		}
		mes "[警卫长]";
		mes "宝箱巨鳄? 那个残忍的生物又回来了?";
		next;
		mes "[警卫长]";
		mes "真是一个坏消息啊. 我们本来就人手不够了.";
		next;
		mes "[警卫长]";
		mes "并且村民必须得到森林里去, 才能采摘到水果和蔬菜.";
		next;
		mes "[警卫长]";
		mes "嗯... 你能帮帮马来亚港口的村民吗?";
		next;
		if (select("交给我吧!:没心情.") == 2) {
			mes "[警卫长]";
			mes "是吗? 不是好消息啊. 如果我们不做些什么的话, 所有村民的生命都会受到威胁. 像你这样的年青人怎么能这么无情. 所有的外地人都和你一样吗? 唉! 看来不能相信外地人啊. 唉.";
			close;
		}
		mes "[警卫长]";
		mes "我就知道我没有看错你.";
		next;
		mes "[警卫长]";
		mes "好的, 我相信你.";
		mes "我想知道宝箱巨鳄经常活动在哪一片区域, 以便通知村民.";
		mes "猜猜宝箱巨鳄的老窝在哪儿, 会是一个有趣的赌局啊.";
		next;
		mes "[警卫长]";
		mes "一旦你到达了那片区域, 就^3131FF放一个烟雾弹^000000.";
		mes "我们就会跑到那里去的.";
		next;
		mes "[警卫长]";
		mes "那么小心了, 祝你好运.";
		set malaya_buwaya,11;
		erasequest 2276;
		setquest 2277;
	} else if (malaya_buwaya == 11) {
		mes "[警卫长]";
		mes "一旦你到达了那片区域, 就^3131FF放一个烟雾弹^000000.";
		mes "我们就会跑到那里去的.";
	} else if ((malaya_buwaya == 12) || (malaya_buwaya == 13)) {
		mes "[" + strcharinfo(0) + "]";
		mes "让我们先把花蹦蹦还给土豆吧.";
	} else if (malaya_buwaya == 14) {
		mes "[警卫长]";
		mes "你说警卫长把宝箱巨鳄的老窝的位置告诉了你?";
		mes "这不可能啊.";
		next;
		mes "[警卫长]";
		mes "因为宝箱巨鳄的事情我忙得不可开交.";
		next;
		mes "[警卫长]";
		mes "真是谢谢你了.";
		mes "如果你还想继续为我们解决宝箱巨鳄的事情, 就来找我吧.";
		mes "旅途愉快.";
		set malaya_buwaya,15;
		getexp 1000000, 600000;
		completequest 2280;
	} else {
		set .@hunting, checkquest(2281,HUNTING);
		if (.@hunting == -1) {
			mes "[警卫长]";
			mes "听说宝箱巨鳄出现在了森林的深处.";
			mes "所有人都知道, 我们的壮汉全被派去解决医院的事情了, 因为那里被噩梦死神的仆人袭击了.";
			next;
			mes "[警卫长]";
			mes "这就是为什么我们要找一个外地人来解决宝箱巨鳄的原因了.";
			mes "他们说宝箱巨鳄是一个有着两个脑袋的丑陋的怪兽.";
			mes "你能帮助我们消灭宝箱巨鳄吗?";
			next;
			if (select("妥妥儿的.:玩蛋去.") == 2) {
				mes "[警卫长]";
				mes "宝箱巨鳄是一种强大而又危险的怪兽.";
				mes "不敢接受这个工作, 也不是一件丢人的事情.";
				close;
			}
			if (BaseLevel < 130) {
				mes "[警卫长]";
				mes "这项任务十分危险.";
				mes "如果你真想消灭宝箱巨鳄, 你就得做好准备工作.";
				mes "当你到了 Lv130 时, 再来找我吧.";
				close;
			}
			mes "[警卫长]";
			mes "传闻说, 宝箱巨鳄把人们拖到它们背上的宝箱里存着, 然后回去吃掉他们.";
			next;
			mes "[警卫长]";
			mes "记住我的话, 一定要小心.";
			mes "找几个能信任的小伙伴一起去吧.";
			setquest 2281;
		} else if (.@hunting == 0 || .@hunting == 1) {
			mes "[警卫长]";
			mes "宝箱巨鳄的情况怎么样了?";
			next;
			if (select("放弃了.:正在进行中.") == 2) {
				mes "[警卫长]";
			  mes "记住我的话, 一定要小心.";
			  mes "找几个能信任的小伙伴一起去吧.";
				close;
			}
			mes "[警卫长]";
			mes "宝箱巨鳄是一种强大而又危险的怪兽.";
			mes "不敢接受这个工作, 也不是一件丢人的事情.";
			erasequest 2281;
		} else if (.@hunting == 2) {
//			if (IsPremiumPcCafe == 10)
				.@amount = 10;
//			else
//				.@amount = 5;
			mes "[警卫长]";
			mes "难以置信你竟然消灭了宝箱巨鳄!";
			mes "你可不是一个普通的年青人啊? 马来亚港的人们可以睡个安稳觉了.";
			next;
			mes "[警卫长]";
			mes "干的好.";
			erasequest 2281;
			getitem 6497, .@amount; //Lesser_Agimat
			getexp 0,600000;
		} else {
			mes "[警卫长]";
			mes "我不会退出的, 直到所有马来亚港的人们, 包括巴勒攸马西瓦哥的人们, 远离宝箱巨鳄的威胁. 答应我要照顾好你自己.";
			erasequest 2281;
		}
	}
	close;
}

ma_fild02,307,245,0	script	#buwaya_todog1	HIDDEN_WARP_NPC,3,3,{
	end;
OnTouch:
	if (malaya_buwaya == 11) {
		enablenpc "小狗#buwaya";
		//mes "[小东西]";
		mes "汪汪!!";
		close;
	}
	end;
}
ma_fild02,320,241,0	duplicate(#buwaya_todog1)	#buwaya_todog2	HIDDEN_WARP_NPC,3,3
ma_fild02,317,250,0	duplicate(#buwaya_todog1)	#buwaya_todog3	HIDDEN_WARP_NPC,7,7

ma_fild02,312,259,3	script	小狗#buwaya	4_DOG01,{
	if (malaya_buwaya == 11) {
		mes "[小狗]";
		mes "汪汪!!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "这儿怎么会有一只小狗呢?";
		next;
		if (select("离近点儿看.:不理它.") == 2) {
			mes "[" + strcharinfo(0) + "]";
			mes "看起来像是一只迷路的小狗.";
			close;
		}
		mes "- 非常仔细的查看这只脏脏的小狗, 发现在它的脖子上有一个陈旧的项圈. -";
		next;
		mes "- 项圈上写着, '和土豆永远在一起'. -";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "那么你就是花蹦蹦了?";
		next;
		mes "[小狗]";
		mes "汪汪汪汪!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "你没有被宝箱巨鳄杀掉, 真是一只好命的狗狗啊. 让我们回去找你的主人吧.";
		next;
		emotion ET_DELIGHT;
		mes "[小狗]";
		mes "汪汪汪汪!!";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "嗯, 在回去之前, 你还记的宝箱巨鳄的老窝在哪儿吗?";
		next;
		mes "[小狗]";
		mes "呜!";
		next;
		mes "- 花蹦蹦是一只机智的小狗, 它知道我说的是什么意思. 花蹦蹦向着北方吠了起来. -";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "宝箱巨鳄就在那边!";
		mes "然后我就该在那里放烟雾弹.";
		next;
		mes "- 你把烟雾弹从包里拿出来, 朝着天空来了一发. -";
		next;
		mes "^FF0000- 嗖 -^000000";
		enablenpc "警卫#buwayacave";
		specialeffect2 EF_MVP;
		next;
		mes "[警卫]";
		mes "干的好!";
		mes "那么宝箱巨鳄就住在那个地方了. 我肯定会把这个消息带给警卫长的!";
		disablenpc "警卫#buwayacave";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我应该先把小狗带给土豆再去找警卫长吗?";
		next;
		mes "[小狗]";
		mes "汪 汪!";
		set malaya_buwaya,12;
		disablenpc "小狗#buwaya";
		erasequest 2277;
		setquest 2278;
		close;
	} else if (malaya_buwaya == 12) {
		mes "[" + strcharinfo(0) + "]";
		mes "让我们先把花蹦蹦还给土豆, 再去找警卫长吧.";
		close;
	}
	end;
OnInit:
	disablenpc "小狗#buwaya";
	end;
}

ma_fild02,308,262,3	script	警卫#buwayacave	4_MAL_SOLDIER,{
	end;
OnInit:
	disablenpc "警卫#buwayacave";
	end;
}

// Bakonawa Extermination :: malaya_bakonawa
//============================================================
malaya,280,331,4	script	唱着歌的男人#bako1	4_M_BARYO_MAN,{
	if (malaya_bakona1 < 5) {
		mes "[唱着歌的男人]";
		mes "故事中的龙住在湖里~";
		mes "故事中的女人";
		mes "很久以前变成了一条龙~";
		next;
		mes "[唱着歌的男人]";
		mes "等待着向其它大陆行进的儿子,";
		mes "他会回来的";
		mes "当月亮第90次重新出现";
		next;
		mes "[唱着歌的男人]";
		mes "月亮第89次重新出现,";
		mes "月亮第90次重新出现,";
		mes "月亮第91次重新出现...";
		next;
		mes "[唱着歌的男人]";
		mes "月亮带走了我的儿子~";
		mes "那个可怕的东西";
		mes "吞噬了我的儿子,";
		mes "我会惩罚月亮的~";
		next;
		mes "[唱着歌的男人]";
		mes "狂怒的月亮把自己藏在光亮之后,";
		mes "那一天全世界都会下起大雨";
		mes "所有的人们都被淹死于洪水中~";
		next;
		mes "[唱着歌的男人]";
		mes "那个老女人的诅咒让月亮狂怒~";
		mes "消灭老女人才能让月亮恢复平静~";
		mes "假使她不在这里的话, 假使她不在这里的话...";
		next;
		mes "[唱着歌的男人]";
		mes "我听见传说~";
		mes "那个老女人跳入湖中~";
		mes "那个老女人变成了一条龙, 它要笼罩月亮";
		mes "不久阴影会笼罩村庄~";
		close;
	} else {
		mes "[唱着歌的男人]";
		mes "你认为伟说只是一个谎言?";
		mes "你认为我的祖先都是骗子?";
		mes "是的吗?";
		next;
		mes "[唱着歌的男人]";
		mes "这个村子是建立在一个古老的传说之上";
		mes "古老的历史之上.";
		mes "他们不是你这种人";
		mes "不是你这种易被愚弄的弱智.";
		close;
	}
}

malaya,275,333,5	script	唱着歌的女人#bako1	4_F_BARYO_WOMAN,{
	if (malaya_bakona1 < 5) {
		mes "[唱着歌的女人]";
		mes "食月暴龙住在湖里,";
		mes "故事中的女人变成了一条龙.";
		next;
		mes "[唱着歌的女人]";
		mes "月亮重现第90次后, 大家认为那个孩子可以回来了";
		mes "但是即使月亮重现了100次以后, 那个孩子也再没有回来~";
		mes "月亮吞噬了老女人的儿子~";
		next;
		mes "[唱着歌的女人]";
		mes "月亮啊月亮, 你接受了老女人的诅咒~";
		mes "整个村庄笼罩在死亡之下";
		mes "被诅咒的月亮降下大雨和洪水~";
		next;
		mes "[唱着歌的女人]";
		mes "月亮月亮平静了下来,";
		mes "因为老女人不见了~";
		mes "老女人自己跳入了湖中~";
		mes "她会变成食月暴龙的, 她会回来的...";
		next;
		mes "[唱着歌的女人]";
		mes "...回来吞噬你们";
		mes "惩罚整个村庄~";
		mes "一旦月亮死去";
		mes "整个村庄也会灭亡的~";
		close;
	} else {
		mes "[唱着歌的女人]";
		mes "传说都是谎言?";
		mes "为什么要这样胡说?";
		mes "难道没有一件事情";
		mes "是需要你去保护的吗?";
		next;
		mes "[唱着歌的女人]";
		mes "可怜的食月暴龙...";
		mes "我会很开心的,";
		mes "如果它能咬你一大品的话!";
		close;
	}
}

malaya,290,329,4	script	受惊吓的男孩#bako1	4_M_BARYO_BOY,{
	if (malaya_hi < 20) {
		mes "- 看起来他对你很警惕. -";
		close;
	}
	if (malaya_bakona1 < 5) {
		mes "[受惊吓的男孩]";
		mes "那个可怕的食月暴龙就要来了";
		mes "它来吞噬月亮, 报复整个村庄.";
		mes "我好害怕, 帮帮我...";
		close;
	} else {
		mes "[受惊吓的男孩]";
		mes "食月暴龙的事情只是一个慌言?";
		mes "这么说食月暴龙是不存在的了?";
		mes "我又可以和我的小伙伴到湖边玩耍了.";
		mes "你说的都是实话, 是吗?";
		close;
	}
}

malaya,264,338,4	script	受惊吓的少女#bako1	4_F_BARYO_GIRL,{
	if (malaya_hi < 20) {
		mes "- 她看起对你很警惕. -";
		close;
	}
	if (malaya_bakona1 < 5) {
		mes "[受惊吓的少女]";
		mes "据说食月暴龙很讨厌噪音.";
		mes "如果你想活命的话, 使劲敲打铁锅吧!";
		next;
		switch(select("讨厌噪音?:食月暴龙是什么?")) {
		case 1:
			mes "[受惊吓的少女]";
			mes "你已经听说过那个老女人的故事了吧,";
			mes "死掉了, 变成了食月暴龙, 是吗?";
			next;
			mes "[受惊吓的少女]";
			mes "传闻说";
			mes "那个老女人的听觉非常敏锐";
			mes "因为她一直在听闻着她儿子回来的消息";
			mes "那个出去旅行却再也没有回来的儿子.";
			next;
			mes "[受惊吓的少女]";
			mes "所以很自然的";
			mes "食月暴龙的听觉也很敏锐.";
			mes "每个人都使劲儿敲打铁锅的原因";
			mes "就是这个了.";
			close;
		case 2:
			mes "[受惊吓的少女]";
			mes "那个住在湖里的怪兽太可怕了.";
			mes "我们都很害怕";
			mes "因为我们不知道它什么时候就会袭击村庄.";
			next;
			mes "[受惊吓的少女]";
			mes "听说她对吞噬月亮的兴趣比较大";
			mes "大过袭击这个村庄.";
			mes "如果是真的话, 我宁愿她去吞掉月亮";
			mes "放我们一条生路.";
			close;
		}
	} else {
		mes "[受惊吓的少女]";
		mes "现在村民们都讨厌你了.";
		mes "因为你一直在说食月暴龙的故事是个谎言";
		mes "所以他们说你也是一个怪兽";
		mes "比食月暴龙还要坏的怪兽.";
		close;
	}
}

malaya,272,339,5	script	对传说灵光的老人#bako1	4_F_BARYO_OLD,{
	if (malaya_hi < 20) {
		mes "- 老人看起来对你很警惕. -";
		close;
	}
	if (malaya_bakona1 < 5) {
		mes "[对传说灵光的老人]";
		mes "你一定不憎恨食月暴龙.";
		mes "如果你憎恨它";
		mes "你的愤怒就会愈来愈大.";
		next;
		mes "[对传说灵光的老人]";
		mes "为了安抚这个老女人的灵魂,";
		mes "我们每年都举行仪式, 并为她准备食物.";
		mes "但是看起来永远没有办法";
		mes "来抑制住这个老女人不断增长的愤怒.";
		next;
		mes "[对传说灵光的老人]";
		mes "那一天临近了, 我可以感觉得到.";
		mes "食月暴龙就要来吞噬月亮";
		mes "接着就会袭击这个村庄了.";
		close;
	} else {
		mes "[对传说灵光的老人]";
		mes "你怎么会认为这个传说只是一个慌言呢!";
		mes "因为你的原因";
		mes "食月暴龙的愤怒更加强大了!";
		mes "如果村子出了什么事儿,";
		mes "那都是你的责任!";
		close;
	}
}

malaya,285,332,4	script	讲传说故事的老人#bako1	4_M_BARYO_OLD,{
	if (checkweight(1301,3) == 0) {
		mes "不能开始对话. 你的负重太大了. -";
		close;
	}
	if (BaseLevel < 120) {
		mes "[讲传说故事的老人]";
		mes "有一些事情需要完成";
		mes "但是你还是太弱小了,";
		mes "帮不上我的忙啊.";
		next;
		mes "[讲传说故事的老人]";
		mes "快去修练自己的能力吧.";
		mes "当你足够强大的时候,";
		mes "再来找我.";
		close;
	}
	if (malaya_hi < 20) {
		mes "- 看起来他在警惕着你. -";
		close;
	}
	if (malaya_bakona1 == 0) {
		mes "[讲传说故事的老人]";
		mes "那个老女人回来了";
		mes "以食月暴龙的形态回来了.";
		mes "不久她就会对村庄进行复仇.";
		mes "我们必须让她平静下来";
		mes "防止村庄被进一步破坏...";
		next;
		switch(select("安抚食月暴龙?:进一步的破坏?")) {
		case 1:
			mes "[讲传说故事的老人]";
			mes "因为村民的自私自利,";
			mes "那个老女人不得不面对不公平的死亡.";
			mes "她曾是一个慈爱的母亲,";
			mes "非常爱她的儿子.";
			next;
			mes "[讲传说故事的老人]";
			mes "如果我们能找到她儿子的一些遗物,";
			mes "并用这些遗物举行一个仪式,";
			mes "她不安的灵魂就会平静下来,";
			mes "她就会宽恕我们, 让我们免遭毁灭.";
			next;
			mes "[村民]";
			mes "先生, 这是没用的!!";
			next;
			mes "[村民]";
			mes "你不可能用这种办法阻止这个怪物的!";
			next;
			mes "[讲传说故事的老人]";
			mes "当然了, 追踪一个人的痕迹并不是一件容易的事情";
			mes "特别是这个人已经消失了一百多年了.";
			mes "...";
			next;
			mes "[讲传说故事的老人]";
			mes "那么, 你仍旧认为";
			mes "这值得尝试吗?";
			mes "请帮助我们从痛苦中解救出来吧.";
			next;
			switch(select("没用的.:我会帮助你的.")) {
			case 1:
				mes "[讲传说故事的老人]";
				mes "是的, 你也没错.";
				mes "你面对的不是一个人类,";
				mes "而是一个怪兽.";
				mes "即使到现在,";
				mes "我还相信那个女人曾有一颗善良的心.";
				close;
			case 2:
				mes "[讲传说故事的老人]";
				mes "你真的答应了吧?";
				mes "根据传言来看,";
				mes "这个老女人的儿子是个瘸子,";
				mes "并且是一个卖木偶的旅行商人.";
				next;
				mes "[讲传说故事的老人]";
				mes "他留下来了一块 ^FF0000石板之碎片^000000.";
				mes "但那些记录很少而且是被损坏过的,";
				mes "很难辨识.";
				next;
				mes "[讲传说故事的老人]";
				mes "首先把它拿过来吧.";
				mes "沿着这条路走下去,";
				mes "你会在港口附近找到我孙女.";
				mes "从她那里拿到石板之碎片.";
				set malaya_bakona1,1;
				setquest 1174;
				close;
			}
		case 2:
			mes "[讲传说故事的老人]";
			mes "怀着对人们的怨恨,";
			mes "食月暴龙, 我其实说的就是那个死去的老太太了.";
			mes "月亮和这个村庄...";
			mes "她都会毁灭的.";
			next;
			select("报仇? 这么久过去了?");
			mes "[讲传说故事的老人]";
			mes "有一段时间,";
			mes "她谴责月亮,";
			mes "怨恨村民.";
			mes "随着时间的推移, 这种感觉愈来愈强烈了.";
			next;
			mes "[讲传说故事的老人]";
			mes "你认为她变成怪物的原因是什么?";
			mes "你认为这么多年来,";
			mes "是什么充斥着她的大脑吗?";
			mes "是愤怒和复仇.";
			next;
			mes "[讲传说故事的老人]";
			mes "不可磨灭的怨恨,";
			mes "因为,";
			mes "她被月亮和村民所遗忘.";
			mes "这就是怨恨必须得到解决的原因.";
			close;
		}
	} else if (malaya_bakona1 == 1) {
		mes "[讲传说故事的老人]";
		mes "请给我拿来^FF0000石板之碎片^000000.";
		mes "沿着这条路走过去,";
		mes "你会在港口看到我的孙女.";
		mes "从她那儿拿到石板之碎片.";
		close;
	} else if (malaya_bakona1 == 2) {
		mes "[讲传说故事的老人]";
		mes "好的, 你拿到了石板之碎片.";
		mes "拿好别丢了.";
		mes "对你追踪传说是有帮助的.";
		next;
		mes "[讲传说故事的老人]";
		mes "我听说有一个人,";
		mes "独自生活在西北部的森林里.";
		mes "我听说有人在那里曾看到了一个木制娃娃.";
		mes "那个地方如此的遥远,";
		mes "像我这样的老头子是不可能到达了的.";
		mes "你可以为我去那里看看吗?";
		next;
		switch(select("你自己去吧!:你的解释太模糊了.:走着!")) {
		case 1:
			mes "[讲传说故事的老人]";
			mes "FUCK YOU!";
			close;
		case 2:
			mes "[讲传说故事的老人]";
			mes "你理解意思就好,";
			mes "这是我目前能说得最详细的了.";
			mes "那片区域在森林西北部的尽头.";
			mes "你过了桥继续向西走,";
			mes "就会找到他了.";
			break;
		case 3:
			mes "[讲传说故事的老人]";
			mes "你真是好人啊, 骚年!";
			mes "那片区域在森林西北部的尽头.";
			mes "你过了桥继续向西走,";
			mes "你会看到 ^0000FF马来亚移民^000000.";
			break;
		}
		mes "祝你好运了...";
		erasequest 1175;
		setquest 1176;
		set malaya_bakona1,3;
		close;
	} else if (malaya_bakona1 == 3) {
		mes "[讲传说故事的老人]";
		mes "那片区域在森林西北部的尽头.";
		mes "你过了桥继续向西走,";
		mes "你就会找到他了.";
		mes "祝你好运...";
		close;
	} else if (malaya_bakona1 < 6) {
		mes "[讲传说故事的老人]";
		mes "那个老太太儿子的踪迹";
		mes "一直和到巴勒攸马西瓦哥";
		mes "的路相连吗?";
		mes "这表示有可能他不是一个商人...";
		mes "我很好奇他到底是谁...";
		next;
		mes "[讲传说故事的老人]";
		mes "你为什么还站在这里?";
		mes "说好的出发呢?";
		mes "巴勒攸马西瓦哥啊!";
		close;
	} else if (malaya_bakona1 == 6) {
		mes "[讲传说故事的老人]";
		mes "是真的吗?";
		mes "食月暴龙正变成一个老太太,";
		mes "捏造了传说...";
		mes "看起来所有的村民直到现在";
		mes "都一直在被那个可怕的怪物所操纵.";
		next;
		mes "[讲传说故事的老人]";
		mes "没有理由再犹豫了.";
		mes "在它出击之前,";
		mes "你必须深入它的洞穴.";
		mes "我坚信你会成功的, 不是吗?";
		next;
		switch(select("不太好吧...:妥妥儿的!")) {
		case 1:
			mes "[讲传说故事的老人]";
			mes "裤子都脱了,";
			mes "你跟我说这.";
			mes "玩儿蛋去吧...";
			close;
		case 2:
			mes "[讲传说故事的老人]";
			mes "我会为你";
			mes "向村长进行申请.";
			mes "这样你就可以进入巴库暴龙湖了.";
			mes "请帮我们把它消灭掉吧.";
			erasequest 1179;
			set malaya_bakona1,7;
//			if (IsPremiumPcCafe == 10)
				getitem 6499,5; //Ancient_Grudge
//			else
//				getitem 6499,3; //Ancient_Grudge
			getexp 500000,200000;
			close;
		}
		close;
	} else if (malaya_bakona1 == 7) {
		if (malaya_bakona2 < 15) {
			mes "[讲传说故事的老人]";
			mes "如果你不介意的话,";
			mes "可以帮帮村长吗?";
			mes "因为食月暴龙的原因,";
			mes "没有人再彼此关心了...";
			next;
		}
		mes "[讲传说故事的老人]";
		mes "那个传说,";
		mes "我们相信了一百多年的传说,";
		mes "全是谎言....";
		mes "请为我们干掉那个怪兽吧.";
		close;
	}
}

ma_fild02,40,240,4	script	马来亚移民#bako1	4_M_BARYO_MAN,{
	if (malaya_bakona1 < 3) {
		mes "[马来亚移民]";
		mes "你一定有一颗勇气的心,";
		mes "否则不会来这么偏远的地方.";
		mes "马来亚港这些天怎么样?";
		mes "我听说居住在湖底的怪物, 食月暴龙,";
		mes "正在威胁着村民的生命.";
		mes "关于外界我一无所知, 因为我一直在这里没有出去过.";
		close;
	} else if (malaya_bakona1 == 3) {
		mes "[马来亚移民]";
		mes "你一定有一颗勇气的心,";
		mes "否则不会来这么偏远的地方.";
		mes "马来亚港这些天怎么样?";
		mes "我听说居住在湖底的怪物, 食月暴龙,";
		mes "正在威胁着村民的生命.";
		mes "关于外界我一无所知, 因为我一直在这里没有出去过.";
		next;
		mes "[马来亚移民]";
		mes "你是那个一直在做木偶娃娃生意的旅行商人吗?";
		mes "除了木偶娃娃, 我对旅行商人完全不懂.";
		mes "(翻着什么) 是说这个吗?";
		mes "我并不懂细节,";
		mes "但我认为和我许多年前听到的消息有关.";
		next;
		switch(select("你在这里做什么呢?:你知道石板之碎片吗?:请告诉我那个故事.:旅行商人是谁?")) {
		case 1:
			mes "[马来亚移民]";
			mes "我喜欢这儿的环境,";
			mes "所以我决定住了下来.";
			mes "这儿无拘无束.";
			mes "对我来说, 这儿就是天堂.";
			close;
		case 2:
			mes "[马来亚移民]";
			mes "这是一块非常陈旧的石板之碎片了.";
			mes "对不起我从未见过.";
			mes "这上面写着什么,";
			mes "可是我认不出来.";
			close;
		case 3:
			mes "[马来亚移民]";
			mes "这是一则简短的故事.";
			mes "^0000FF一个我从来没见过的受伤的男人,^000000";
			mes "^0000FF来到了我的家里并寻求帮助.^000000";
			mes "^0000FF当痊愈以后, 他制作了一个木偶娃娃.^000000";
			next;
			mes "[马来亚移民]";
			mes "^0000FF它被认为可以驱逐恶灵.^000000";
			mes "^0000FF这是他对我的答谢,^000000";
			mes "^0000FF然后就去了巴勒攸马西瓦哥.^000000";
			next;
			select("他去巴勒攸马西瓦哥了?");
			mes "[马来亚移民]";
			mes "据我所知,";
			mes "是那样的. 但是这个故事口口相传,";
			mes "不知道经过多少人的转述,";
			mes "时间又过了这么久, 所以我不敢保证它的真实性.";
			next;
			mes "从 巴勒攸马西瓦哥 村庄, 寻问关于^0000FF马来亚^000000,";
			mes "或者^0000FF食月暴龙^000000的消息,";
			mes "或许,";
			mes "我可以找到这个旅行商人的行踪和身份.";
			erasequest 1176;
			setquest 1177;
			set malaya_bakona1,4;
			close;
		case 4:
			mes "[马来亚移民]";
			mes "嗯, 信息有缺失,";
			mes "所以我不能确定.";
			mes "但是我怀疑他是否真的是一个旅行商人.";
			mes "因为他受了重伤, 来到了村子里.";
			mes "很可疑的样子...";
			next;
			mes "[马来亚移民]";
			mes "并且想要一个木偶娃娃,";
			mes "看起来用于举行什么仪式似的.";
			mes "保护某些东西免受恶魔侵害...";
			mes "之类的情况.";
			next;
			mes "这个旅行商人的身份...";
			mes "看起来,";
			mes "隐藏了什么神秘的事情.";
			mes "我相信用不了多久,";
			mes "这一切都会水落石出的.";
			close;
		}
	} else {
		mes "[马来亚移民]";
		mes "我会慢慢的再和你讲一次,";
		mes "这个故事的经过.";
		mes "仔细的听然后向我复述...";
		mes "不不, 不用复述了.";
		next;
		mes "[口口相传的故事]";
		mes "^0000FF一个我从来没有见过的受伤的男人,^000000";
		mes "^0000FF来到我家里寻求帮助.^000000";
		mes "^0000FF痊愈以后, 作为感谢, 他制作了一个木偶娃娃.^000000";
		mes "^0000FF看起来能驱逐恶魔的气息.^000000";
		mes "^0000FF然后他就去了巴勒攸马西瓦哥.^000000";
		next;
		mes "从 巴勒攸马西瓦哥 村庄, 寻问关于^0000FF马来亚^000000,";
		mes "或者^0000FF食月暴龙^000000的消息,";
		mes "或许,";
		mes "我可以找到这个旅行商人的行踪和身份.";
		close;
	}
}

ma_fild01,165,237,4	script	马来亚移民#bako2	4_M_MALAYA,{
	if (malaya_bakona1 < 4) {
		mes "[马来亚移民]";
		mes "你有没有去过";
		mes "马来亚港?";
		mes "我很好奇";
		mes "那里发生了什么?";
		mes "但是我不敢乱跑, 因为这里遍地是怪物.";
		close;
	} else if (malaya_bakona1 == 4) {
		mes "[马来亚移民]";
		mes "木偶娃娃?";
		mes "有一个故事是关于它的,";
		mes "但是你来这里的目的,";
		mes "不只是听一个民间的故事吧?";
		next;
		switch(select("我只是来这儿逛逛.:讲讲那个故事吧.")) {
		case 1:
			mes "[马来亚移民]";
			mes "你的时间一定很充裕啊!";
			mes "我可是大忙人,";
			mes "别闹!";
			close;
		case 2:
			mes "[马来亚移民]";
			mes "那则故事有点儿扯,";
			mes "所以我也不记得一些细节了.";
			next;
			mes "[故事的概要]";
			mes "很久以前, 5位?屠吹秸饫?";
			mes "和食月暴龙进行了战斗.";
			mes "其中四位死亡, 只有一位活了下来.";
			mes "但是,";
			mes "活下来的这位, 他的腿也受了重伤.";
			next;
			mes "[故事的概要]";
			mes "逃离现场后, 食月暴龙变成了人形.";
			mes "并且秘密的追踪着那位??";
			mes "那位?途妥隽艘桓瞿九纪尥?";
			mes "并以此来迷惑食月暴龙, 不让它追踪到自己.";
			next;
			mes "[马来亚移民]";
			mes "就是这样了.";
			mes "没有大结局的...";
			next;
			mes "[马来亚移民]";
			mes "我听说那位?土粝吕戳艘环菁锹?";
			mes "但是我不能理解,";
			mes "他为什么把记录留在了这么远的地方,";
			mes "而不是马来亚呢?";
			next;
			select("我想看看那份记录.");
			mes "[马来亚移民]";
			mes "记录就被刻在前面的那块石头上面.";
			mes "但是那块石头损毁很严重,";
			mes "有部分还裂开了.";
			mes "想要认出写的什么很困难了.";
			next;
			mes "研究那块石头.";
			erasequest 1177;
			setquest 1178;
			set malaya_bakona1,5;
			close;
		}
	} else if (malaya_bakona1 == 5) {
		mes "[马来亚移民]";
		mes "那块石头上记录着什么,";
		mes "是很久以前, 那位?土粝碌?";
		next;
		switch(select("后来?腿チ四睦?:再和我讲一次那个故事吧.")) {
		case 1:
			mes "[马来亚移民]";
			mes "嗯, 这则故事没有大结局,";
			mes "所以我想没人知道他最后去了哪里.";
			close;
		case 2:
			mes "[故事的概要]";
			mes "很久以前, 5位?屠吹秸饫?";
			mes "和食月暴龙进行了战斗.";
			mes "其中四位死亡, 只有一位活了下来.";
			mes "但是,";
			mes "活下来的这位, 他的腿也受了重伤.";
			next;
			mes "[故事的概要]";
			mes "逃离现场后, 食月暴龙变成了人形.";
			mes "并且秘密的追踪着那位??";
			mes "那位?途妥隽艘桓瞿九纪尥?";
			mes "并以此来迷惑食月暴龙, 不让它追踪到自己.";
			close;
		}
	} else {
		mes "[马来亚移民]";
		mes "我想你会要求我再讲一次那则故事的, 是吗?";
		mes "没问题, 讲多少次都没问题!";
		next;
			mes "[故事的概要]";
			mes "很久以前, 5位?屠吹秸饫?";
			mes "和食月暴龙进行了战斗.";
			mes "其中四位死亡, 只有一位活了下来.";
			mes "但是,";
			mes "活下来的这位, 他的腿也受了重伤.";
			next;
			mes "[故事的概要]";
			mes "逃离现场后, 食月暴龙变成了人形.";
			mes "并且秘密的追踪着那位??";
			mes "那位?途妥隽艘桓瞿九纪尥?";
			mes "并以此来迷惑食月暴龙, 不让它追踪到自己.";
		close;
	}
}

ma_fild01,171,235,0	script	#bako1	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (malaya_bakona1 == 5) {
		mes "记录损坏得太严重,";
		mes "无法识别了.";
		mes "但向墙上的洞插入石板之碎片时,";
		mes "却吻合的很完美, 看起来像是一幅拼图.";
		mes "字母不是很清晰, 但还是可以认出来的.";
		next;
		callsub L_Record;
		set malaya_bakona1,6;
		erasequest 1178;
		setquest 1179;
		close;
	} else if (malaya_bakona1 == 6) {
		mes "这儿有一份记录,";
		mes "是一百年前, 一位?土粝吕吹?";
		next;
		switch(select("没必要管它.:再读一次.")) {
		case 1:
			mes "这个故事我记的很清楚.";
			mes "去找马来亚的^0000FF对传说灵光的老人^000000吧,";
			mes "告诉他我发现了什么.";
			close;
		case 2:
			callsub L_Record;
			close;
		}
	}
	end;

L_Record:
	mes "[100年前一位剑士留下来的记录]";
	mes "和食月暴龙一战之后, 我受了重伤,";
	mes "来到了这个地方.";
	mes "我唯一能做的";
	mes "就是把木偶娃娃放置在";
	mes "怪物将要到来的地方.";
	next;
	mes "[100年前一位剑士留下来的记录]";
	mes "^0000FF有时食月暴龙变成一个小孩, 有时变成一个老太太,^000000";
	mes "我知道它一直在跟踪我,";
	mes "想找机会干掉我.";
	mes "因为那怪物受了重伤的原因,";
	next;
	mes "[100年前一位剑士留下来的记录]";
	mes "它需要100年的时间,";
	mes "来吸收月亮的能量,";
	mes "才能恢复它自己的力气.";
	mes "当心月亮彻底消失的那一天.";
	next;
	mes "[100年前一位剑士留下来的记录]";
	mes "那一天来临时,";
	mes "食月暴龙就会暴走了.";
	mes "但是它需要100年的时间来恢复.";
	mes "一定会有一个比我优秀的人";
	mes "来打败这个邪恶的生物.";
	next;
	mes "[100年前一位剑士留下来的记录]";
	mes "我的职责从现在开始就转到了那位将取代我的人身上...";
	next;
	mes "怎么会是这样...";
	mes "变成老太太的食月暴龙捏造了这则谎言,";
	mes "是为了向剑士复仇.";
	mes "这么多年来, 谎言竟变成了传说.";
	next;
	mes "我知道了,";
	mes "食月暴龙只是一只嗜血的怪兽.";
	mes "我必须把我所知道的,";
	mes "告诉马来亚的^0000FF对传说灵光的老人^000000.";
	return;
}

malaya,304,100,4	script	老人的孙女	4_F_BARYO_GIRL,{
	if (malaya_hi < 20) {
		mes "- 看起来她对你很警惕. -";
		close;
	}
	if (malaya_bakona1 == 0) {
		mes "[老人的孙女]";
		mes "我的外公";
		mes "他一直相信";
		mes "食月暴龙会变好的.";
		mes "你认为这可能吗?";
		close;
	} else if (malaya_bakona1 == 1) {
		mes "[老人的孙女]";
		mes "^FF0000石板之碎片^000000?";
		mes "你为什么需要这个?";
		mes "它都被损坏的面目全非了啊.";
		mes "想要的话我就给你吧.";
		next;
		mes "既然拿到了石板之碎片,";
		mes "就去找^FF0000对传说灵光的老人^000000吧.";
		mes "现在就去.";
		erasequest 1174;
		setquest 1175;
		set malaya_bakona1,2;
		close;
	} else if (malaya_bakona1 == 2) {
		mes "[老人的孙女]";
		mes "拿好这个石板之碎片,";
		mes "把它交给我的爷爷.";
		next;
		mes "既然拿到了石板之碎片,";
		mes "就去找^FF0000对传说灵光的老人^000000吧.";
		mes "现在就去.";
		close;
	} else {
		mes "[老人的孙女]";
		mes "因为食月暴龙的原因,";
		mes "整个村子都不得安宁.";
		close;
	}
}

malaya,286,269,4	script	生气的男人#bako2	4_M_BARYO_MAN,{
	if (malaya_hi < 20) {
		mes "- 看起来他对你很警惕. -";
		close;
	}
	mes "[生气的男人]";
	mes "让食月暴龙平静下来?";
	mes "你知道有多少人";
	mes "因为食月暴龙而牺牲了吗?";
	mes "如果到了最后, 我会靠我自己和它拼命的!";
	close;
}

malaya,276,269,5	script	平静的女人#bako2	4_F_BARYO_WOMAN,{
	if (malaya_hi < 20) {
		mes "- 看起来她对你很警惕. -";
		close;
	}
	mes "[平静的女人]";
	mes "和食月暴龙的战斗";
	mes "实在是太危险了.";
	mes "这样会激怒它,";
	mes "让小孩和老人都陷入危险.";
	close;
}

malaya,276,262,4	script	生气的男孩#bako2	4_M_BARYO_BOY,{
	if (malaya_hi < 20) {
		mes "- 看起来他对你很警惕. -";
		close;
	}
	mes "[生气的男孩]";
	mes "我失去了我的父亲和朋友";
	mes "就是因为食月暴龙.";
	mes "我会为他们报仇的!";
	close;
}

malaya,283,265,4	script	村长#bako2	4_BARYO_CHIEF,{
	if (checkweight(1301,3) == 0) {
		mes "你不能开始对话. 你的负重太大了. -";
		close;
	}
	if (BaseLevel < 120) {
		mes "[村长]";
		mes "我非?释有人来帮?";
		mes "但是你看起来";
		mes "实在是弱爆了.";
		next;
		mes "[村长]";
		mes "回去继续磨练吧,";
		mes "当你足够强大时,";
		mes "再来找我.";
		close;
	}
	if (malaya_hi < 20) {
		mes "- 他看起来对你很警惕. -";
		close;
	}
	if (malaya_bakona2 == 0) {
		if (malaya_bakona1 <= 5) {
			mes "[村长]";
			mes "对付食月暴龙有两种办法.";
			mes "一种是硬打,";
			mes "一种是献祭. 我拿不定主意.";
		} else {
			mes "[村长]";
			mes "那个传说只是一则谎言?";
			mes "看起来所有的村民";
			mes "直到现在都被那个邪恶的怪物所愚弄啊.";
			next;
			mes "[村长]";
		}
		mes "近段时间, 有更多的人";
		mes "被食月暴龙所伤害.";
		next;
		mes "[村长]";
		mes "有一些失踪的村民";
		mes "我找不到了";
		mes "因为我不确定他们只是迷路";
		mes "还是被食月暴龙杀害了.";
		next;
		mes "[村长]";
		mes "我听说那些失踪村民的一些遗物";
		mes "在 巴勒攸马西瓦哥 区域被找到了.";
		mes "请到那里去找^0000FF遗失的物品^000000,";
		mes "并把它们交给失踪村民的家人";
		mes "不管他们";
		mes "想要多少.";
		next;
		mes "[村长]";
		mes "^0000FF遗失的物品^000000";
		mes "据说被一个人保管着.";
		mes "他的名字叫^FF0000突克努克^000000, 他一直在 巴勒攸马西瓦哥 漂泊.";
		next;
		switch(select("自己搞定.:交给我吧.")) {
		case 1:
			mes "[村长]";
			mes "你让我想起了很多事情.";
			mes "马上离开.";
			close;
		case 2:
			mes "[村长]";
			mes "那就让我们开始吧,";
			mes "首先, 从突克努克那里拿到2个^FF0000遗失的物品^000000";
			mes "并把它们交给^0000FF失踪村民的父亲^000000";
			mes "记住了.";
			set malaya_bakona2,1;
			setquest 1180;
			close;
		}
	} else if (malaya_bakona2 == 1) {
		mes "[村长]";
		mes "从漂泊在 巴勒攸马西瓦哥 的突克努克那里,";
		mes "拿到2个^FF0000遗失的物品^000000";
		mes "并把它们交给^0000FF失踪村民的父亲^000000";
		mes "记住了.";
		close;
	} else if (malaya_bakona2 == 2) {
		mes "[村长]";
		mes "从 巴勒攸马西瓦哥 的突克努克那里, 拿到7个^FF0000遗失的物品^000000.";
		mes "并把它们交给^0000FF失踪村民的朋友^000000";
		mes "记住了.";
		close;
	} else if (malaya_bakona2 == 3) {
		mes "[村长]";
		mes "从 突克努克 那里, 拿到3个^FF0000遗失的物品^000000";
		mes "并把它们交给^0000FF失踪村民的儿子^000000";
		mes "记住了.";
		close;
	} else if (malaya_bakona2 == 4) {
		mes "[村长]";
		mes "从 突克努克 那里, 拿到5个^FF0000遗失的物品^000000";
		mes "并把它们交给^0000FF失踪村民的妈妈^000000";
		mes "记住了.";
		close;
	} else if (malaya_bakona2 == 5) {
		mes "[村长]";
		mes "那么就清楚了,";
		mes "所有失踪人口都已被食月暴龙杀死.";
		next;
		mes "[村长]";
		mes "杀死食月暴龙!";
		mes "让我们自己把怪物清除掉!";
		next;
		mes "[村长]";
		mes "看起来";
		mes "我们再无需用祭祀来稳定食月暴龙了.";
		next;
		mes "[村长]";
		mes "年青的算命师正在寻求你的帮助,";
		mes "据说月亮的能量看起来有些淡弱了.";
		erasequest 1184;
		setquest 1185;
		set malaya_bakona2,6;
//		if (IsPremiumPcCafe == 10)
			getitem 12700,7; //Insideout_Shirt
//		else
//			getitem 12700,5; //Insideout_Shirt
		close;
	} else if (malaya_bakona2 == 6) {
		mes "[村长]";
		mes "年青的算命师正在寻求你的帮助,";
		mes "据说月亮的能量看起来有些淡弱了.";
		close;
	} else if (malaya_bakona2 == 7) {
		mes "[村长]";
		mes "我知道很久以前";
		mes "月亮消失了这样可怕的事情发生过.";
		mes "我希望通过你的努力";
		mes "能让月亮恢复它本身的能量.";
		close;
	} else if (malaya_bakona2 == 8) {
		mes "[村长]";
		mes "我会跟年青的算命师打个招呼";
		mes "他会帮助你的.";
		mes "但是在这之前,";
		mes "有些事情你必须要先做了.";
		next;
		mes "[村长]";
		mes "我们不知道什么时候暴龙会来袭击,";
		mes "所以我们必须在村子周围设置好陷阱.";
		mes "包括入口或洞口.";
		next;
		mes "[村长]";
		mes "如果你能帮我们就太好了.";
		mes "我把几个工人";
		mes "派到了需设置陷阱的周围,";
		mes "你需要巡视5个地方.";
		next;
		switch(select("不行, 太累了.:妥妥儿的.")) {
		case 1:
			mes "[村长]";
			mes "你的这个决定意味着死亡离我们更近了.";
			mes "你这么轻易的就拒绝了";
			mes "把我们推向绝望...";
			next;
			mes "[村长]";
			mes "所谓的英雄...";
			close;
		case 2:
			mes "[村长]";
			mes "第一处陷阱,";
			mes "要设置在 巴勒攸马西瓦哥 区域.";
			mes "就在村子的入口. ^0000FF粗暴的工人^000000会在那里等你.";
			mes "他会帮到你的.";
			erasequest 1187;
			setquest 1188;
			set malaya_bakona2,9;
			close;
		}
	} else if (malaya_bakona2 == 9) {
		mes "[村长]";
		mes "第一处陷阱,";
		mes "要设置在 巴勒攸马西瓦哥 区域.";
		mes "就在村子的入口. ^0000FF粗暴的工人^000000会在那里等你.";
		mes "他会帮到你的.";
		close;
	} else if (malaya_bakona2 == 10) {
		mes "[村长]";
		mes "第二处陷阱";
		mes "要设置在";
		mes "连通 巴勒攸马西瓦哥 和 巴库湖泊的区域.";
		mes "^0000FF脾气暴躁的工人^000000会在那里等你,";
		mes "他会帮到你的.";
		close;
	} else if (malaya_bakona2 == 11) {
		mes "[村长]";
		mes "第三处陷阱";
		mes "要设置在巴库湖泊的入口处.";
		mes "^0000FF怯懦的工人^000000会在那里等你,";
		mes "他会帮到你的.";
		close;
	} else if (malaya_bakona2 == 12) {
		mes "[村长]";
		mes "第四处陷阱要设置在";
		mes "巴库湖泊入口处的附近区域.";
		mes "^0000FF沮丧的工人^000000会在那里等你.";
		mes "他会帮到你的.";
		close;
	} else if (malaya_bakona2 == 13) {
		mes "[村长]";
		mes "第5处陷阱也要设置在";
		mes "巴库湖泊入口处的附近区域.";
		mes "^0000FF伤感的工人^000000会在那里等你.";
		mes "他会帮到你的.";
		close;
	} else if (malaya_bakona2 == 14) {
		mes "[村长]";
		mes "看起来所有的陷阱都安排好了.";
		mes "如果能起作用的话,";
		mes "我们就有信心对抗食月暴龙了.";
		next;
		mes "[村长]";
		mes "这下好了,";
		mes "让我们和食月暴龙开打吧.";
		mes "请去攻打它的巢穴,";
		mes "会有用的.";
		erasequest 1193;
		set malaya_bakona2,15;
		getexp 1000000,600000;
//		if (IsPremiumPcCafe == 10)
			getitem 6497,7; //Lesser_Agimat
//		else
//			getitem 6497,5; //Lesser_Agimat
		close;
	} else if (malaya_bakona2 == 15) {
		mes "[村长]";
		if (malaya_bakona1 < 7) {
			mes "如果有机会的话,";
			mes "你能去拜访一下^0000FF对传说灵光的老人^000000吗?";
			mes "我想你也许会帮到他的.";
			next;
			mes "[村长]";
			mes "谢谢.";
		}
		mes "想想那么多的牺牲者吧.";
		mes "请打败食月暴龙,";
		mes "就算为他们报仇.";
		close;
	}
}

ma_fild01,1,1,0	script	malaya_ma_fild01_mon	-1,{
OnInit:
	enablenpc "malaya_ma_fild01_mon";
	donpcevent "malaya_ma_fild01_mon::OnEnable";
	end;

OnEnable:
	monster "ma_fild01",0,0,"Tiyanak",2314,5,"malaya_ma_fild01_mon::OnMyMobDead";
	initnpctimer;
	end;

OnDisable:
	stopnpctimer;
	killmonster "ma_fild01","malaya_ma_fild01_mon::OnMyMobDead";
	disablenpc "malaya_ma_fild01_mon";
	end;

OnTimer600000:
	killmonster "ma_fild01","malaya_ma_fild01_mon::OnMyMobDead";
	stopnpctimer;
	donpcevent "malaya_ma_fild01_mon::OnEnable";
	end;

OnMyMobDead:
	if (mobcount("ma_fild01","malaya_ma_fild01_mon::OnMyMobDead") < 5 && (malaya_bakona2 == 1 || malaya_bakona2 == 2 || malaya_bakona2 == 3 || malaya_bakona2 == 4))
		getitem 6520,1; //Lost_Belongings
	end;
}

malaya,269,267,5	script	Missing Person's Father	4_M_MALAYA,{
	if (malaya_hi < 20) {
		mes "- 看起来他对你很警惕. -";
		close;
	}
	if (malaya_bakona2 == 0) {
		mes "[失踪村民的爸爸]";
		mes "请帮帮我吧,";
		mes "找找我的孩子.";
		mes "食月暴龙不会伤害我的孩子.";
		mes "他一定就在某个地方.";
		close;
	} else if (malaya_bakona2 == 1) {
		if (countitem(6520) < 2) {
			mes "[失踪村民的爸爸]";
			mes "你这寻找两个^FF0000遗失的物品^000000?";
			mes "你的意思是...";
			mes "他已经死了?";
			close;
		}
		mes "[失踪村民的爸爸]";
		mes "这个... 是我们孩子的^FF0000遗失的物品^000000";
		mes "是这样了.";
		mes "怪兽还是抓到了他....";
		next;
		mes "这位父亲强忍着泪水, 让他一个人呆会儿吧.";
		mes "继续去找失踪村民的遗物吧.";
		mes "从突克努克那里拿到7个^FF0000遗失的物品^000000,";
		mes "突克努克就在巴勒攸马西瓦哥附近区域.";
		mes "然后把它们交给^0000FF失踪村民的朋友^000000.";
		delitem 6520,2; //Lost_Belongings
		erasequest 1180;
		setquest 1181;
		set malaya_bakona2,2;
		close;
	} else if (malaya_bakona2 == 2) {
		mes "[失踪村民的爸爸]";
		mes "我的儿啊... 我可怜的儿子啊...";
		next;
		mes "这位父亲强忍着泪水, 让他一个人呆会儿吧.";
		mes "继续去找失踪村民的遗物吧.";
		mes "从 巴勒攸马西瓦哥 附近区域的 突克努克 那里拿到7个^FF0000遗失的物品^000000,";
		mes "然后把它们交给^0000FF失踪村民的朋友^000000.";
		close;
	} else {
		mes "[失踪村民的爸爸]";
		mes "我的儿啊... 我可怜的儿子啊...";
		close;
	}
}

malaya,265,274,5	script	失踪村民的朋友	4_M_BARYO_BOY,{
	if (malaya_hi < 20) {
		mes "- 看起来他对你很警惕. -";
		close;
	}
	if (malaya_bakona2 < 2) {
		mes "[失踪村民的朋友]";
		mes "请帮助我";
		mes "找找我的朋友.";
		mes "我们正在一起打球,";
		mes "突然他就不见了.";
		next;
		mes "[失踪村民的朋友]";
		mes "我肯定他还活着,";
		mes "就在某个地方.";
		close;
	} else if (malaya_bakona2 == 2) {
		if (countitem(6520) < 7) {
			mes "[失踪村民的朋友]";
			mes "这么说, 你在找7件^FF0000遗失的物品^000000";
			mes "关于我朋友的?";
			mes "不, 他没有死!";
			close;
		}
		mes "[失踪村民的朋友]";
		mes "这是我给他的弹珠和玩具...";
		mes "这就是他的^FF0000遗失的物品^000000了";
		mes "我朋友在哪儿?";
		mes "把他带过来, 带过来啊, 现在就带来!";
		callsub L_Quest;
		delitem 6520,7; //Lost_Belongings
		erasequest 1181;
		setquest 1182;
		set malaya_bakona2,3;
		close;
	} else {
		mes "[失踪村民的朋友]";
		mes "我朋友在哪儿?";
		mes "把他带过来, 带过来啊, 现在就带来!";
		mes "我的朋友还活着,";
		mes "这不是真的~";
		if (malaya_bakona2 == 3)
			callsub L_Quest;
		close;
	}

L_Quest:
	next;
	mes "悄悄的离开痛哭着的男孩,";
	mes "继续去找失踪村民的遗物吧.";
	mes "从 突克努克 那里拿到3个^FF0000遗失的物品^000000.";
	mes "把它们交给^0000FF失踪村民的儿子^000000.";
	return;
}

malaya,270,278,4	script	失踪村民的儿子	4_M_BARYO_MAN,{
	if (malaya_hi < 20) {
		mes "- 看起来他对你很警惕. -";
		close;
	}
	if (malaya_bakona2 < 3) {
		mes "[失踪村民的儿子]";
		mes "食月暴龙伤害了我爸爸?";
		mes "我根本不能相信.";
		mes "请帮我找到爸爸吧!";
		close;
	} else if (malaya_bakona2 == 3) {
		if (countitem(6520) < 3) {
			mes "[失踪村民的儿子]";
			mes "你在找我爸爸的三个 ^FF0000遗失的物品^000000?";
			mes "为什么不找我爸爸本人呢?";
			mes "不, 那不可能, 他肯定还活着!";
			close;
		}
		mes "[失踪村民的儿子]";
		mes "这明显是他的衣服和鞋子...";
		mes "这是我爸爸的^FF0000遗失的物品^000000.";
		mes "噢天啊... 爸爸!";
		callsub L_Quest;
		delitem 6520,3; //Lost_Belongings
		erasequest 1182;
		setquest 1183;
		set malaya_bakona2,4;
		close;
	} else {
		mes "[失踪村民的儿子]";
		mes "为什么会这样....";
		if (malaya_bakona2 == 4)
			callsub L_Quest;
		close;
	}

L_Quest:
	next;
	mes "人们痛哭起来.";
	mes "继续去找失踪村民的遗物吧.";
	mes "从 突克努克 那里拿到5个^FF0000遗失的物品^.";
	mes "并把它们交给^0000FF失踪村民的妈妈^000000.";
	return;
}

malaya,265,284,4	script	失踪村民的妈妈	4_F_BARYO_WOMAN,{
	if (malaya_hi < 20) {
		mes "- 看起来对你很警惕. -";
		close;
	}
	if (malaya_bakona2 < 4) {
		mes "[失踪村民的妈妈]";
		mes "请帮我找到孩子吧.";
		mes "我让她出去做些杂活,";
		mes "她到现在还没有回来.";
		close;
	} else if (malaya_bakona2 == 4) {
		if (countitem(6520) < 5) {
			mes "[失踪村民的妈妈]";
			mes "你在找她的5个^FF0000遗失的物品^000000?";
			mes "什么意思?";
			mes "你是说我的孩子死了吗?";
			close;
		}
		mes "[失踪村民的妈妈]";
		mes "这是她的梳子.";
		mes "你怎么会有她的5个^FF0000遗失的物品^000000?";
		mes "为什么...? 她... 死了吗?";
		next;
		mes "[失踪村民的妈妈]";
		mes "等等... 我想我听到了她的声音.";
		mes "她就快要回家了. 我也要马上回家.";
		mes "我要为她准备晚餐了. 她一定饿了.";
		mes "哈哈...";
		next;
		mes "一位妈妈就这样疯了...";
		mes "既然完成了寻找失踪村民的任务,";
		mes "我应该回去向村长报告了.";
		delitem 6520,5; //Lost_Belongings
		erasequest 1183;
		setquest 1184;
		set malaya_bakona2,5;
		close;
	} else {
		mes "[失踪村民的妈妈]";
		mes "哈哈哈... 我听到了我的孩子的声音,";
		mes "仔细听听.";
		mes "你难道没有听见她在叫着妈妈吗?";
		mes "哈哈哈...";
		next;
		mes "一位妈妈就这样疯了...";
		if (malaya_bakona2 == 5) {
		mes "既然完成了寻找失踪村民的任务,";
		mes "我应该回去向村长报告了.";
		}
		close;
	}
}

malaya,289,364,4	script	年青的算命师	4_F_MALAYA,{
	if (checkweight(1301,3) == 0) {
		mes "不能开始交谈, 你的负重太大了. -";
		close;
	}
	if (malaya_hi < 20) {
		mes "- 看起来他对你很警惕. -";
		close;
	}
	if (malaya_bakona2 < 6) {
		mes "[年青的算命师]";
		mes "月亮的能量正在变弱.";
		mes "怪物愈来愈多,";
		mes "牺牲者也愈来愈多,";
		mes "都是这个原因.";
		close;
	} else if (malaya_bakona2 == 6) {
		mes "[年青的算命师]";
		mes "这些天月亮的能量正在变弱.";
		mes "怪物愈来愈多,";
		mes "死去的人也愈来愈多, 我想这就是原因了.";
		next;
		mes "[年青的算命师]";
		mes "我想举行一个仪式,";
		mes "可以通过怪物的血来为月亮重新灌注能量,";
		mes "所以我需要你杀死15只^FF0000邪魔马^000000";
		mes "就在巴勒攸马西瓦哥区域.";
		next;
		switch(select("关我攀.:算我一个.")) {
		case 1:
			mes "[年青的算命师]";
			mes "你太自私了!";
			mes "举行仪式时,";
			mes "我会诅咒你的.";
			close;
		case 2:
			mes "[年青的算命师]";
			mes "那就快点儿吧.";
			mes "如果月亮完全消失了,";
			mes "就将会有一场大的瘟疫.";
			erasequest 1185;
			setquest 1186;
			set malaya_bakona2,7;
			close;
		}
	} else if (malaya_bakona2 == 7) {
		if (checkquest(1186,HUNTING) == 2) {
			mes "[年青的算命师]";
			mes "我想你很好的对付了^FF0000邪魔马^000000";
			mes "不错啊.";
			mes "我想现在可以开始仪式了.";
			mes "我们还需要一些物品,";
			mes "去找村长帮忙吧.";
			erasequest 1186;
			setquest 1187;
			set malaya_bakona2,8;
//			if (IsPremiumPcCafe == 10)
				getitem 12699,7; //Tikbalang_Belt
//			else
//				getitem 12699,5; //Tikbalang_Belt
			close;
		} else {
			mes "[年青的算命师]";
			mes "我需要你杀死15只^FF0000邪魔马^000000.";
			mes "就在巴勒攸马西瓦哥区域.";
			next;
			mes "[年青的算命师]";
			mes "那就快点儿吧.";
			mes "如果月亮完全消失了,";
			mes "就将会有一场大的瘟疫.";
			close;
		}
	} else if (malaya_bakona2 == 8) {
		mes "[年青的算命师]";
			mes "我想现在可以开始仪式了.";
			mes "我们还需要一些物品,";
			mes "去找村长帮忙吧.";
		close;
	} else {
		mes "[年青的算命师]";
		mes "当月亮完全消失的那天,";
		mes "暴龙就会袭击村庄.";
		mes "没有人会幸免.";
		close;
	}
	end;
}

ma_fild01,54,253,4	script	粗暴的工人#bako2	4_M_MALAYA,{
	if (malaya_bakona2 < 9) {
		mes "[粗暴的工人]";
		mes "村长让我在这里";
		mes "等着你.";
		close;
	} else if (malaya_bakona2 == 9) {
		mes "[粗暴的工人]";
		mes "陷阱会在前面设置好.";
		mes "向前走一点儿.";
		close;
	} else if (malaya_bakona2 == 10) {
		mes "[粗暴的工人]";
		mes "你可以找到";
		mes "那个脾气暴燥的工人,";
		mes "就在 巴勒攸马西瓦哥 和 巴库湖泊 连接区域的附近.";
		mes "一起去设置陷阱吧.";
		close;
	} else {
		mes "[粗暴的工人]";
		mes "你是要提醒所有人,";
		mes "这里有一处陷阱吗? 让开.";
		close;
	}
	end;
}

ma_fild01,54,244,0	script	#bako2	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (malaya_bakona2 == 9) {
		mes "我会在这里";
		mes "设置好陷阱.";
		next;
		mes "[粗暴的工人]";
		mes "像这样的使用工具,";
		mes "啪啪啪!";
		next;
		mes "啪啪啪!";
		next;
		mes "陷阱设置好了.";
		next;
		mes "[粗暴的工人]";
		mes "你可以找到";
		mes "那个脾气暴燥的工人,";
		mes "就在 巴勒攸马西瓦哥 和 巴库湖泊 连接区域的附近.";
		mes "一起去设置陷阱吧.";
		erasequest 1188;
		setquest 1189;
		set malaya_bakona2,10;
		close;
	} else if (malaya_bakona2 == 10) {
		mes "这里设置好陷阱了.";
		next;
		mes "[粗暴的工人]";
		mes "陷阱不是为了抓你的,";
		mes "所以, 走开吧.";
		next;
		mes "[粗暴的工人]";
		mes "你可以找到";
		mes "那个脾气暴燥的工人,";
		mes "就在 巴勒攸马西瓦哥 和 巴库湖泊 连接区域的附近.";
		mes "去找他吧.";
		close;
	}
	end;
}

ma_fild01,236,119,5	script	脾气暴燥的工人#bako2	4_M_BARYO_BOY,{
	if (malaya_bakona2 < 10) {
		mes "[脾气暴燥的工人]";
		mes "村长让我在这里";
		mes "等着你的到来.";
		mes "真无聊啊!";
		close;
	} else if (malaya_bakona2 == 10) {
		mes "[脾气暴燥的工人]";
		mes "这前面要挖一个洞吗?";
		mes "我也要挖?";
		mes "谁说的?";
		close;
	} else if (malaya_bakona2 == 11) {
		mes "[脾气暴燥的工人]";
		mes "去找那个怯懦的工人,";
		mes "他就在巴库湖泊入口的附近.";
		mes "赶紧的!";
		close;
	} else {
		mes "[脾气暴燥的工人]";
		mes "我设置好了陷阱,";
		mes "你却在这儿跟个标识牌一样.";
		mes "停下来!";
		close;
	}
}

ma_fild01,242,116,0	script	#bako3	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (malaya_bakona2 == 10) {
		mes "我应该在这里";
		mes "设置好陷阱.";
		next;
		mes "[脾气暴燥的工人]";
		mes "我真讨厌这里!";
		mes "...";
		mes "用这个镐头不停的,";
		mes "挖 挖 挖!";
		next;
		mes "挖 挖 挖!";
		next;
		mes "陷阱设置好了.";
		next;
		mes "[脾气暴燥的工人]";
		mes "去找怯懦的工人吧";
		mes "就在巴库湖泊入口的附近.";
		mes "赶紧的!";
		erasequest 1189;
		setquest 1190;
		set malaya_bakona2,11;
		close;
	} else if (malaya_bakona2 == 11) {
		mes "这里的陷阱设置好了.";
		next;
		mes "[脾气暴燥的工人]";
		mes "你准备试试陷阱的威力吗?";
		mes "用你的肉体?";
		mes "走远些!";
		next;
		mes "[脾气暴燥的工人]";
		mes "去找怯懦的工人吧";
		mes "就在巴库湖泊入口的附近.";
		mes "赶紧的!";
		close;
	}
	end;
}

ma_scene01,177,89,4	script	怯懦的工人#bako2	4_M_BARYO_MAN,{
	if (malaya_bakona2 < 11) {
		mes "[怯懦的工人]";
		mes "村长...";
		mes "让我在这里等你.";
		mes "为什么是我? 我有不好的预感...";
		close;
	} else if (malaya_bakona2 == 11) {
		mes "[怯懦的工人]";
		mes "在这前面设置一处陷阱?";
		mes "村长说我也必须要帮忙?";
		mes "你...能自己做吗?";
		close;
	} else if (malaya_bakona2 == 12) {
		mes "[怯懦的工人]";
		mes "上去你就会找到";
		mes "一位沮丧的工人.";
		mes "去吧! 你吓到我了.";
		mes "看起来你像要打我的样子...";
		close;
	} else {
		mes "[怯懦的工人]";
		mes "快走吧!";
		mes "如果因为你";
		mes "食月暴龙出现了呢?";
		mes "我好怕啊!";
		close;
	}
	end;
}

ma_scene01,179,85,0	script	#bako4	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (malaya_bakona2 == 11) {
		mes "我应该在这里";
		mes "设置好陷阱.";
		next;
		mes "[怯懦的工人]";
		mes "这儿没有什么奇怪的东西";
		mes "埋在这里吧?";
		mes "...";
		mes "用铲子, 挖 挖 挖!";
		next;
		mes "挖 挖 挖!";
		next;
		mes "陷阱设置好了.";
		next;
		mes "[怯懦的工人]";
		mes "上去你就会找到";
		mes "那个沮丧的的工人.";
		erasequest 1190;
		setquest 1191;
		set malaya_bakona2,12;
		close;
	} else if (malaya_bakona2 == 12) {
		mes "这儿的陷阱已经设置好了.";
		next;
		mes "[怯懦的工人]";
		mes "快点儿让开!";
		mes "食月暴龙会发现这是一个陷阱的,";
		mes "它会抓住我们的.";
		next;
		mes "[怯懦的工人]";
		mes "上去你就会找到";
		mes "那个沮丧的的工人.";
		emotion ET_SWEAT,1;
		close;
	}
	end;
}

ma_scene01,141,118,4	script	沮丧的工人#bako2	4_M_MALAYA,{
	if (malaya_bakona2 < 12) {
		mes "[沮丧的工人]";
		mes "村长让我在这里等你.";
		mes "他一定想让我做什么事情.";
		mes "唉...";
		close;
	} else if (malaya_bakona2 == 12) {
		mes "[沮丧的工人]";
		mes "在左边设置一处陷阱?";
		mes "我不认为这有什么用处...";
		mes "唉, 早知道我就不在这儿了...";
		close;
	} else if (malaya_bakona2 == 13) {
		mes "[沮丧的工人]";
		mes "我们都会被食月暴龙杀死的.";
		mes "现在做这些毫无意义.";
		mes "沿路向上走, 你就会找到";
		mes "伤感的工人.";
		close;
	} else {
		mes "[沮丧的工人]";
		mes "食月暴龙会杀掉我们的.";
		mes "毫无意义的工作...";
		close;
	}
	end;
}

ma_scene01,138,122,0	script	#bako5	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (malaya_bakona2 == 12) {
		mes "我应该在这里";
		mes "设置好陷阱.";
		next;
		mes "[沮丧的工人]";
		mes "接住这张网,";
		mes "扔 扔!";
		next;
		mes "扔 扔!";
		next;
		mes "陷阱设置好了.";
		next;
		mes "[沮丧的工人]";
		mes "沿路向上走, 你就会找到";
		mes "伤感的工人.";
		mes "尽管我担心没有一点儿作用.";
		erasequest 1191;
		setquest 1192;
		set malaya_bakona2,13;
		close;
	} else if (malaya_bakona2 == 13) {
		mes "陷阱设置好了.";
		next;
		mes "[沮丧的工人]";
		mes "陷阱是没有意义的.";
		mes "看到了吗? 它根本不起作用.";
		close;
	}
	end;
}

ma_scene01,175,170,5	script	伤感的工人#bako2	4_M_BARYO_MAN,{
	if (malaya_bakona2 < 13) {
		mes "[伤感的工人]";
		mes "村长让我在这里等你.";
		mes "有什么提神的消息吗?";
		mes "我的心脏跳的好快~";
		close;
	} else if (malaya_bakona2 == 13) {
		mes "[伤感的工人]";
		mes "噢! 这么说, 我们会一起努力,";
		mes "在这后面设置一处陷阱吗?";
		mes "太好了!";
		mes "这是全世界最有趣的事情了!";
		close;
	} else if (malaya_bakona2 == 14) {
		mes "[伤感的工人]";
		mes "陷阱设置好了,";
		mes "我们要向村长报告吗?";
		mes "太有趣了!";
		mes "听起来我就湿了啊!";
		close;
	} else {
		mes "[伤感的工人]";
		mes "我想到的愈多, 我兴奋就愈大.";
		mes "我悄悄的保护陷阱!";
		mes "我想听到尖叫.";
		mes "我前面有一处陷阱啊! 哇哈哈哈哈~";
		emotion ET_PROFUSELY_SWEAT,1;
		close;
	}
	end;
}

ma_scene01,171,174,0	script	#bako6	HIDDEN_WARP_NPC,2,2,{
	end;
OnTouch:
	if (malaya_bakona2 == 13) {
		mes "我应该在这里";
		mes "设置好陷阱.";
		next;
		mes "[伤感的工人]";
		mes "哇! 这里若要设置陷阱的话,";
		mes "简直太完美了.";
		mes "我将要扔出绳子!";
		mes "去吧, 绳子!";
		next;
		mes "去吧, 绳子!";
		next;
		mes "陷阱设置好了.";
		mes "去找村长吧,";
		mes "陷阱都设置完成了.";
		erasequest 1192;
		setquest 1193;
		set malaya_bakona2,14;
		close;
	} else if (malaya_bakona2 == 14) {
		mes "陷阱设置好了.";
		next;
		mes "[伤感的工人]";
		mes "先试用一下陷阱!";
		mes "我很好奇";
		mes "会发生什么!";
		mes "这太有趣啦!";
		close;
	}
	end;
}

// Original name: "Bakonawa Introduction Quest Helper#bako1"
sec_in02,10,16,5	script	Bakonawa Intro Helper	4_MASK_SMOKEY,{
	if (callfunc("F_GM_NPC",1854,0) < 1) {
		mes "海鲜和黑豆酱面条!";
		close;
	}
	mes "[Briquet Scheme]";
	mes "大胆告诉我吧,";
	mes "你到底想要什么!";
	next;
	switch(select("重置所有任务:在第一个任务结束之前:重置非主线任务:分配遗物:狩猎任务后")) {
	case 1:
		mes "完成了!";
		set malaya_bakona1,0;
		set malaya_bakona2,0;
		for(set .@i,1174; .@i<=1193; set .@i,.@i+1) {
			if (checkquest(.@i) > -1)
				erasequest .@i;
		}
		close;
	case 2:
		mes "[Briquet Scheme]";
		mes "好了!";
		set malaya_bakona1,6;
		for(set .@i,1174; .@i<=1178; set .@i,.@i+1) {
			if (checkquest(.@i) > -1)
				erasequest .@i;
		}
		setquest 1179;
		close;
	case 3:
		mes "[Briquet Scheme]";
		mes "好了!";
		set malaya_bakona2,0;
		for(set .@i,1180; .@i<=1193; set .@i,.@i+1) {
			if (checkquest(.@i) > -1)
				erasequest .@i;
		}
		close;
	case 4:
		mes "[Briquet Scheme]";
		mes "好了!";
		getitem 6520,17; //Lost_Belongings
		close;
	case 5:
		mes "[Briquet Scheme]";
		mes "好了!";
		set malaya_bakona2,8;
		setquest 1187;
		for(set .@i,1178; .@i<=1193; set .@i,.@i+1) {
			if (checkquest(.@i) > -1)
				erasequest .@i;
		}
		close;
	}
}

// Nurse in Port Malaya :: malaya_bang
//============================================================
function	script	F_Malaya_Nurse	{
	if (malaya_bang == 30) {
		mes "[护士 赖斯]";
		mes "护身符?";
		mes "我觉的你应该找找其它的东西.";
		cutin "malaya_nurseA01",2;
		callsub L_Warp, getarg(0);
	} else if (malaya_bang == 31) {
		mes "[护士 赖斯]";
		mes "一个护身符和一个人?";
		cutin "malaya_nurseA01",2;
		next;
		mes "[护士 赖斯]";
		mes "我的确看到了一个护身符但是我并没有走近, 因为我感觉不太对劲儿.";
		next;
		mes "[护士 赖斯]";
		mes "噢!";
		mes "说起护身符, 那个老太太不是知道吗, 因为她在村子周围放了些什么东西.";
		mes "我想问问她就对了.";
		set malaya_bang,32;
		changequest 11303,11304;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 32) {
		mes "[护士 赖斯]";
		mes "噢!";
		mes "说起护身符, 那个老太太不是知道吗, 因为她在村子周围放了些什么东西.";
		mes "我想问问她就对了.";
		cutin "malaya_nurseA01",2;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 33) {
		mes "[护士 赖斯]";
		mes "一位萨满... 最好我们能遇到她.";
		cutin "malaya_nurseA01",2;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 34) {
		mes "[护士 赖斯]";
		mes "噢!";
		mes "你一定已经遇到她了.";
		mes "我感到了一种强大的力量...";
		cutin "malaya_nurseA01",2;
		next;
		select("告诉她关于护身符的事儿.");
		mes "[护士 赖斯]";
		mes "好的!";
		mes "我想到了.";
		mes "不如把护身符插在我们在二楼门上看到的那个上面, 怎么样?";
		emotion ET_AHA;
		next;
		mes "[护士 赖斯]";
		mes "或许可以抵挡那里散发出来的不怀好意的气息.";
		set malaya_bang,35;
		changequest 11306,11307;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 35) {
		mes "[护士 赖斯]";
		mes "好的!";
		mes "我想到了.";
		mes "不如把护身符插在我们在二楼门上看到的那个上面, 怎么样?";
		emotion ET_AHA;
		cutin "malaya_nurseA01",2;
		next;
		mes "[护士 赖斯]";
		mes "或许可以抵挡那里散发出来的不怀好意的气息.";
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 36) {
		callsub L_Weight;
		mes "[护士 赖斯]";
		mes "*唉*...";
		mes "当你站在我后面的时候, 感觉很奇怪....";
		cutin "malaya_nurseB",2;
		next;
		mes "[护士 赖斯]";
		mes "我以为你不会做这样的事情.";
		emotion ET_THINK;
		next;
		mes "[护士 赖斯]";
		mes "在被赶出来之前, 我们正准备进入恶梦死神的房间...";
		next;
		switch(select("恶梦死神?:护士 赖斯?")) {
		case 1:
			callsub L_Bangungot;
			select("护士 赖斯");
			callsub L_Maenne;
			break;
		case 2:
			callsub L_Maenne;
			select("恶梦死神");
			callsub L_Bangungot;
			break;
		}
		callsub L_Incomplete;
		set malaya_bang,42;
		changequest 11308,11309;
		callsub L_Reward;
		callsub L_Warp, getarg(0), 1;
	} else if (malaya_bang == 40) {
		callsub L_Weight;
		if (checkquest(11309,HUNTING) == 2) {
			callsub L_Complete;
			set malaya_bang,41;
			completequest 11309;
			callsub L_Reward;
			callsub L_Warp, getarg(0), 1;
		} else {
			callsub L_Incomplete;
			set malaya_bang,42;
			callsub L_Reward;
			callsub L_Warp, getarg(0);
		}
	} else if (malaya_bang > 40) {
		if (malaya_bang == 42) {
			if (checkquest(11309,HUNTING) == 2) {
				callsub L_Complete;
				set malaya_bang,41;
				completequest 11309;
				callsub L_Warp, getarg(0), 1;
			} else {
				callsub L_Incomplete;
				callsub L_Warp, getarg(0);
			}
		}
		callsub L_Incomplete;
		switch(getarg(0)) {
		case 1:
			next;
			switch(select("进入医院.:退出.")) {
			case 1:
				callsub L_Warp, getarg(0);
			case 2:
				mes "[护士 赖斯]";
				mes "嗯...";
				close2;
				cutin "",255;
				end;
			}
		case 2:
			callsub L_Warp, getarg(0);
		}
	}
	return;

L_Weight:
	if (checkweight(1201,1) == 0) {
		mes "- 慢着 !! -";
		mes "- 你的负重太大了. -";
		mes "- 不能再接收物品. -";
		mes "- 请先清理你的物品栏, -";
		mes "- 再过来吧. -";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "- 慢着 !! -";
		mes "- 你的负重太大了. -";
		mes "- 不能再接收物品. -";
		mes "- 请先清理你的物品栏, -";
		mes "- 再过来吧. -";
		close;
	}
	return;

L_Warp:
	switch(getarg(0)) {
	case 1:
		close2;
		cutin "",255;
		if (getarg(1,0) == 0)
			warp "ma_dun01",33,110;
		end;
	case 2:
		next;
		switch(select("到外面去.:取消.")) {
		case 1:
			close2;
			cutin "",255;
			warp "malaya",58,76;
			end;
		case 2:
			mes "[护士 赖斯]";
			mes "哼...";
			close2;
			cutin "",255;
			end;
		}
	}

L_Reward:
//	if (IsPremiumPcCafe == 10) {
		getitem 6499,5; //Ancient_Grudge
		getitem 6497,10; //Lesser_Agimat
//	} else {
//		getitem 6499,3; //Ancient_Grudge
//		getitem 6497,5; //Lesser_Agimat
//	}
	getitem 617,1; //Old_Violet_Box
	getexp 1000000,0;
	return;

L_Bangungot:
	mes "[护士 赖斯]";
	mes "漫游在医院里的是个不怀好意的怪兽.";
	next;
	mes "[护士 赖斯]";
	mes "嗯...";
	mes "准确的说, 它不是一只怪兽....";
	mes "它更像诅咒和疾病...";
	next;
	mes "[护士 赖斯]";
	mes "有一个传闻, 说它原来曾是一只森林精灵.";
	next;
	mes "[护士 赖斯]";
	mes "不管如何, 现在的事实是它杀死了医院的病人并将他们变成了怪物.";
	next;
	return;

L_Maenne:
	mes "[护士 赖斯]";
	mes "我?";
	mes "正如你所看到的, 我是新来的护士.";
	mes "我是一个专门处理此类事件的护士, 而不是照看病人.";
	cutin "malaya_nurseB",2;
	next;
	mes "[护士 赖斯]";
	mes "噢!";
	mes "恶梦死神曾装扮成了我?";
	next;
	mes "[护士 赖斯]";
	mes "我看出来它给你带来了很大的麻烦.";
	mes "它真是一只机智的怪物啊.";
	next;
	mes "[护士 赖斯]";
	mes "简单的说, 我负责处理医院周围的非自然现象.";
	next;
	mes "[护士 赖斯]";
	mes "世界之大, 无奇不有啊.";
	next;
	return;

L_Complete:
	mes "[护士 赖斯]";
	mes "它可能已在这里扎根, 并扎的比我想象的更深.";
	mes "我能感觉到它的气息.";
	cutin "malaya_nurseB",2;
	next;
	mes "[护士 赖斯]";
	mes "你所杀死的只是它的一部分...";
	mes "但是, 你打击了她的作用也是很明显的.";
	next;
	mes "[护士 赖斯]";
	mes "它让事情变得简单些了.";
	mes "谢谢你.";
	return;

L_Incomplete:
	mes "[护士 赖斯]";
	mes "如果它从它的本体剥离了一部分, 事情会变得简单些, 但是它现在又回到了房间, 这就有点儿棘手了.";
	cutin "malaya_nurseB",2;
	next;
	mes "[护士 赖斯]";
	mes "当然了, 你不能置身事外的, 因为你打乱了我的工作并且又把它放回了房间.";
	next;
	mes "[护士 赖斯]";
	mes "如果你能上到二楼, 我会帮你开一扇通往它房间的小门.";
	mes "之后, 它就交给你了.";
	return;
}

malaya,55,72,4	script	护士#ma_n1	4_F_NURSE,{
	if (malaya_hi < 20) {
		mes "[护士]";
		mes "这个村子的村民对外地人都很警惕.";
		emotion ET_ANGER;
		cutin "malaya_nurseA01",2;
		next;
		mes "[护士]";
		mes "我知道这肯定有什么原因, 但是我更愿意他们告诉我怎么才能更亲近一些...";
		close2;
		cutin "",255;
		end;
	}
	if (BaseLevel < 100) {
		mes "那儿有一个拎着大包的护士站在医院外面.";
		mes "我想我帮不了她.";
		close;
	}
	if (malaya_bang == 0) {
		mes "[护士]";
		mes "嘿, 稍等一下.";
		mes "你准备进去吗?";
		cutin "malaya_nurseA01",2;
		next;
		switch(select("是的.:不进去.")) {
		case 1:
			mes "[护士]";
			mes "噢~";
			mes "我太高兴了!";
			mes "我一直在等着有什么人从这里路过.";
			cutin "malaya_nurseA02",2;
			next;
			switch(select("关于医院:留住我的原因:不理她.")) {
			case 1:
				mes "[护士]";
				mes "这是城里唯一的一所医院.";
				mes "这将是我的新的工作.";
				cutin "malaya_nurseA03",2;
				next;
				mes "[护士]";
				mes "我听说这刚修建不久, 但是看起来毛骨悚然....";
				emotion ET_SWEAT;
				next;
				mes "[护士]";
				mes "当我刚来这里时, 我也很奇怪.";
				mes "好像处处都透露出关闭的信息!";
				next;
				select("留住我的原因.");
				mes "[护士]";
				mes "他们告诉我城里需要护士,";
				mes "所以在跑了很多地方以后我来到了这里.";
				next;
				mes "[护士]";
				mes "我听说她们对外地人都很警惕...";
				next;
				mes "[护士]";
				mes "就让我一个人来了, 欢迎我的连一个鬼影都没有!";
				mes "太糟糕了!";
				emotion ET_CRY;
				next;
				mes "[护士]";
				mes "更过份的是, 我一直在这里面对着这个恐怖的上了锁的医院!";
				next;
				break;
			case 2:
				mes "[护士]";
				mes "他们告诉我城里需要护士,";
				mes "所以在跑了很多地方以后我来到了这里.";
				cutin "malaya_nurseA03",2;
				next;
				mes "[护士]";
				mes "我听说她们对外地人都很警惕...";
				next;
				mes "[护士]";
				mes "就让我一个人来了, 欢迎我的连一个鬼影都没有!";
				mes "太糟糕了!";
				emotion ET_CRY;
				next;
				mes "[护士]";
				mes "更过份的是, 我一直在这里面对着这个恐怖的上了锁的医院!";
				next;
				select("关于医院");
				mes "[护士]";
				mes "这是城里唯一的一所医院.";
				mes "这将是我的新的工作.";
				next;
				mes "[护士]";
				mes "我听说这刚修建不久, 但是看起来毛骨悚然....";
				emotion ET_SWEAT;
				next;
				mes "[护士]";
				mes "当我刚来这里时, 我也很奇怪.";
				mes "好像处处都透露出关闭的信息!";
				next;
				break;
			case 3:
				mes "[护士]";
				mes "是的, 你肯定很忙.";
				mes "好吧.";
				mes "我不打扰你了.";
				mes "别管我了. *啜泣*";
				emotion ET_CRY;
				cutin "malaya_nurseA03",2;
				close2;
				cutin "",255;
				end;
			}
			break;
		case 2:
			mes "[护士]";
			mes "噢, 我懂了...";
			emotion ET_CRY;
			close2;
			cutin "",255;
			end;
		}
		mes "[护士]";
		mes "刚才你说... 如果你要进去的话, 能带上我吗?";
		cutin "malaya_nurseA04",2;
		next;
		mes "[护士]";
		mes "门是锁上的!";
		mes "我的包太重了!";
		mes "我的腿都累软了.";
		cutin "malaya_nurseA03",2;
		next;
		mes "[护士]";
		mes "早知道是这么回事儿, 我就不穿成这个样子了... *哼*";
		emotion ET_CRY;
		next;
		switch(select("帮她.:不管她.")) {
		case 1:
			mes "[护士]";
			mes "*啜泣*";
			mes "我就知道世上自有真情在.";
			mes "你太好了.";
			emotion ET_CRY;
			next;
			mes "[护士 赖斯]";
			mes "我叫 '赖斯', 我被派到这个医院工作.";
			mes "看现在这个样子, 我估计我快要失业了...";
			next;
			mes "[护士 赖斯]";
			mes "让我们进去吧.";
			next;
			mes "[护士 赖斯]";
			mes "在这之前....";
			mes "你能找些什么东西把我的脚缠上吗? 我穿不上鞋了因为我脚上磨起了水泡.";
			emotion ET_HELP;
			cutin "malaya_nurseA04",2;
			next;
			mes "[护士 赖斯]";
			mes "2个腐烂绷带就可以了. 看起来也许有点脏, 但里面的液体有很好的疗伤效果.";
			set malaya_bang,1;
			setquest 11284;
			close2;
			cutin "",255;
			end;
		case 2:
			mes "[护士]";
			mes "是的, 你肯定很忙.";
			mes "好吧.";
			mes "我不会打扰你了.";
			mes "别管我了. *啜泣*";
			emotion ET_CRY;
			cutin "malaya_nurseA03",2;
			close2;
			cutin "",255;
			end;
		}
	} else if (malaya_bang == 1) {
		if (countitem(930) > 1) {
			mes "[护士 赖斯]";
			mes "噢......";
			mes "我知道有效果... 但没想到效果这么好.";
			cutin "malaya_nurseA01",2;
			next;
			mes "[护士 赖斯]";
			mes "腐烂绷带... 名字听起来和从木乃伊身上拿下来的胶布似的.";
			next;
			mes "[护士 赖斯]";
			mes "我对它另眼相看了, 从专业护士的角度!!";
			mes "我全好了, 没事儿了!!!";
			mes "耶!!";
			next;
			mes "[护士 赖斯]";
			mes "*咯吱~*";
			mes "*嘎吱~~*";
			delitem 930,2; //Rotten_Bandage
			set malaya_bang,2;
			close2;
			cutin "",255;
			end;
		} else {
			mes "[护士 赖斯]";
			mes "在这之前....";
			mes "你能找些什么东西把我的脚缠上吗? 我穿不上鞋了因为我脚上磨起了水泡.";
			emotion ET_HELP;
			cutin "malaya_nurseA03",2;
			next;
			mes "[护士 赖斯]";
			mes "2个腐烂绷带就可以了. 看起来也许有点脏, 但里面的液体有很好的疗伤效果.";
			close2;
			cutin "",255;
			end;
		}
	} else if (malaya_bang == 2) {
		mes "[护士 赖斯]";
		mes "呼...";
		mes "我的脚好多了, 但闻起来好奇怪啊.";
		cutin "malaya_nurseA01",2;
		next;
		mes "[护士 赖斯]";
		mes "噢...... 这种气味......";
		mes "我的新鞋要坏掉了...";
		emotion ET_PROFUSELY_SWEAT;
		next;
		mes "[护士 赖斯]";
		mes "好了!!!!!!";
		mes "我不知道是卡住了还是锁上了, 我们来一起推一次吧!";
		set malaya_bang,3;
		changequest 11284,11285;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 3) {
		mes "[护士 赖斯]";
		mes "好了!!!!!!";
		mes "我不知道是卡住了还是锁上了, 我们来一起推一次吧!";
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 4) {
		mes "["+strcharinfo(0)+"]";
		mes "我们又拉又推, 一点儿作用也没有.";
		emotion ET_PROFUSELY_SWEAT,1;
		next;
		mes "[护士 赖斯]";
		mes "奇怪了~";
		mes "他们应该不会把我派到一个关门倒闭的医院来啊.";
		cutin "malaya_nurseA03",2;
		next;
		mes "[护士 赖斯]";
		mes "嗯!";
		mes "完全不懂了!";
		emotion ET_FRET;
		next;
		mes "[护士 赖斯]";
		mes "我要和总部联系一下, 你帮我去询问一下市民好吗?";
		cutin "malaya_nurseA01",2;
		next;
		mes "[护士 赖斯]";
		mes "嘿, 为什么不从那边的小女孩开始呢?";
		mes "或许她会告诉你些什么事儿的.";
		set malaya_bang,5;
		changequest 11286,11287;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 5) {
		mes "[护士 赖斯]";
		mes "我要和总部联系一下, 你帮我去询问一下市民好吗?";
		cutin "malaya_nurseA01",2;
		next;
		mes "[护士 赖斯]";
		mes "嘿, 为什么不从那边的小女孩开始呢?";
		mes "或许她会告诉你些什么事儿的.";
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 6) {
		mes "[护士 赖斯]";
		mes "她都说了些什么?";
		emotion ET_QUESTION;
		cutin "malaya_nurseA02",2;
		next;
		select("告诉她小女孩说了些什么.");
		mes "[护士 赖斯]";
		mes "奇怪了.";
		mes "总部确认了我的确是被分配到这里的.";
		cutin "malaya_nurseA01",2;
		next;
		mes "[护士 赖斯]";
		mes "或许那个小女孩对这里不了解呢?";
		mes "总部不可能既把我派到这儿来又对我说谎. 你能再问问城里的其他人吗?";
		next;
		mes "[护士 赖斯]";
		mes "我会联系总部再详细问一下的.";
		mes "为什么不问问那边的那个男子呢?";
		mes "我肯定他知道些什么.";
		set malaya_bang,7;
		changequest 11288,11289;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 7) {
		mes "[护士 赖斯]";
		mes "我会联系总部再详细问一下的.";
		mes "为什么不问问那边的那个男子呢?";
		mes "我肯定他知道些什么.";
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 8) {
		mes "[护士 赖斯]";
		mes "一间旅馆?";
		mes "天啊!";
		mes "他们要是早点儿跟我说的话, 我也不会一直站在外面这么久了!";
		emotion ET_HNG;
		cutin "malaya_nurseA01",2;
		next;
		mes "[护士 赖斯]";
		mes "嗯......";
		mes "......";
		mes "......";
		next;
		mes "[护士 赖斯]";
		mes "嘿... 你知道吗...";
		next;
		mes "[护士 赖斯]";
		mes "因为我的脚的原因我想我哪儿也不能去了. 你能为我到旅馆跑一趟吗?";
		emotion ET_PROFUSELY_SWEAT;
		cutin "malaya_nurseA03",2;
		next;
		mes "[护士 赖斯]";
		mes "我不能把包放在其它地方, 所以我就呆着这里一边恢复一边看着周围的人吧.";
		next;
		mes "[护士 赖斯]";
		mes "不论如何我还要回到这里.";
		mes "谢谢.";
		set malaya_bang,9;
		changequest 11290,11291;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 9) {
		mes "[护士 赖斯]";
		mes "因为我的脚的原因我想我哪儿也不能去了. 你能为我到旅馆跑一趟吗?";
		emotion ET_PROFUSELY_SWEAT;
		cutin "malaya_nurseA03",2;
		next;
		mes "[护士 赖斯]";
		mes "我不能把包放在其它地方, 所以我就呆着这里一边恢复一边看着周围的人吧.";
		next;
		mes "[护士 赖斯]";
		mes "不论如何我还要回到这里.";
		mes "谢谢.";
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 10) {
		mes "[护士 赖斯]";
		mes "嘿~";
		mes "情况如何了?";
		cutin "malaya_nurseA02",2;
		next;
		select("把钥匙和信递过来.");
		mes "[护士 赖斯]";
		mes "钥匙?";
		mes "离我的目标更近一步了!";
		mes "我们马上把门打开吧!";
		set malaya_bang,11;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 11) {
		mes "[护士 赖斯]";
		mes "钥匙?";
		mes "离我的目标更近一步了!";
		mes "我们马上把门打开吧!";
		cutin "malaya_nurseA02",2;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 12) {
		mes "[护士 赖斯]";
		mes "太奇怪了~!";
		mes "门并没有锁上?";
		mes "这是怎么回事儿?????";
		mes "????";
		emotion ET_QUESTION;
		emotion ET_QUESTION,1;
		cutin "malaya_nurseA04",2;
		next;
		mes "[护士 赖斯]";
		mes "噢不!!!";
		mes "一切都乱了.";
		mes "或许我们该在这里等医生来.....";
		cutin "malaya_nurseA03",2;
		next;
		mes "[???]";
		mes "...";
		cutin "",255;
		next;
		mes "[???]";
		mes "*偷偷的笑*";
		emotion ET_QUESTION,1;
		emotion ET_QUESTION;
		next;
		mes "[???]";
		mes "嘿 "+((Sex)?"伙计":"小姐")+",";
		mes "别在医院里呆着啊.";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "谁在那里?!";
		next;
		mes "[???]";
		mes "*偷偷的笑*";
		next;
		mes "[???]";
		mes "这是个秘密~";
		mes "如果我妈妈知道我在这里的话, 会杀了我的!";
		next;
		switch(select("关于进入医院.:关于她妈妈.:关于 ???:退出.")) {
		case 1:
			mes "[???]";
			mes "几天前, 住在我们附近的一个老女人去了医院, 把一些棍子插在了地上.";
			next;
			mes "[???]";
			mes "她一直四处张望, 并且喃喃自语.";
			next;
			mes "[???]";
			mes "我在这里没被发现, 是因为我本来就没打算在这里的.";
			next;
			break;
		case 2:
			mes "[???]";
			mes "我妈妈曾经跟我说过.";
			mes "这个老女人的女儿曾在这里住院.";
			next;
			mes "[???]";
			mes "她女儿就再也没出来...";
			next;
			mes "[???]";
			mes "尽管在医院去世的不只她女儿一人. 医院里开始有很多奇怪的事情发生.";
			next;
			mes "[???]";
			mes "这就是妈妈不允许我到这里来的原因了.";
			next;
			break;
		case 3:
			mes "[???]";
			mes "约瑟, 不可能的!";
			mes "上次我在这儿被抓住了, 被狠狠的打了屁股的!";
			next;
			mes "[???]";
			mes "如果这次再被抓住了, 我的屁股就要开花了....";
			mes "我好害怕.";
			next;
			break;
		case 4:
			mes "[???]";
			mes "哼!!";
			close;
		}
		mes "声音好像是从医院入口处旁边的草丛里发出来的.";
		specialeffect EF_STEAL,AREA,"Bushes#ma";
		set malaya_bang,13;
		changequest 11293,11294;
		close;
	} else if (malaya_bang == 13) {
		mes "声音好像是从医院入口处旁边的草丛里发出来的.";
		mes "让我们来检查一下.";
		specialeffect EF_STEAL,AREA,"Bushes#ma";
		close;
	} else if (malaya_bang == 14) {
		mes "[护士 赖斯]";
		mes "嗯... 我们在医院四周看看.";
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 15) {
		mes "[护士 赖斯]";
		mes "嘿... 嘿...";
		mes "你知道...";
		mes "你能去看看那个老女人吗?";
		cutin "malaya_nurseA04",2;
		next;
		mes "[护士 赖斯]";
		mes "噢, 我? 我会在四周一直巡视的.";
		next;
		mes "[护士 赖斯]";
		mes "你知道的, 我的脚有问题...";
		mes "好吗?";
		mes "好吗?";
		next;
		switch(select("去.:不去.")) {
		case 1:
			mes "[护士 赖斯]";
			mes "好的, 你可以走了.";
			mes "我想她住在镇子的西边.";
			mes "快去吧.";
			next;
			mes "[护士 赖斯]";
			mes "嘿你在草丛里, 如果你不会家的话我会告发你的!";
			set malaya_bang,16;
			changequest 11296,11297;
			close2;
			cutin "",255;
			end;
		case 2:
			mes "[护士 赖斯]";
			mes "什么!?";
			mes "呆在这儿什么也别动.";
			close2;
			cutin "",255;
			end;
		}
	} else if (malaya_bang == 16 || malaya_bang == 17) {
		mes "[护士 赖斯]";
		mes "好的, 你可以走了.";
		mes "我想她住在镇子的西边.";
		mes "快去吧.";
		cutin "malaya_nurseA04",2;
		next;
		mes "[护士 赖斯]";
		mes "嘿你在草丛里, 如果你不会家的话我会告发你的!";
		emotion ET_HUK, getnpcid(0, "Bushes#ma");
		close2;
		cutin "",255;
		end;
	} else if (malaya_bang == 18) {
		mes "[护士 赖斯]";
		mes "怎么样了?";
		mes "见到那位老女人了吗?";
		cutin "malaya_nurseA02",2;
		next;
		mes "[护士 赖斯]";
		mes "顺便说一句, ["+strcharinfo(0)+"], 当你离开的时候, 我又试了试这个门.";
		mes "它打开了...";
		next;
		mes "[护士 赖斯]";
		mes "但是上第二层的路是封死的.";
		mes "我曾想门孔是一个突破, 但我没有成功.";
		cutin "malaya_nurseA03",2;
		next;
		mes "[护士 赖斯]";
		mes "不管如何, 一楼的门打开了, 让我们进去看看吧.";
		mes "如果通向二楼的门打不开的话, 一切都毫无意义了.";
		emotion ET_CRY;
		set malaya_bang,19;
		changequest 11299,11300;
		close2;
		cutin "",255;
		warp "ma_dun01",33,110;
		end;
	} else if (malaya_bang == 19) {
		mes "[护士 赖斯]";
		mes "不管如何, 一楼的门打开了, 让我们进去看看吧.";
		mes "如果通向二楼的门打不开的话, 一切都毫无意义了.";
		emotion ET_CRY;
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		warp "ma_dun01",33,110;
		end;
	} else if (malaya_bang < 30) {
		mes "[护士 赖斯]";
		mes "你能再去检查一下到二楼的门吗, 我怕我漏掉了什么?";
		cutin "malaya_nurseA01",2;
		close2;
		cutin "",255;
		warp "ma_dun01",33,110;
		end;
	} else {
		callfunc "F_Malaya_Nurse",1;
		end;
	}
	mes "那儿有一位拎着大包的护士站在医院门外.";
	mes "我想我帮不了她.";
	close;
}

ma_dun01,35,108,4	script	护士#ma_n2	4_F_NURSE,{
	if (malaya_bang < 19) {
		// fall through
	} else if (malaya_bang < 30) {
		if (malaya_bang == 19) {
			mes "就像那位老女人说的, 这个医院充斥着怪物.";
			mes "她的脚都成那样了, 怎么能又回来并且上到了二楼....";
			next;
			set malaya_bang,20;
			changequest 11300,11301;
		}
		mes "[护士 赖斯]";
		mes "你能再去检查一下到二楼的门吗, 我怕我漏掉了什么?";
		cutin "malaya_nurseA01",2;
		next;
		switch(select("到外面去.:取消.")) {
		case 1:
			close2;
			cutin "",255;
			warp "malaya",58,76;
			end;
		case 2:
			mes "[护士 赖斯]";
			mes "啧啧...";
			close2;
			cutin "",255;
			end;
		}
	} else {
		callfunc "F_Malaya_Nurse",2;
		end;
	}
	mes "[护士]";
	mes "我想一个人呆会儿.";
	mes "你走吧.";
	close2;
	warp "malaya",58,76;
	end;
}

ma_dun01,152,23,4	script	可疑的树枝::MalayaStick0	4_BULLETIN_BOARD2,{
	if (malaya_bang == 20) {
		mes "这儿有一个和医院外面的那个很相似的一个树枝.";
		mes "让我们再四处找找.";
		set malaya_bang,30;
		changequest 11301,11302;
		close;
	} else if (malaya_bang == 30) {
		mes "这儿有一个和医院外面的那个很相似的一个树枝.";
		mes "让我们再四处找找.";
		close;
	} else if (malaya_bang == 35) {
		mes "把树枝一个叠一个放置时, 阴郁感消失了, 正如赖斯所说.";
		next;
		mes "[护士 赖斯]";
		mes "*偷偷的笑*";
		cutin "malaya_nurseA05",2;
		next;
		mes "["+strcharinfo(0)+"]";
		mes "?!";
		cutin "",255;
		next;
		mes "[护士 赖斯]";
		mes "耶!";
		cutin "malaya_nurseA05",2;
		next;
		mes "[护士 赖斯]";
		mes "讨厌的树枝终于没有了!";
		next;
		mes "[护士 赖斯]";
		mes "*咯咯地笑*";
		next;
		mes "[护士 赖斯]";
		mes "人类太无知了. 你只要让他们看到一个无助的娇小的外貌, 他们就会上当.";
		next;
		mes "[护士 赖斯]";
		mes "*Snigger*";
		next;
		mes "[护士 赖斯]";
		mes "多亏你的努力, 我会把你带到我的房间...";
		mes "讨厌...";
		next;
		mes "[护士 赖斯]";
		mes "......";
		next;
		mes "[护士 赖斯]";
		mes "不不不!";
		mes "你还在拿着那些可恶的树枝!!!";
		next;
		mes "[护士 赖斯]";
		mes "今天算你走运!";
		mes "*咯咯的笑*";
		set malaya_bang,36;
		changequest 11307,11308;
		close2;
		cutin "",255;
		warp "malaya",58,76;
		end;
	} else if (malaya_bang > 35) {
		mes "从这个树枝上感觉不到任何邪恶的气息.";
		mes "只有一点被赖斯戏弄后的不爽...";
		close;
	} else {
		mes "感觉不到力量的存在.";
		close;
	}
}

malaya,48,76,4	script	医院的门#ma_n1	CLEAR_NPC,{
	if (malaya_bang == 3) {
		mes "使劲推了推门, 但是它并没有打开.";
		mes "应该不是被卡住或被锁住的, 看起来像被什么东西压住了.";
		set malaya_bang,4;
		changequest 11285,11286;
		close;
	} else if (malaya_bang == 4) {
		mes "使劲推了推门, 但是它并没有打开.";
		mes "应该不是被卡住或被锁住的, 看起来像被什么东西压住了.";
		close;
	} else if (malaya_bang == 11) {
		mes "把钥匙放进锁孔里...";
		mes "正如所想, 它不是锁上的.";
		next;
		mes "那么, 门为什么打不开呢?";
		set malaya_bang,12;
		changequest 11292,11293;
		close;
	} else if (malaya_bang == 12) {
		mes "把钥匙放进锁孔里...";
		mes "正如所想, 它不是锁上的.";
		next;
		mes "那么, 门为什么打不开呢?";
		close;
	} else if (malaya_bang > 18) {
		if(select("进入医院.:取消.") == 1)
			warp "ma_dun01",33,110;
		end;
	} else {
		mes "医院的门好像是关着的.";
		close;
	}
}

malaya,64,78,4	script	村妇#mab	4_F_MALAYA,{
	if (malaya_hi < 20) {
		mes "[村妇]";
		mes "......";
		next;
		mes "看起来, 她对你很警惕.";
		close;
	}
	if (malaya_bang == 5) {
		mes "[村妇]";
		mes "噢, 你是一名冒险家吗?";
		mes "看起来最近我们村子里来了很多冒险家啊.";
		next;
		mes "[村妇]";
		mes "我在这里出生也从未远离这里, 所以当我听到他们讲述的故事时, 我总想开始我自己的冒险旅程.";
		next;
		switch(select("询问医院的事儿.:停止对话.")) {
		case 1:
			mes "[村妇]";
			mes "医院?";
			mes "它已经关闭很久了啊.";
			mes "这儿附近的人都不谈论它.";
			next;
			mes "[村妇]";
			mes "我从未有过非去医院不可的经历.";
			mes "我只有在很小的时候因为胃痛去过那里一次. 我觉得医院变得愈来愈诡异了.";
			next;
			mes "[村妇]";
			mes "小孩从来就不喜欢医院.";
			next;
			select("询问关于护士的事情.");
			mes "[村妇]";
			mes "新来的护士?";
			mes "我不知道.";
			mes "我从来没有想过.";
			mes "已经关闭的医院来了一名新的护士, 听起来好奇怪啊.";
			set malaya_bang,6;
			changequest 11287,11288;
			close;
		case 2:
			mes "[村妇]";
			mes "祝你好运了~";
			close;
		}
	} else if (malaya_bang == 6) {
		mes "[村妇]";
		mes "新来的护士?";
		mes "我不知道.";
		mes "我从来没有想过.";
		mes "已经关闭的医院来了一名新的护士, 听起来好奇怪啊.";
		set malaya_bang,6;
		changequest 11287,11288;
		close;
	} else {
		mes "[村妇]";
		mes "噢, 你是一名冒险家吗?";
		mes "看起来最近我们村子里来了很多冒险家啊.";
		next;
		mes "[村妇]";
		mes "我在这里出生也从未远离这里, 所以当我听到他们讲述的故事时, 我总想开始我自己的冒险旅程.";
		close;
	}
}

malaya,62,37,4	script	村民#mab	4_M_MALAYA,{
	if (malaya_hi < 20) {
		mes "[村民]";
		mes "嗯! 从来没有见过你啊?";
		mes "你到这儿来是准备干什么啊?";
		next;
		mes "看起来对你很警惕.";
		close;
	}
	if (malaya_bang == 7) {
		mes "[村民]";
		mes "*哈哈笑*";
		mes "一名冒险家, 你是?";
		mes "当你有空的时候, 来看看我的菠萝农场吧.";
		next;
		mes "[村民]";
		mes "只是有点儿小, 但是远离闹市~";
		mes "菠萝你想要多少我给你多少, 作为交换, 你要给我讲你的故事!";
		next;
		switch(select("询问关于医院的事情.:停止对话.")) {
		case 1:
			mes "[村民]";
			mes "嗯......";
			mes "你是说那所医院?";
			next;
			mes "[村民]";
			mes "因为一起事故才关闭了的.";
			mes "但是我不会把更多的细节透露给一名外地人的......";
			mes "其它的无可奉告了.";
			next;
			select("询问关于护士的事儿.");
			mes "[村民]";
			mes "噢!!!";
			mes "你见过那名护士了吗?!";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "她正站在医院的前面呢.";
			mes "噢!";
			mes "她一定去和总部联系了.";
			next;
			mes "[村民]";
			mes "我们正需要 '护士', 她就来了! 我们获救了!";
			next;
			select("护...士?");
			mes "[村民]";
			mes "她被邀请来拯救我们的医院.";
			next;
			mes "[村民]";
			mes "现在我不得不去传开这则好消息了! 你能把她带到城中心的旅馆吗?";
			next;
			mes "[村民]";
			mes "就是医生所说的那个旅馆了.";
			mes "自从医院关闭以后, 他就一直在那里工作.";
			set malaya_bang,8;
			changequest 11289,11290;
			close;
		case 2:
			mes "[村民]";
			mes "呜呼~!";
			close;
		}
	} else if (malaya_bang == 8) {
		mes "[村民]";
		mes "现在我不得不去传开这则好消息了! 你能把她带到城中心的旅馆吗?";
		next;
		mes "[村民]";
		mes "就是医生所说的那个旅馆了.";
		mes "自从医院关闭以后, 他就一直在那里工作.";
		close;
	} else {
		mes "[村民]";
		mes "哇噢!";
		mes "一名冒险家, 你是?";
		mes "当你有空的时候, 来看看我的菠萝农场吧.";
		next;
		mes "[村民]";
		mes "只是有点儿小, 但是远离闹市~";
		mes "菠萝你想要多少我给你多少, 作为交换, 你要给我讲你的故事!";
		close;
	}
}

malaya,210,200,5	script	菲医生#ma	4_LGTSCIENCE,{
	if (malaya_hi < 20) {
		mes "[菲医生]";
		mes "......";
		next;
		mes "看起来对你很警惕.";
		close;
	}
	if (malaya_bang == 9) {
		mes "[菲医生]";
		mes "那么, 你是一位新来的护士?";
		next;
		switch(select("是的.:明显不是.")) {
		case 1:
			mes "[菲医生]";
			mes "对于一名护士来说, 没有什么比雪白的制服更重要的事情了.";
			mes "赶快去给我换了!";
			close;
		case 2:
			mes "[菲医生]";
			mes "噢, 对不起.";
			mes "我们正在等候一名新来的护士.";
			mes "我的错.";
			next;
			select("解释情况.");
			mes "[菲医生]";
			mes "啊哈~";
			mes "原来是这样啊.";
			mes "噢, 亲爱的, 看来是一场误会啊.";
			next;
			mes "[菲医生]";
			mes "你知道的, 在医院出事儿以后我一直在旅馆里为病人看病.";
			next;
			mes "[菲医生]";
			mes "即使是这样, 我也要为让她白白在医院前面等那么久而道歉.";
			next;
			mes "[菲医生]";
			mes "我现在还不能离开因为我还有病人要照看. 你能帮我把钥匙交给她吗?";
			next;
			mes "[菲医生]";
			mes "并且帮我带个口信, '我会交给你自己来判断'.";
			next;
			mes "[菲医生]";
			mes "我这儿忙完了就会过去的.";
			mes "祝你好运~";
			set malaya_bang,10;
			changequest 11291,11292;
			close;
		}
	} else if (malaya_bang == 10) {
		mes "[菲医生]";
		mes "我现在还不能离开因为我还有病人要照看. 你能帮我把钥匙交给她吗?";
		next;
		mes "[菲医生]";
		mes "并且帮我带个口信, '我会交给你自己来判断'.";
		next;
		mes "[菲医生]";
		mes "我这儿忙完了就会过去的.";
		mes "祝你好运~";
		close;
	} else {
		mes "[菲医生]";
		mes "*唉*";
		mes "这项工作... 永无止境...";
		mes "我怎么可能一个人处理完这么多病人的情况?";
		next;
		mes "[菲医生]";
		mes "什么? 医生在旅馆里做什么?";
		mes "为什么不行?";
		close;
	}
}

malaya,53,68,4	script	草丛#ma	CLEAR_NPC,{
	if (malaya_bang < 13) {
		mes "只是一堆草丛.";
		mes "摇动它们的时候, 一股香甜的气息扑面而来.";
		close;
	}
	if (malaya_bang == 13) {
		mes "[???]";
		mes "不要再靠近了!";
		mes "老 "+((Sex)?"男人":"女人")+"!";
		mes "你怎么知道我在这儿的?";
		emotion ET_HUK;
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我并不老.";
		emotion ET_FRET,1;
		next;
		switch(select("关于进入医院.:关于这个母亲.:关于 ???.:问问老女人.:问问医院周围的事.:取消.")) {
		case 1:
			mes "[???]";
			mes "几天前, 住在我们附近的一个老女人去了医院, 把一些棍子插在了地上.";
			next;
			mes "[???]";
			mes "她一边四处张望, 一边自言自语着什么.";
			next;
			mes "[???]";
			mes "我没有被发现, 是因为我自己都根本没想到那里去.";
			next;
			break;
		case 2:
			mes "[???]";
			mes "我妈妈曾经跟我说过.";
			mes "这个老女人的女儿曾在这里住院.";
			next;
			mes "[???]";
			mes "她女儿就再也没出来...";
			next;
			mes "[???]";
			mes "尽管在医院去世的不只她女儿一人. 医院里开始有很多奇怪的事情发生.";
			next;
			mes "[???]";
			mes "这就是妈妈不允许我到这里来的原因了.";
			next;
			break;
		case 3:
			mes "[???]";
			mes "约瑟, 不可能的!";
			mes "上次我在这儿被抓住了, 被狠狠的打了屁股的!";
			next;
			mes "[???]";
			mes "如果这次再被抓住了, 我的屁股就要开花了....";
			mes "我好害怕.";
			next;
			break;
		case 4:
			mes "[???]";
			mes "是住在我们隔壁的那位女士.";
			next;
			mes "[???]";
			mes "几天前我看到她在医院的附近做了些什么事情.";
			next;
			mes "[???]";
			mes "我在这里看不清她到底在干个么, 但是在她离开之后, 我在那里发现了一些树枝.";
			set malaya_bang,14;
			changequest 11294,11295;
			close;
		case 5:
			mes "[???]";
			mes "我不知道.";
			mes "这些树枝没有什么特别之处.";
			next;
			mes "[???]";
			mes "那位老女人每隔一段时间就来检查一下那些树枝.";
			mes "每当那时我的心跳都会加速!";
			next;
			break;
		case 6:
			mes "[???]";
			mes "哼!!";
			emotion ET_HNG;
			close;
		}
		mes "[???]";
		mes "发誓不要告诉其他任何人你在这里看到我了!!!";
		mes "你敢发誓吗?!";
		close;
	} else if (malaya_bang == 14) {
		mes "[???]";
		mes "我在这里看不清她到底在干个么, 但是在她离开之后, 我在那里发现了一些树枝.";
		close;
	} else if (malaya_bang == 15) {
		mes "[???]";
		mes "不要再靠近了!";
		mes "老 "+((Sex)?"男人":"女人")+"!";
		mes "你怎么知道我在这里的?";
		emotion ET_HUK;
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我并不老.";
		emotion ET_FRET,1;
		close;
	} else {
		mes "这儿有一个小孩的痕迹.";
		mes "我想这个小孩应该回家了吧.";
		close;
	}
}

-	script	Suspicious Wooden Stick::MalayaStick	-1,{
	if (checkweight(1201,1) == 0) {
		mes "- 慢着 !! -";
		mes "- 你的负重太大了. -";
		mes "- 不能再接收物品. -";
		mes "- 请先清理物品栏, -";
		mes "- 再来找我. -";
		close;
	}
	if (MaxWeight - Weight < 1000) {
		mes "- 慢着 !! -";
		mes "- 你的负重太大了. -";
		mes "- 不能再接收物品. -";
		mes "- 请先清理物品栏, -";
		mes "- 再来找我. -";
		close;
	}
	if (malaya_bang == 14) {
		mes "一根奇怪的树枝扎在地上.";
		mes "能感觉到一股神秘的力量.";
		next;
		switch(select("拔出来.:不管它.")) {
		case 1:
			if (rand(1,5) == 4) {
				mes "拔出埋在地里的树枝后,";
				mes "医院看起来更加阴暗了.";
				if (rand(2)) {
					set malaya_bang,15;
					changequest 11295,11296;
					getitem 6497,1; //Lesser_Agimat
					donpcevent "Tent"+replacestr(strnpcinfo(3),"MalayaStick","")+"#ma::OnEnable";
					next;
					mes "最好把护身符拿给赖斯看看.";
					close;
				} else {
					getitem 6497,1; //Lesser_Agimat
					donpcevent "Tent"+replacestr(strnpcinfo(3),"MalayaStick","")+"#ma::OnEnable";
					close;
				}
			} else {
				mes "拔出树枝以后, 一股不祥的预感迎面而来.";
				donpcevent "Tent"+replacestr(strnpcinfo(3),"MalayaStick","")+"#ma::OnEnable";
				close;
			}
		case 2:
			mes "看起来不吉利. 最好不管它.";
			close;
		}
	} else {
		mes "这儿有一根可疑的树枝.";
		close;
	}
	end;
OnEnable:
	enablenpc strnpcinfo(3); // NPC name is too long for strnpcinfo(0).
	end;
OnDisable:
	disablenpc strnpcinfo(3);
	end;
}
malaya,40,52,4	duplicate(MalayaStick)	可疑的树枝::MalayaStick1	4_BULLETIN_BOARD2
malaya,31,42,4	duplicate(MalayaStick)	可疑的树枝::MalayaStick2	4_BULLETIN_BOARD2
malaya,34,36,4	duplicate(MalayaStick)	可疑的树枝::MalayaStick3	4_BULLETIN_BOARD2
malaya,40,32,4	duplicate(MalayaStick)	可疑的树枝::MalayaStick4	4_BULLETIN_BOARD2
malaya,50,85,4	duplicate(MalayaStick)	可疑的树枝::MalayaStick5	4_BULLETIN_BOARD2
malaya,46,93,4	duplicate(MalayaStick)	可疑的树枝::MalayaStick6	4_BULLETIN_BOARD2
malaya,36,98,4	duplicate(MalayaStick)	可疑的树枝::MalayaStick7	4_BULLETIN_BOARD2
malaya,48,79,4	duplicate(MalayaStick)	可疑的树枝::MalayaStick8	4_BULLETIN_BOARD2
malaya,50,46,4	duplicate(MalayaStick)	可疑的树枝::MalayaStick9	4_BULLETIN_BOARD2
malaya,59,84,4	duplicate(MalayaStick)	可疑的树枝::MalayaStick10	4_BULLETIN_BOARD2

-	script	Tent#ma	-1,{ //557
	end;
OnInit:
	disablenpc strnpcinfo(0);
	end;
OnEnable:
	enablenpc strnpcinfo(0);
	initnpctimer;
	end;
OnDisable:
	stopnpctimer;
	disablenpc strnpcinfo(0);
	end;
OnTimer1000:
	donpcevent "MalayaStick"+replacestr(strnpcinfo(1),"Tent","")+"::OnDisable";
	end;
OnTimer30000:
	donpcevent "MalayaStick"+replacestr(strnpcinfo(1),"Tent","")+"::OnEnable";
	donpcevent strnpcinfo(0)+"::OnDisable";
	end;
}
-	duplicate(Tent#ma)	Tent1#ma	-1
-	duplicate(Tent#ma)	Tent2#ma	-1
-	duplicate(Tent#ma)	Tent3#ma	-1
-	duplicate(Tent#ma)	Tent4#ma	-1
-	duplicate(Tent#ma)	Tent5#ma	-1
-	duplicate(Tent#ma)	Tent6#ma	-1
-	duplicate(Tent#ma)	Tent7#ma	-1
-	duplicate(Tent#ma)	Tent8#ma	-1
-	duplicate(Tent#ma)	Tent9#ma	-1
-	duplicate(Tent#ma)	Tent10#ma	-1

malaya,114,183,3	script	弯腰老太太#ma	4_F_BARYO_OLD,{
	if (malaya_bang == 16) {
		mes "[弯腰老太太]";
		mes "呜 呼 呼 呼~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "老奶奶, 你好, 我能问您一个问题吗?";
		next;
		mes "[弯腰老太太]";
		mes "呜 呼 呼 呼~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "老奶奶?";
		next;
		mes "[弯腰老太太]";
		mes "呜 呼 呼 呼~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "老奶奶?";
		next;
		mes "[弯腰老太太]";
		mes "呜 呼 呼 呼~~~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "老奶奶!!!!!!!!!";
		next;
		mes "[弯腰老太太]";
		mes "谁? 啥?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "打扰了, 我能问您一个问题吗?";
		next;
		mes "[弯腰老太太]";
		mes "啥? 听不见.";
		mes "大声点!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我! 想! 问! 你! 一! 个! 问! 题!";
		next;
		mes "[弯腰老太太]";
		mes "好的, 宝贝~";
		mes "我会告诉你所有的, 宝贝~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "关于那个医院你了解多少呢?";
		next;
		mes "[弯腰老太太]";
		mes "医院?";
		mes "........";
		next;
		mes "[弯腰老太太]";
		mes "医院?!?!?!?";
		next;
		mes "[弯腰老太太]";
		mes "医院被诅咒啦!";
		mes "一些邪恶的东在里面!";
		next;
		mes "[弯腰老太太]";
		mes "那些东西把我可怜的女儿带走了.";
		next;
		switch(select("关于医院.:关于她女儿.")) {
		case 1:
			mes "[弯腰老太太]";
			mes "原来每个人听说新建医院了都很高兴.";
			next;
			mes "[弯腰老太太]";
			mes "我们不用再到其它城市去看病了.";
			next;
			mes "[弯腰老太太]";
			mes "但是他们建造的这个建筑并不凑效.";
			mes "它并不能治愈病人.";
			mes "当他们砍掉那些年久的树来建造时我就知道了.";
			next;
			mes "[弯腰老太太]";
			mes "但是管理者根本不听我所说的话.";
			mes "那些被诅咒的人们开始死去.";
			mes "我的女儿也一样...";
			set malaya_bang,17;
			changequest 11297,11298;
			close;
		case 2:
			mes "[弯腰老太太]";
			mes "她并没有受到什么威胁生命的伤害.";
			mes "只是...";
			mes "只是小小的感冒......";
			next;
			mes "[弯腰老太太]";
			mes "那些邪恶的东西.... 我的女儿啊...";
			mes "那些邪恶的东西啊.....";
			close;
		}
	} else if (malaya_bang == 17) {
		select("把树枝拿给她看.");
		mes "[弯腰老太太]";
		mes "什么?";
		mes "啊~~~~~~~~~~~~";
		emotion ET_HUK;
		next;
		mes "[弯腰老太太]";
		mes "啊~~~~~~~~~~~~~~~~~~~~~";
		emotion ET_HUK;
		next;
		mes "[弯腰老太太]";
		mes "啊~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~";
		emotion ET_HUK;
		next;
		mes "[弯腰老太太]";
		mes "啊!!!!!!!!!!!";
		emotion ET_HUK;
		next;
		mes "[弯腰老太太]";
		mes "你都做了些什么啊!";
		mes "那是... 那是一个封印来阻止那些邪恶的东西的!";
		next;
		mes "[弯腰老太太]";
		mes "如果你把它们放出来了, 它们又会来追逐人们!";
		next;
		mes "[弯腰老太太]";
		mes "我看到了!";
		mes "我看到了当他们把医院的门关上时, 他们说里面的人都已经死亡.";
		next;
		mes "[弯腰老太太]";
		mes "但是他们都知道.";
		mes "并不是所有的人都死了.";
		next;
		mes "[弯腰老太太]";
		mes "那些东西...";
		mes "把我女儿的生命夺走了...";
		next;
		mes "[弯腰老太太]";
		mes "噢, 我的天啊.";
		next;
		mes "站在医院前面的赖斯医生有危险了.";
		mes "如果我不快点儿回去的话...";
		set malaya_bang,18;
		changequest 11298,11299;
		close;
	} else if (malaya_bang == 18) {
		mes "站在医院前面的赖斯护士有危险了.";
		mes "如果我不快点儿回去的话...";
		close;
	} else if (malaya_bang == 32) {
		mes "[弯腰老太太]";
		mes "什么? 护身符?";
		mes "我是叫村子北边的萨满制作的.";
		next;
		mes "[弯腰老太太]";
		mes "不是很出名, 但是很有才华的一位萨满.";
		set malaya_bang,33;
		changequest 11304,11305;
		close;
	} else {
		mes "[弯腰老太太]";
		mes "呜 呼 呼 呼~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "老奶奶, 你好, 我能问您一个问题吗?";
		next;
		mes "[弯腰老太太]";
		mes "呜 呼 呼 呼~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "老奶奶?";
		next;
		mes "[弯腰老太太]";
		mes "呜 呼 呼 呼~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "老奶奶?";
		next;
		mes "[弯腰老太太]";
		mes "呜 呼 呼 呼~~~~";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "老奶奶!!!!!!!!!";
		next;
		mes "[弯腰老太太]";
		mes "谁? 啥?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "打扰了, 我可以问你一个问题吗?";
		next;
		mes "[弯腰老太太]";
		mes "啥? 听不见.";
		mes "大声点!";
		close;
	}
}

malaya,276,367,4	script	弯腰萨满#ma	4_F_UMOLDWOMAN,{
	if (malaya_hi < 20) {
		mes "[弯腰萨满]";
		mes "啊...呜...咦...";
		next;
		mes "甚至看都不用看一眼...";
		close;
	}
	mes "[弯腰萨满]";
	mes "嗯...";
	mes "我感到, 我感到....";
	next;
	mes "[弯腰萨满]";
	mes "我感觉到你身上出来的一些不好的气息...";
	if (malaya_bang == 33) {
		next;
		mes "[弯腰萨满]";
		mes "不不...";
		mes "什么话都不用说!";
		mes "你只需要这个.";
		next;
		mes "[弯腰萨满]";
		mes "好了.";
		mes "免费的.";
		mes "这是村子必须面对的因果报应啊...";
		set malaya_bang,34;
		changequest 11305,11306;
	}
	close;
}

// Pintados Festival :: malaya_pintados
//============================================================
/*
Description
-----------
The Pintados Festival begins when players have accumulated 1000 Lesser Agimats,
1000 Silver Crosses, and 300 dyestuffs, and lasts for 7 days. During that time,
players are able to create a tattoo.

Global Variables
----------------
$malaya_pintados_00  - Festival time limit, in 30-minute intervals. (range: 0~344)
$malaya_pintados_01  - Number of Lesser Agimats collected. (range: 0~1000)
$malaya_pintados_02  - Number of Silver Crosses collected. (range: 0~1000)
$malaya_pintados_03  - Number of dyestuffs collected. (range: 0~300)
$malaya_pintados_04$ - Last player to create a tattoo.
*/

ma_fild01,1,1,4	script	庆典负责人#pin	4_F_KHELLISIA,{
	if (callfunc("F_GM_NPC",1854,0) == 1) {
		mes "成功了!";
		next;
	} else {
		mes "发生错误了.";
		close;
	}
	mes "你好啊, 我是本次庆典的经理. 请选择一项物品吧.";
	mes "时间: ("+$malaya_pintados_00+"/344)";
	mes "小护身符数量: ("+$malaya_pintados_01+"/1,000)";
	mes "银色十字架数量: ("+$malaya_pintados_02+"/1,000)";
	mes "染料数量: ("+$malaya_pintados_03+"/300)";
	mes "近期纹身师: "+$malaya_pintados_04$;
	next;
	switch(select("东方医学控制按钮 ? 开始 & 关闭:细节按钮? 数量调整:开始时间:结束时间")) {
	case 1:
		mes "这是东方医学控制按钮.";
		mes "您可以设置为节日的开始或结束值.";
		next;
		switch(select("开始城市庆典:结束城市庆典:NPC_ON:NPC_OFF")) {
		case 1:
			set $malaya_pintados_00,1;
			donpcevent "庆典负责人#pin::OnEnable";
			mes "庆典开始.";
			close;
		case 2:
			donpcevent "庆典负责人#pin::OnDisable";
			mes "庆典结束.";
			close;
		case 3:
			donpcevent "庆典负责人#pin::OnEnableNPC";
			mes "增加一名NPC.";
			close;
		case 4:
			donpcevent "庆典负责人#pin::OnDisableNPC";
			mes "减少一名NPC.";
			close;
		}
	case 2:
		mes "调整全局值. 请选择值调整.";
		next;
		while(1) {
			switch(select("完成设置:时间 ("+$malaya_pintados_00+"):小护身符 ("+$malaya_pintados_01+"):银色十字架 ("+$malaya_pintados_02+"):染料 ("+$malaya_pintados_03+")")) {
			case 1:
				mes "完成全局设置.";
				close;
			case 2:
				mes "调整时间 [0~344]";
				mes "全局 增加 1/30 分钟.";
				mes "1 - 49 -> 第1天";
				mes "50 - 98 -> 第2天";
				mes "99 - 147 -> 第3天";
				mes "148 - 196 -> 第4天";
				mes "197 - 245 -> 第5天";
				mes "246 - 294 -> 第6天";
				mes "295 - 343 -> 第7天";
				mes "全局 1 = 1 小时.";
				next;
				input .@input;
				if (.@input < 0 || .@input > 344)
					close;
				set $malaya_pintados_00, .@input;
				break;
			case 3:
				mes "调整小护身符的累加值.";
				mes "数字必须在 0 至 1000之间.";
				next;
				input .@input;
				if (.@input < 0 || .@input > 1000)
					close;
				set $malaya_pintados_01, .@input;
				break;
			case 4:
				mes "调整银色十字架的累加值.";
				mes "数字必须在 0 至 1000之间.";
				next;
				input .@input;
				if (.@input < 0 || .@input > 1000)
					close;
				set $malaya_pintados_02, .@input;
				break;
			case 5:
				mes "调整染料的累加值.";
				mes "数字必须在 0 至 300之间.";
				next;
				input .@input;
				if (.@input < 0 || .@input > 300)
					close;
				set $malaya_pintados_03, .@input;
				break;
			}
			mes "时间: ("+$malaya_pintados_00+"/344)";
			mes "小护身符数量: ("+$malaya_pintados_01+"/1,000)";
			mes "纯银十字架数量: ("+$malaya_pintados_02+"/1,000)";
			mes "染料数量: ("+$malaya_pintados_03+"/300)";
			mes "这是目前的数值. 你想再调整一下吗?";
			next;
		}
	case 3:
		initnpctimer;
		break;
	case 4:
		stopnpctimer;
		break;
	}
	end;

// Moved to individual NPCs for smoother processing.
//OnInit:
//	if ($malaya_pintados_00 > 0)
//		donpcevent "庆典负责人#pin::OnEnableNPC";
//	end;

OnTimer1800000:
	set $malaya_pintados_00, $malaya_pintados_00;
	if ($malaya_pintados_00 > 0 && $malaya_pintados_00 < 344) {
		set $malaya_pintados_00,$malaya_pintados_00+1;
		stopnpctimer;
		initnpctimer;
	} else {
		set $malaya_pintados_00,0;
		donpcevent "庆典负责人#pin::OnDisable";
	}
	end;
OnEnable:
	initnpctimer;
	donpcevent "庆典负责人#pin::OnEnableNPC";
	announce "'城市庆典'会在 巴勒攸马西瓦哥 举行一个星期.",bc_all,"0xFB9D04",FW_NORMAL,12;
	end;
OnDisable:
	stopnpctimer;
	set $malaya_pintados_00,0;
	set $malaya_pintados_01,0;
	set $malaya_pintados_02,0;
	set $malaya_pintados_03,0;
	donpcevent "庆典负责人#pin::OnDisableNPC";
	announce "'城市庆典'完美闭幕.",bc_all,"0xFB9D04",FW_NORMAL,12;
	end;
OnEnableNPC:
	set .@str$, "::OnEnable";
OnDisableNPC:
	if (.@str$ == "")
		set .@str$, "::OnDisable";
	donpcevent "Tourist#pin01"+.@str$;
	donpcevent "Tourist#pin02"+.@str$;
	donpcevent "Tourist#pin03"+.@str$;
	donpcevent "年青的刺青师#pin04"+.@str$;
	donpcevent "Tourist#pin05"+.@str$;
	donpcevent "击鼓的年青人#pin06"+.@str$;
	donpcevent "击鼓的年青人#pin07"+.@str$;
	donpcevent "击鼓的年青人#pin08"+.@str$;
	donpcevent "打节奏的男孩#pin09"+.@str$;
	donpcevent "打节奏的男孩#pin10"+.@str$;
	donpcevent "打节奏的男孩#pin11"+.@str$;
	end;
}

ma_fild01,179,260,2	script	小帮手 伊斯科#pin	4_M_BARYO_BOY,{
	if (checkweight(1201,1) == 0 || MaxWeight - Weight < 1000) {
		mes "不能继续进行任务. 你的负重太大了..";
		close;
	}
	if ($malaya_pintados_00 == 0) {
		if ($malaya_pintados_01 > 999 && $malaya_pintados_02 > 999 && $malaya_pintados_03 > 299) {
			set $malaya_pintados_00,1;
			donpcevent "庆典负责人#pin::OnEnable";
			emotion ET_THROB;
			mes "[伊斯科]";
			mes "许多冒险家曾帮助整理我带来的庆典物品.";
			next;
			emotion ET_DELIGHT;
			mes "[伊斯科]";
			mes "嘿嘿... 现在我们可以举行'^7A96E0城市庆典^000000'了.";
			close;
		}
		// fall through
	} else {
		mes "[伊斯科]";
		mes "嘿嘿... 有趣的'^7A96E0城市庆典^000000'隆重开始了.";
		next;
		if ($malaya_pintados_00 > 0 && $malaya_pintados_00 < 50) {
			emotion ET_DELIGHT;
			mes "[伊斯科]";
			mes "今天是'^7A96E0城市庆典^000000'的第一天. 庆典为期一周, 祝你好运了.";
			close;
		} else if ($malaya_pintados_00 > 49 && $malaya_pintados_00 < 99) {
			mes "[伊斯科]";
			mes "你知道吗?";
			mes "村里的刺青师只在'^7A96E0城市庆典^000000'期间才会进行刺青工作.";
			close;
		} else if ($malaya_pintados_00 > 98 && $malaya_pintados_00 < 148) {
			mes "[伊斯科]";
			mes "今天是'^7A96E0城市庆典^000000'的第三天.";
			next;
			mes "[伊斯科]";
			mes "大家说一个叫做"+$malaya_pintados_04$+"的冒险家获得了一枚纹身.";
			close;
		} else if ($malaya_pintados_00 > 147 && $malaya_pintados_00 < 197) {
			mes "[伊斯科]";
			mes "大家说一个叫做"+$malaya_pintados_04$+"的冒险家获得了一枚纹身.";
			next;
			mes "[伊斯科]";
			mes "刺青师脾气很怪, 他只给那些他认为很特别的冒险家进行纹身.";
			close;
		} else if ($malaya_pintados_00 > 196 && $malaya_pintados_00 < 246) {
			mes "[伊斯科]";
			mes "一个叫做"+$malaya_pintados_04$+"的冒险家在村子里很出名了.";
			next;
			mes "[伊斯科]";
			mes "你见过^FF8440食月暴龙^000000了吗, 那个可以吞掉月亮的怪兽? 据说它很残忍啊.";
			close;
		} else if ($malaya_pintados_00 > 245 && $malaya_pintados_00 < 295) {
			emotion ET_CRY;
			mes "[伊斯科]";
			mes "好悲伤啊. 许多冒险家来帮助举行的'^7A96E0城市庆典^000000'只余下最后一天了.";
			close;
		} else {
			emotion ET_CRY;
			mes "[伊斯科]";
			mes "天啊! 今天是'^7A96E0城市庆典^000000'的最后一天了. 不敢相信以后再没有大型庆典了.";
			close;
		}
	}
	emotion ET_CONFUSE;
	mes "[伊斯科]";
	mes "天啊. 在庆典的最后我们该做些什么呢.";
	next;
	switch(select("什么?:你收集到了多少?:带回来了一个丢掉的物品.")) {
	case 1:
		mes "[伊斯科]";
		mes "这是自古以来的一个传统节日.";
		mes "在巴勒攸马西瓦哥, 我们称之为'^7A96E0城市庆典^000000'.";
		next;
		emotion ET_OTL;
		mes "[伊斯科]";
		mes "这次庆典, 我想我可能完不成任务了.";
		next;
		select("为什么?");
		mes "[伊斯科]";
		mes "我将奉命回到马来亚港, 并带过来1000个小护身符, 1000个纯银十字架, 还有300个染料.";
		next;
		mes "[伊斯科]";
		mes "但是无处不在的'^FF8440独眼怪^000000'把我的物品都抢走了.";
		next;
		select("你受伤了吗?");
		emotion ET_OHNO;
		mes "[伊斯科]";
		mes "很幸运, 我没受伤.";
		next;
		mes "[伊斯科]";
		mes "但是我陷入了麻烦. 没有这些物品, '^7A96E0城市庆典^000000'就无法举行. 我该怎么办呢?";
		close;
	case 2:
		mes "[伊斯科]";
		mes "许多冒险家来帮忙, 但只是帮助收集...";
		next;
		mes "[伊斯科]";
		mes "小护身符"+$malaya_pintados_01+", 纯银十字架"+$malaya_pintados_02+", 染料"+$malaya_pintados_03+", 就是这些了.";
		next;
		emotion ET_OHNO;
		mes "[伊斯科]";
		mes "唉... 我们物品还是短缺, 不能举行'^7A96E0城市庆典^000000'.";
		close;
	case 3:
		set .@str$, (Sex)?"Bro":"Sis";
		break;
	}
	emotion ET_THROB;
	mes "[伊斯科]";
	mes "噢, 是吗, 太棒了!";
	mes "谢谢你! "+strcharinfo(0)+" "+.@str$+"!!";
	mes "嘿嘿, 你都带来了些什么?";
	next;
	set .@i, select(
		"小护身符 (^FF0000"+(($malaya_pintados_01 > 999)?"收集齐了!":(1000 - $malaya_pintados_01)+" 个")+"^000000):"+
		"纯银十字架 (^FF0000"+(($malaya_pintados_02 > 999)?"收集齐了!":(1000 - $malaya_pintados_02)+" 个")+"^000000):"+
		"染料 (^FF0000"+(($malaya_pintados_03 > 299)?"收集齐了!":(300 - $malaya_pintados_03)+" 个")+"^000000)"
	);
	switch(.@i) {
	case 1:
		set .@item,6497; //Lesser_Agimat
		set .@name$,"小护身符";
		set .@total,1000;
		break;
	case 2:
		set .@item,6502; //Silver_Cross
		set .@name$,"纯银十字架";
		set .@total,1000;
		break;
	case 3:
		setarray .@items[0],975,976,978,979,980,981,982,983;
		set .@name$,"染料";
		set .@total,300;
		break;
	}
	mes "[伊斯科]";
	mes "哇! "+.@str$+" 你带来了"+.@name$+"!";
	next;
	mes "[伊斯科]";
	mes "等等. 一... 二...";
	if (getd("$malaya_pintados_0"+.@i) >= .@total) {
		mes "嗯... 噢? 我已经有了我所需要的"+.@name$+". "+.@str$+"! 但还是要谢谢你了.";
		close;
	}
	if (.@i < 3) {
		mes "我还少"+(.@total - getd("$malaya_pintados_0"+.@i))+"个. 你带来了多少?";
		next;
		switch(select("一个?!:输入数量.")) {
		case 1:
			set .@amount,1;
			mes "[伊斯科]";
			mes "呵呵... 你只拿回了一下.";
			next;
			break;
		case 2:
			mes "[伊斯科]";
			mes "呵呵... 我对数字很迟钝. 50个以上我就晕了. 准备给我多少个?";
			next;
			input .@amount;
			if (.@amount < 1 || .@amount > 50) {
				mes "[伊斯科]";
				mes "唉~我晕了! 数目太多的话我数不过来.";
				close;
			}
			break;
		}
		if (countitem(.@item) < .@amount) {
			mes "[伊斯科]";
			mes "唉~ "+.@str$+"! "+getitemname(.@item)+"在哪儿呢?";
			close;
		}
	} else {
		mes "我缺少"+(.@total - getd("$malaya_pintados_0"+.@i))+"个染料. 你带来了什么类型的染料?";
		next;
		for(set .@j,0; .@j<getarraysize(.@items); set .@j,.@j+1)
			set .@menu$, .@menu$+getitemname(.@items[.@j])+" (^FF0000"+countitem(.@items[.@j])+"^000000):";
		set .@item, .@items[select(.@menu$)-1];
		if (countitem(.@item) == 0) {
			mes "[伊斯科]";
			mes "唉~ 你一个"+getitemname(.@item)+"都没有啊.";
			close;
		}
		mes "[伊斯科]";
		mes .@str$+"! 你能给我多少个红色染料, 你有 "+countitem(.@item)+" 个?";
		next;
		switch(select("输入数量:所有")) {
		case 1:
			mes "[伊斯科]";
			mes "呵呵... 我的数学是体育老师教的. 50个以上我就数不清了. 你准备给我多少?";
			next;
			input .@amount;
			if (.@amount < 1 || .@amount > 50) {
				mes "[伊斯科]";
				mes "唉~ 我告诉过你, 我的数学很差的.";
				close;
			}
			break;
		case 2:
			set .@amount, countitem(.@item);
			break;
		}
		if (countitem(.@item) < .@amount) {
			mes "[伊斯科]";
			mes "唉... 我还缺少"+getitemname(.@item)+"啊.";
			close;
		}
	}
	delitem .@item,.@amount;
	setd "$malaya_pintados_0"+.@i, getd("$malaya_pintados_0"+.@i)+.@amount;
	set .@amount_left, .@total - getd("$malaya_pintados_0"+.@i);
	mes "[伊斯科]";
	mes "呵呵... 谢谢. "+.@str$+"!";
	if (.@amount_left <= 0)
		mes "我们收集到了所有需要的"+.@name$+". 好开心啊~!";
	else
		mes "我还需要"+.@amount_left+"个"+.@name$+".";
	close;
}

ma_fild01,172,223,6	script	刺青师#pin	4_M_BARYO_OLD,{
	if (checkweight(1201,1) == 0 || MaxWeight - Weight < 1000) {
		mes "不能继续进行任务. 你的负重太大了..";
		close;
	}
	emotion ET_QUESTION;
	mes "[刺青师]";
	mes "为什么想要一个纹身?";
	next;
	switch(select("什么是纹身?:我对纹身的效果很好奇.:我需要一个纹身.")) {
	case 1:
		mes "[刺青师]";
		mes "据说, 一个强大怪兽的纹身可以增强持有者的能力.";
		next;
		select("疟了. 怎么才能搞到?");
		mes "[刺青师]";
		mes "绘制纹身是一项神圣的任务.";
		next;
		mes "[刺青师]";
		mes "在我绘制纹身时, 我需要10个 古代符文 为我护法.";
		next;
		mes "[刺青师]";
		mes "需要一个强大怪兽的玩偶来注入能量.";
		next;
		mes "[刺青师]";
		mes "最后也是最重要的, 1个 灵魂碎片 把强大怪兽的能量注入到纹身中.";
		next;
		select("你能绘制什么纹身?");
		mes "[刺青师]";
		mes "我可以做三种纹身.";
		next;
		mes "[刺青师]";
		mes "噩梦纹身. 来自于马来亚港古树的一只强大的邪恶生物.";
		next;
		mes "[刺青师]";
		mes "食月者纹身. 来自于可以吞食月亮的一个恐怖的怪兽.";
		next;
		mes "[刺青师]";
		mes "巨鳄纹身. 来自于专门拐骗村民的巨大的鳄鱼.";
		next;
		select("我从哪儿能搞到灵魂碎片和玩偶?");
		mes "[刺青师]";
		mes "你可以从宝箱巨鳄, 恶梦死神, 还有食月暴龙身上得到, 不过这可不是一项简单的任务.";
		next;
		mes "[刺青师]";
		mes "这项神圣的工作不是每天都能进行的. 刺青只能在'^7A96E0城市庆典^000000'时进行.";
		close;
	case 2:
		mes "[刺青师]";
		mes "你对哪种纹身感兴趣?";
		next;
		while(1) {
			switch (select("噩梦纹身:巨鳄纹身:食月者纹身:没啥想问的.")) {
			case 1:
				mes "[刺青师]";
				mes "需要10个古代符文, 1个噩梦死神灵魂碎片, 1个噩梦死神人偶.";
				next;
				mes "[刺青师]";
				mes "恶梦死神纹身蕴藏着马来亚古树的能量.";
				next;
				mes "[刺青师]";
				mes "当别人对自己使用生命恢复技能时, 恢复量增加4%. 当自己对别人使用生命恢复技能时, 恢复量增加7%.";
				next;
				break;
			case 2:
				mes "[刺青师]";
				mes "需要10个古代符文, 1个宝箱巨鳄灵魂碎片, 1个宝箱巨鳄人偶.";
				next;
				mes "[刺青师]";
				mes "巨鳄纹身蕴藏着一个巨大鳄鱼的能量.";
				next;
				mes "[刺青师]";
				mes "增加7%的魔法攻击力, 减少7%的固定咏唱时间.";
				next;
				break;
			case 3:
				mes "[刺青师]";
				mes "需要10个古代符文, 1个食月暴龙灵魂碎片, 1个食月暴龙人偶";
				next;
				mes "[刺青师]";
				mes "食月者纹身蕴藏着一只可以吞食月亮的恐怖怪兽的能量.";
				next;
				mes "[刺青师]";
				mes "增加7%的基础物理攻击力, 增加10%的攻击速度.";
				next;
				break;
			case 4:
				mes "[刺青师]";
				mes "看起你都了然于胸, 那么, 祝你好运了.";
				close;
			}
			mes "[刺青师]";
			mes "你对其它的纹身还有什么问题吗?";
			next;
		}
	case 3:
		break;
	}
	if ($malaya_pintados_00 == 0) {
		mes "[刺青师]";
		mes "刺青这项神圣的工作只有在'^7A96E0城市庆典^000000'时才能进行. 对不起了, 现在不是城市庆典时间.";
		close;
	}
	mes "[刺青师]";
	mes "你可以在'^7A96E0城市庆典^000000'时再来.";
	next;
	mes "[刺青师]";
	mes "再没有跟'^7A96E0城市庆典^000000' 一样的其它时间来绘制纹身了.";
	next;
	mes "[刺青师]";
	mes "庆典不会持续太久, 我们这就开始吧. 你想要哪种纹身?";
	next;
	switch(select("我要再想一想.:恶梦死神纹身:巨鳄纹身:食月者纹身")) {
	case 1:
		mes "[刺青师]";
		mes "希望你在'^7A96E0城市庆典^000000'期间过得愉快.";
		close;
	case 2:
		set .@tattoo,2911; //恶梦死神_Tattoo
		set .@doll,6517; //恶梦死神_Doll
		set .@spirit,6524; //恶梦死神_Spirit_Piece
		set .@name$,"恶梦死神";
		break;
	case 3:
		set .@tattoo,2907; //Buwaya_Tattoo
		set .@doll,6518; //Buwaya_Doll
		set .@spirit,6525; //Buwaya_Spirit_Piece
		set .@name$,"宝箱巨鳄";
		break;
	case 4:
		set .@tattoo,2910; //Bakonawa_Tattoo
		set .@doll,6516; //Bakonawa_Doll
		set .@spirit,6523; //Bakonawa_Spirit_Piece
		set .@name$,"食月暴龙";
		break;
	}
	if (countitem(6499) < 10 || countitem(.@spirit) == 0 || countitem(.@doll) == 0) {
		mes "[刺青师]";
		mes "你的材料不够啊.";
		mes "需要10个古代符文, 1个"+.@name$+"灵魂碎片, 1个"+.@name$+"人偶, 才能绘制1个^EE1D11"+.@name$+"纹身^000000.";
		close;
	}
	emotion ET_SPARK;
	mes "[刺青师]";
	mes "这些材料都有神圣的能量. 通过这些会制出一个强大的纹身的.";
	next;
	mes "[刺青师]";
	mes "如果你不想出错的话, 请不要在我进行绘制时打扰我.";
	next;
	mes "刺青师把古代符文按方位摆放在他的身边.";
	next;
	specialeffect EF_FLAMELAUNCHER,AREA,"古代符文#01";
	specialeffect EF_FLAMELAUNCHER,AREA,"古代符文#02";
	specialeffect EF_FLAMELAUNCHER,AREA,"古代符文#03";
	specialeffect EF_FLAMELAUNCHER,AREA,"古代符文#04";
	specialeffect EF_FLAMELAUNCHER,AREA,"古代符文#05";
	mes "古代符文慢慢开始发亮, 制作工具和材料也慢慢发出光彩. 他满意的笑着.";
	next;
	mes "刺青师兴奋的看着玩偶, 好像要把它的样子完全印入脑海一样.";
	next;
	if(select("你在搞什么搞啊?:... ... ..") == 1) {
		emotion ET_FRET;
		delitem 6499,5; //Ancient_Grudge
		mes "[刺青师]";
		mes "噢不, 你把一切都打乱了.";
		mes "我不会为完全不懂艺术的人来绘制纹身的. 你把余下的材料拿走吧.";
		next;
		mes "拿回来5个古代符文, "+.@name$+"人偶, "+.@name$+"灵魂碎片.";
		close;
	}
	emotion ET_STARE;
	mes "他在用眼神熔化玩偶吗?";
	next;
	specialeffect EF_SONICBLOWHIT;
	mes "他闭上了眼睛又慢慢的睁开, 好像要把人偶的样子印在脑海里一样,  接着他拿起发光的工具开始绘制.";
	next;
	mes "马上就绘出"+.@name$+"纹身的雏形了.";
	next;
	emotion ET_FRET;
	mes "但是他一直注视着绘画的几个角落,  好像对一些细节不是很满意.";
	next;
	if(select("我看挺好啊.:... ... ..") == 1) {
		emotion ET_FRET;
		emotion ET_ANGER;
		delitem 6499,5; //Ancient_Grudge
		mes "[刺青师]";
		mes "我艹! 我跟你说过不要打扰我的";
		next;
		mes "刺青师烦燥的把材料都扔了.";
		next;
		mes "[刺青师]";
		mes "我没心情再画了. 下次吧. 你把余下的材料拿走吧.";
		next;
		mes "拿回5个古代符文, "+.@name$+"人偶, "+.@name$+"灵魂碎片.";
		close;
	}
	mes "他兴奋的盯着画看了一会儿, 满意的点了点头.";
	next;
	mes "看起来, 他对这个"+.@name$+"绘画很满意.";
	next;
	emotion ET_HUM;
	mes "但是现在他望着天空什么也没做. 他在等什么呢?";
	next;
	if(select("什么时候才好啊?:... ... ..") == 1) {
		emotion ET_FRET;
		emotion ET_ANGER;
		delitem 6499,5; //Ancient_Grudge
		mes "[刺青师]";
		mes "我艹! 我告诉过你不要来打扰我!";
		next;
		mes "刺青师愤怒的把画扔了出去.";
		next;
		mes "[刺青师]";
		mes "这样不行. 或许下一次吧. 你把余下的材料拿走吧.";
		next;
		mes "拿回5个古代符文, "+.@name$+"人偶, "+.@name$+"灵魂碎片.";
		close;
	}
	emotion ET_THINK;
	mes "[刺青师]";
	mes ".";
	next;
	mes "[刺青师]";
	mes ". .";
	next;
	mes "[刺青师]";
	mes ". . .";
	next;
	emotion ET_THINK;
	mes "[刺青师]";
	mes ". . . .";
	next;
	mes "[刺青师]";
	mes ". . . . .";
	next;
	mes "[刺青师]";
	mes ". . . . . .";
	next;
	mes "[刺青师]";
	mes ". . . . . . .";
	next;
	emotion ET_SPARK;
	mes "刺青师凝视了天空一会儿以后, 眼神变的坚定起来, 接着他用双手把"+.@name$+"灵魂碎片打成粉末.";
	next;
	specialeffect EF_DETOXICATION;
	mes ""+.@name$+"灵魂碎片被打碎成粉末. 刺青师的双手开始发光.";
	next;
	if(select("为什么要把碎片打粉...:... ... ..") == 1) {
		delitem 6499,5; //Ancient_Grudge
		delitem .@spirit,1;
		emotion ET_FRET;
		emotion ET_ANGER;
		mes "[刺青师]";
		mes "我艹! 我告诉过你, 不要来打扰我!";
		next;
		mes "闪耀的光亮从他的手中消失. 他呆呆的看着手心, 然后愤怒的把材料都抛到地上.";
		next;
		mes "[刺青师]";
		mes "我马上就要绘制成功了, 但是你毁了这一切. 心情不好. 你把余下的材料拿走吧.";
		next;
		mes "拿回5个古代符文和玩偶.";
		close;
	}
	mes "他捧起粉末并把它们均匀的撒在绘画上.";
	next;
	specialeffect EF_FLAMELAUNCHER,AREA,"古代符文#01";
	specialeffect EF_FLAMELAUNCHER,AREA,"古代符文#02";
	specialeffect EF_FLAMELAUNCHER,AREA,"古代符文#03";
	specialeffect EF_FLAMELAUNCHER,AREA,"古代符文#04";
	specialeffect EF_FLAMELAUNCHER,AREA,"古代符文#05";
	mes "所有的古代符文开始消散, "+.@name$+"绘画中的光亮也开始褪去.";
	next;
	specialeffect EF_LIGHTSPHERE;
	mes "在绘画的上面, 光亮不停的闪耀着.";
	next;
	mes "光亮退去, "+.@name$+"绘画再也不是原来那个绘画了.";
	next;
	mes "这个"+.@name$+"绘画就好像...好像活了一样.";
	next;
	mes "刺青师终于满意的笑了.";
	next;
	emotion ET_SMILE;
	mes "[刺青师]";
	mes "哈哈, 成功了.";
	next;
	delitem 6499,10; //Ancient_Grudge
	delitem .@spirit,1;
	delitem .@doll,1;
	getitem .@tattoo,1;
	set $malaya_pintados_04$, strcharinfo(0);
	mes "[刺青师]";
	mes "对不起让你等了这么久. 但是完全没有白等, 因为我很久没有用这么大的精力来制作一个这么好的纹身了.";
	next;
	mes "[刺青师]";
	mes "你订制的^EE1D11"+.@name$+"纹身^000000绘制完成了.";
	next;
	mes "[刺青师]";
	mes "希望你在'^7A96E0城市庆典^000000'期间玩的开心.";
	close;
}

ma_fild01,171,224,0	script	古代符文#01	HIDDEN_WARP_NPC,{ end; }
ma_fild01,173,224,0	duplicate(古代符文#01)	古代符文#02	HIDDEN_WARP_NPC
ma_fild01,173,223,0	duplicate(古代符文#01)	古代符文#03	HIDDEN_WARP_NPC
ma_fild01,172,222,0	duplicate(古代符文#01)	古代符文#04	HIDDEN_WARP_NPC
ma_fild01,171,223,0	duplicate(古代符文#01)	古代符文#05	HIDDEN_WARP_NPC

ma_fild01,192,200,8	script	观光客#pin01	1_M_MERCHANT,{
	mes "[观光客]";
	mes "我来自遥远的一个城市, 我放下了一切来参加这里的'城市庆典'.";
	next;
	mes "[观光客]";
	mes "我对这次参观不后悔, 但是...";
	next;
	mes "[观光客]";
	mes "但是我只得到了一个我不喜欢的纹身, 而我又做了那么多努力才得到的.";
	next;
	mes "[观光客]";
	mes "我已经在亮光处仔细查看了这个纹身, 我想刺青师犯了一个错误.";
	next;
	mes "[观光客]";
	mes "它毁了这次旅行的好心情.";
	next;
	mes "[观光客]";
	mes "唉!";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "观光客#pin01";
	end;
OnEnable:
	enablenpc "观光客#pin01";
	end;
OnDisable:
	disablenpc "观光客#pin01";
	end;
}

ma_fild01,211,200,6	script	观光客#pin02	4_M_TWMASKMAN,{
	mes "[观光客]";
	mes "我听说了'城市庆典', 所以专门从昆仑来到了这里.";
	next;
	mes "[观光客]";
	mes "以防你误认为我脸上的是一个纹身, 我告诉你吧, 它只是一个面具.";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "观光客#pin02";
	end;
OnEnable:
	enablenpc "观光客#pin02";
	end;
OnDisable:
	disablenpc "观光客#pin02";
	end;
}

ma_fild01,251,205,2	script	观光客#pin03	4_M_CHNOLD,{
	mes "[观光客]";
	mes "嘿, 听我说, 这不是我想要的纹身啊.";
	next;
	mes "[观光客]";
	mes "我想要的是一个食月者纹身, 可是我拿到的却是恶梦死神纹身.";
	next;
	mes "[刺青师]";
	mes "不... 我曾说过我想要那一个的. 别再扯别的了.";
	next;
	mes "[观光客]";
	mes "没听说过顾客就是上帝吗? 嗯? 想要搞臭自己的声望吗?";
	next;
	mes "[观光客]";
	mes "呼... 难以置信.";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "观光客#pin03";
	end;
OnEnable:
	enablenpc "观光客#pin03";
	end;
OnDisable:
	disablenpc "观光客#pin03";
	end;
}

ma_fild01,249,206,6	script	年青的刺青师#pin04	4_M_MALAYA,{
	mes "[年青的刺青师]";
	mes "啊...真受不了这样的顾客.";
	next;
	mes "[年青的刺青师]";
	mes "我要告诉你多少次, 你说的是你想要一个恶梦死神纹身.";
	next;
	mes "[年青的刺青师]";
	mes "啊, 我的嗓子... 吼叫是没有用的.";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "年青的刺青师#pin04";
	end;
OnEnable:
	enablenpc "年青的刺青师#pin04";
	end;
OnDisable:
	disablenpc "年青的刺青师#pin04";
	end;
}

ma_fild01,162,235,6	script	观光客#pin05	4_F_CHNDRESS1,{
	mes "[观光客]";
	mes "据说城市庆典只维期一周.";
	next;
	mes "[观光客]";
	mes "我从洛阳城来, 居然赶上了. 我的运气太好了.";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "观光客#pin05";
	end;
OnEnable:
	enablenpc "观光客#pin05";
	end;
OnDisable:
	disablenpc "观光客#pin05";
	end;
}

ma_fild01,164,234,6	script	击鼓的年青人#pin06	4_M_BARYO_MAN,{
	mes "嘭嘭嘭, 啪啪啪, 咚咚咚~";
	next;
	mes "[击鼓的年青人]";
	mes "庆典没有鼓手怎么行呢.";
	next;
	mes "[击鼓的年青人]";
	mes "一起来吗?";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "击鼓的年青人#pin06";
	end;
OnEnable:
	enablenpc "击鼓的年青人#pin06";
	end;
OnDisable:
	disablenpc "击鼓的年青人#pin06";
	end;
}

ma_fild01,170,231,4	script	击鼓的年青人#pin07	4_M_BARYO_MAN,{
	mes "嘭嘭嘭, 啪啪啪, 咚咚咚~";
	next;
	mes "[击鼓的年青人]";
	mes "在我们的语言中, '城市庆典'这个词里的'城市'就意味着天堂.";
	next;
	mes "[击鼓的年青人]";
	mes "这就是为什么在庆典期间, 有刺青师来进行神圣的刺青工作的原因了.";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "击鼓的年青人#pin07";
	end;
OnEnable:
	enablenpc "击鼓的年青人#pin07";
	end;
OnDisable:
	disablenpc "击鼓的年青人#pin07";
	end;
}

ma_fild01,164,228,6	script	击鼓的年青人#pin08	4_M_BARYO_MAN,{
	mes "嘭嘭嘭, 啪啪啪, 咚咚咚~";
	next;
	mes "[击鼓的年青人]";
	mes "我记的不是很清楚, 但是据说庆典是为了庆祝我们的大丰收.";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "击鼓的年青人#pin08";
	end;
OnEnable:
	enablenpc "击鼓的年青人#pin08";
	end;
OnDisable:
	disablenpc "击鼓的年青人#pin08";
	end;
}

ma_fild01,170,234,4	script	打节奏的男孩#pin09	4_M_BARYO_BOY,{
	mes "咚巴拉嘭, 咚巴拉嘭~";
	next;
	mes "[打节奏的男孩]";
	mes "我在击鼓和敲打的节拍中会变的很亢奋.";
	next;
	mes "[打节奏的男孩]";
	mes "咚巴拉嘭, 咚巴拉嘭, 太过瘾了!";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc "打节奏的男孩#pin09";
	end;
OnEnable:
	enablenpc "打节奏的男孩#pin09";
	end;
OnDisable:
	disablenpc "打节奏的男孩#pin09";
	end;
}

ma_fild01,164,231,6	script	打节奏的男孩#pin10	4_M_BARYO_BOY,{
	mes "- 咚巴拉嘭, 咚巴拉嘭 -";
	next;
	mes "[打节奏的男孩]";
	mes "我现在只能用木棍来打节拍, 但是当我长大后, 你能想象出我打鼓的样子吗?";
	close;
OnInit:
	if (!$malaya_pintados_00)
		disablenpc strnpcinfo(0);
	end;
OnEnable:
	enablenpc strnpcinfo(0);
	end;
OnDisable:
	disablenpc strnpcinfo(0);
	end;
}
ma_fild01,170,228,4	duplicate(打节奏的男孩#pin10)	打节奏的男孩#pin11	4_M_BARYO_BOY
