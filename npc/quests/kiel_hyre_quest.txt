//===== Hercules Script ======================================
//= Kiel Hyre Quest
//===== By: ==================================================
//= L0ne_W0lf (Script), DZeroX (Timer)
//===== Current Version: =====================================
//= 4.7
//===== Description: =========================================
//= Quest for opening Robot Factory first and second floors.
//===== Additional Comments: =================================
//= 4.0 A whole bunch-a-updates to various npcs. [L0ne_W0lf]
//=     Corrected condition checks throughout the quest.
//=     Npcs no longer make use of the goto command.
//=     Uses temp npc vars now instead of temp char.
//=     Reduced the amount of variables used.
//=     Corrected some of the cutins in npcs with them.
//=     Added the missing dialogs and weight checks.
//=     Fixed many typos, and grammatical errors.
//=     NPC now names use '#<name>' instead of labels.
//=     Updated some NPC positions, and facings.
//=     Changed the way some NPCs work.
//=     Updated comments for get/delitem commands.
//= 4.1 Added an 'end;' to Kiel Hyre's dialog for the "Yes" option for if you want to confront Kiehl.
//= 4.2 Fixed some issues reported in bugreport:2129. [L0ne_W0lf]
//= 4.2a Follow up to last update. [L0ne_W0lf]
//= 4.2b Missed a condition, fixed it though. [L0ne_W0lf]
//= 4.2c More various fixes :D [L0ne_W0lf]
//= 4.3 Fixed improper condition in the Elly NPC. [L0ne_W0lf]
//=     Corrected some typos in the dialogs.
//= 4.4 Updated reviecer and robots NPC to use mobcount. (bugreport:2380) [L0ne_W0lf]
//= 4.5 Removed a delitem that was no logner needed. [L0en_W0lf]
//= 4.6 Fixed impossible condition for security guard. [L0ne_W0lf]
//= 4.7 Updated RE/Pre-RE EXP. [Euphy]
//============================================================

//============================================================================
// Kiel Hyre Quest/Robotic Lab Dungeon
//
// Script Dialog Obtained and Copied Down by L0ne_W0lf
// Timer work and some variable dances by DZeroX
// Based on [iRO Sakray] as of [03/29/2007]
//============================================================================
//----------------------------------------------------------------------------
// [Notes]
//  - Let it be noted that ALL DIALOG IS OFFICIAL TO IRO UNLESS SPECIFIED.
//  - I've fixed a few of iRO's mistakes, but I'm sure I made some of my own. 
//  - Will probably require a major optimizing.
//  - Not going to list ALL of the more usless NPCs. (Doors + Empty "Beautiful Ladies")
//  - Parties are *NOT REQUIRED* as per Doddler's Wiki information.
//
//----------------------------------------------------------------------------
// [Maps]                [Use]
//  yuno_in01 ........... Start quest in pub
//  kh_school ........... Deliver Wine here, Meet Elly
//  yuno ................ Get Delivery for/from "Little Kid"
//  lighthalzen ......... Get Delivery package for "Little Kid"
//  kh_vila ............. Kiel Hyre cottage.
//  kh_dun01 ............ Robot Factory; Save Kiel Hyre
//  kh_mansion .......... Kiel Hyre's Mansion in Lighthalzen
//  kh_kiehl01 .......... Kiehl's room/Cave
//  kh_kiehl02 .......... Kiehl's room/Boss Room
//
//----------------------------------------------------------------------------
// [Variables in Use]
//  KielHyreQuest 	- Main quest tracking variable (Quest finished at 106)
//
//  KHToastGirlEnd	- Pick up delivery if set to 1, 
//			- picked up delivery if set to 2
//			- finished if set to 3 
//			- Deleted once no longer needed.
//
//  KHCottagePoem1	- Tracks Poem 1 quest in cottage. (finished = 5)
//			- Deleted once no longer needed.
//
//  KHCottagePoem2	- Tracks Poem 2 quest in cottage. (finished = 3)
//			- Deleted once no longer needed.
//
//  .@KHInput$		- Used with "Security Guard"
//  			- Used with "Test Tube"
//  			- Used when "Elly" (inputing string in attempt to wake her)
//  			- Used with "Grave", (twice)
//  			- Used with "Heavy Door"
//  			- Used with "Mechanical Device"
//  			- Used for opening various doors in Kiehl's area.
//
//  .@KHFirstKeyhole	- Holds 1 (green keycard) or 2 (cottage key)
//  .@KHSecondKeyhole	- Holds 1 (green keycard) or 2 (cottage key)
//
//  .@KHPotionColor$	- Holds 'red', 'green', or 'yellow' depending on what wrong potion is selected.
//
//  .@KHSwords 		- Used with "Sword Hilt"
//
//  .@KHQRead		- Make sure player has asked questions to Kiel Hyre
//
//  .@KHTitle$		- Holds "Mr", "Mrs", or "Miss"
//
//  .@KHDoorPushAttempt	- Keeps track of how many times a person has attmepted to push the door open.
//
//  .@KHPryingItem$	- Used for incorrect options when prying open last door.
//
//  .KHKilled		- Tracks how many monsters have been killed. Used with "Receiver", "Robots", and "Kiehl" NPCs
//
//  .KHDoor1Open	- 0/1 Depending on if the first door is opened.
//  .KHDoor2Open	- 0/1 Depending on if the second door is opened.
//  .KHDoor3Open	- 0/1 Depending on if the third door is opened.
//  .KHDoor4Open	- 0/1 Depending on if the fourth door is opened.
//  .KHDoor5Open	- 0/1 Depending on if the fifth door is opened.
//
//  .KHKilledBoss	- 0/1 depending on if the boss has been killed.
//
//  $@KHQuestBusy	- 0/1 depending on if the boss room has been set in motion.
//
//----------------------------------------------------------------------------
// [NPCs]			 [Location]
//  Pub Master .................. yuno_in01	[ 35,178]
//  Hanie ....................... yuno_fild08	[196,196]
//  Security Guard .............. yuno_fild08	[158,194]
//  Security Guard .............. yuno_fild08	[158,183]
//  Student ..................... kh_school	[ 57,142]
//  Student ..................... kh_school	[ 57,139]
//  Lady ........................ kh_school	[176, 60]
//  Cute Student ................ kh_school	[179, 39]
//  Little Kid .................. yuno		[217,114]
//  Windmill Owner .............. lighthalzen	[365,300]
//  Cottage Keeper .............. yuno_fild02	[ 93,210]
//  Door ........................ yuno_fild02	[ 75,218]
//  Door ........................ yuno_fild02	[109,218]
//  Wall ........................ kh_vila	[191, 14]
//  Book ........................ kh_vila	[184, 20]
//  Book ........................ kh_vila	[181, 20]
//  Book ........................ kh_vila	[178, 20]
//  Book ........................ kh_vila	[175, 19]
//  Letter ...................... kh_vila	[179, 11]
//  Box ......................... kh_vila	[ 16,175]
//  Apple Box ................... kh_vila	[ 30,184]
//  Map ......................... kh_vila	[ 44,125]
//  Pot ......................... kh_vila	[ 33,148]
//  Calabash .................... kh_vila	[ 14, 55]
//  Pool ........................ kh_vila	[ 39, 39]
//  Vicious Dog ................. kh_vila 	[180,178]
//  Drawer ...................... kh_vila 	[115,186]
//  Box ......................... kh_vila 	[107,126]
//  Bookshelf ................... kh_vila 	[181,138]
//  Sword Hilt .................. kh_vila 	[136, 69]
//  Test Tube ................... kh_vila	[179, 69]
//  Test Tube ................... kh_vila	[185, 69]
//  Window ...................... yuno_fild08	[ 69,185]
//  Elly ........................ kh_school	[178,180]
//  Cookie Basket ............... kh_school	[175,175]
//  Window ...................... kh_school	[188,185]
//  Grave ....................... yuno_fild08	[ 72,170]
//  Heavy Door .................. kh_dun01	[236, 48]
//  Beautiful lady .............. kh_school	[119,149]
//  Beautiful lady .............. kh_school	[122,186]
//  Signboard ................... kh_dun01	[163,223]
//  Mechanical Device ........... kh_dun01	[166,223]
//  Mechanical Device ........... kh_dun01	[162,206]
//  Kiel_Hyre_Door .............. kh_dun01	[224,232]
//  Steward ..................... kh_mansion	[ 78, 55]
//  Kiel Hyre ................... kh_mansion	[ 22, 27]
//  Allysia ..................... kh_mansion	[ 22, 27]
//  Abduction_trigger ........... lighthalzen	[188,200]
//  Mysterious Woman ............ kh_mansion	[ 25, 79]
//  Odd Granma .................. yuno		[250,132]
//  Old Lady .................... yuno 		[250,132]
//  Rosimmir_Entrance ........... yuno		[273,141]
//  Table ....................... kh_rossi	[ 23, 23]
//  Shelf ....................... kh_rossi	[ 92, 40]
//  Desk ........................ kh_rossi	[144,146]
//  Bookshelf ................... kh_rossi	[144,146]
//  Bed ......................... kh_rossi	[154,286]
//  Old Fisherman ............... yuno_fild12	[232,222]
//  Wooden Board ................ yuno_fild09	[158,217]
//  Kiehl_Room_Warp ............. kh_mansion	[ 29, 27]
//  Entrance Device#KHEntry1 .... kh_dun01	[ 44, 20]
//  Entrance Device#KHEntry2 .... kh_dun01	[ 44,203]
//  Security Guard .............. yuno_fild08	[158,194]
//  Receiver .................... kh_kiehl01	[ 17, 39]
//  Flower Vase ................. kh_kiehl01	[ 13, 40]
//  Box ......................... kh_kiehl01	[ 19, 25]
//  Big Door .................... kh_kiehl01	[ 44, 33]
//  Big_Door_1_Warp ............. kh_kiehl01	[ 43, 33]
//  Big Door .................... kh_kiehl01	[174, 40]
//  Big_Door_2_Warp ............. kh_kiehl01	[174, 39]
//  Big Door .................... kh_kiehl01	[ 77,108]
//  Big_Door_3_Warp ............. kh_kiehl01	[ 68,108]
//  Big Door .................... kh_kiehl01	[ 41,177]
//  Big_Door_4_Warp ............. kh_kiehl01	[ 78,177]
//  Robots ...................... kh_kiehl01	[ 15,181]
//  Big Door .................... kh_kiehl01	[166,187]
//  Big_Door_5_Warp ............. kh_kiehl01	[166,186]
//  Kiehl_Room_Trap ............. kh_kiehl02	[ 49, 15]
//  Kiehl#Original .............. kh_kiehl02	[ 50, 52]
//  KiehlRoom ................... kh_kiehl02	[  1,  1]
//  Mitchell#KiehlRoom .......... kh_kiehl02	[ 49, 55]
//  Agent#KHAgent1 ....   ....... kh_kiehl02	[ 53, 52]
//  Agent#KHAgent2 .............. kh_kiehl02	[ 51, 49]
//  Agent#KHAgent3 .............. kh_kiehl02	[ 47, 50]
//  Agent#KHAgent4 .............. kh_kiehl02	[ 46, 53]
//  Kiehl#Copy .................. kh_kiehl02	[ 48, 53]
//  Kiehl_Roomn_Exit ............ kh_kiehl01	[ 50, 59]
//
//----------------------------------------------------------------------------
// [Functions]
//  None
//
//----------------------------------------------------------------------------
// [Conflicts]
//   Resolved
//
//============================================================================

//============================================================================
// Affiliated NPCs
//============================================================================

//----------------------------------------------------------------------------
// Juno Pub Master/Starting point.
//----------------------------------------------------------------------------
yuno_in01,35,179,4	script	班德#kh	1_ETC_01,5,5,{
	if (checkweight(7487,1) == 0) {
		mes "[班德]";
		mes "请在这里暂停一下 !!";
		mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
		close;
	}
	switch (KielHyreQuest) {
	case 0:
		mes "[班德]";
		mes "欢迎光临, 要点些什么呢?";
		next;
		switch(select("啤酒:鸡尾酒:烧酒:下一次再来点")) {
		case 1:
			mes "[班德]";
			mes "啤酒的话马上为你准备, ";
			mes "请你稍后";
			next;
			mes "(老板从巨大的木桶里";
			mes "有着漂亮褐色的光彩";
			mes "倒满了看起来凉快的啤酒)";
			next;
			mes "[班德]";
			mes "这里特制的'秀发兹 啤酒' 出来了";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "你说的特制'秀发兹 啤酒'啊...";
			mes "(鲜明的深褐色液体在玻璃杯里闪烁着)";
			next;
			percentheal 5,-5;
			mes "["+strcharinfo(0)+"]";
			mes "咕噜~";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "哗啊...";
			mes "老板啊 这真的很好喝啊";
			next;
			mes "[班德]";
			mes "看样子让你心满意足了, ";
			mes "哈哈..";
			mes "因为那是特制的啊...";
			close;
		case 2:
			mes "[班德]";
			mes "嗯...";
			mes "很抱歉客人, ";
			mes "目前鸡尾酒只剩下";
			mes "在场内服务的分量了, ";
			mes "若你下一次再来时";
			mes "我一定为你准备好的";
			close;
		case 3:
			mes "[班德]";
			mes "唉..?";
			mes "'烧酒'啊...";
			mes "很抱歉客人, ";
			mes "我们不贩售这类的酒";
			close;
		case 4:
			mes "[班德]";
			mes "那么等你决定好之后再叫我吧";
			close;
		}
	case 1:
		mes "[班德]";
		mes "欢迎光临, ";
		mes "要点些什么呢?";
		next;
		switch(select("啤酒:鸡尾酒:烧酒:请问有什么问题吗?:下一次再来点")) {
		case 1:
			mes "[班德]";
			mes "啤酒的话马上为你准备, ";
			mes "请你稍后";
			next;
			mes "(老板从巨大的木桶里";
			mes "有着漂亮褐色的光彩";
			mes "倒满了看起来凉快的啤酒)";
			next;
			mes "[班德]";
			mes "这里特制的'秀发兹 啤酒' 出来了";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "你说的特制'秀发兹 啤酒'啊...";
			mes "(鲜明的深褐色液体在玻璃杯里闪烁着)";
			next;
			percentheal 5,-5;
			mes "["+strcharinfo(0)+"]";
			mes "咕噜~";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "哗啊...";
			mes "老板啊 这真的很好喝啊";
			next;
			mes "[班德]";
			mes "看样子让你心满意足了, ";
			mes "哈哈..";
			mes "因为那是特制的啊...";
			close;
		case 2:
			mes "[班德]";
			mes "嗯...";
			mes "很抱歉客人, ";
			mes "目前鸡尾酒只剩下";
			mes "在场内服务的分量了, ";
			mes "若你下一次再来时";
			mes "我一定为你准备好的";
			close;
		case 3:
			mes "[班德]";
			mes "唉..?";
			mes "'烧酒'啊...";
			mes "很抱歉客人, ";
			mes "我们不贩售这类的酒";
			close;
		case 4:
			mes "[班德]";
			mes "啊...嗯... 看样子你是有听到我之前说的自言自语啊, 只是...我们配送人员有受点伤, 造成要配送的物品和要拿来的物品 有点囤积啊";
			next;
			mes "[班德]";
			mes "........... 要拿来的物品在购买处那里 会派人送过来的, 所以并没有什么大碍, 问题是要送往 '启 海伊洛 学院'的 那些物品...";
			next;
			mes "[班德]";
			mes "嗯....";
			next;
			switch(select("原来是这样啊:我可以帮你吗?")) {
			case 1:
				mes "[班德]";
				mes "唉哟 唉哟...";
				mes "我好像对客人说些没有用的话了呢, ";
				mes "非常抱歉..";
				mes "真是的...哈哈...";
				close;
			case 2:
				mes "[班德]";
				mes "唉? 嗯........... 是有点烦琐啦.. 请问你可以帮我吗?";
				next;
				switch(select("当然啊:等等..让我先想一下")) {
				case 1:
					mes "[班德]";
					mes "是真的吗? 真的感谢你啊!! 我也没有什么好报答你的呀..";
					next;
					mes "[班德]";
					mes "嗯嗯.. 那么我就把你要送达的物品, 和收件人的名字告诉你吧";
					next;
					mes "[班德]";
					mes "要配送的物品是'^0000ff调理用的酒^000000', 要送达的地方是, '启 海伊洛 学院'的 '^ff0000利可雷音 太太'啊^000000";
					next;
					mes "[班德]";
					mes "那么就拜托你啦";
					getitem 7487,1; //酒店的酒
					set KielHyreQuest,2;
					close;
				case 2:
					mes "[班德]";
					mes "..........";
					mes "好 了解了...";
					close;
				}
			}
		case 5:
			mes "[班德]";
			mes "那么等你决定好之后再叫我吧";
			close;
		}
	case 2:
	case 3:
	case 4:
	case 5:
		mes "[班德]";
		mes "来来已经迟到了请你赶快送去吧, ";
		mes "'^ff0000利可雷音 太太^000000'是有点挑剔的, ";
		mes "迟到的话会完蛋的";
		close;
	case 6:
		if (!countitem(7487)) {
			mes "[班德]";
			mes "啊 你已经去回来了, 这个真的谢谢你啦, 啊 这个虽然是个小东西, 就当做是酬劳请你收下它吧";
			next;
			select("那.. 我需要调理用的酒啊..");
			mes "[班德]";
			mes "啊 原来是这样啊, 你还需要酒啊, 请你稍后";
			next;
			mes "翻东西的声音.. 噗东... ...";
			next;
			mes "[班德]";
			mes "在这里, 啊啊..就当做是我的诚意好了, 请你收下吧";
			getitem 7487,1; //酒店的酒
			set Zeny, Zeny + 1000;
			close;
		}
	default:
		mes "[班德]";
		mes "上一次真的谢谢你啦";
		mes "哈哈...";
		close;
	}
//OnTouch2:
OnTouch:
	if (KielHyreQuest < 1) {
		mes "[班德]";
		mes "唉哟...";
		mes "这出大事了...";
		mes "怎么办啊...";
		set KielHyreQuest,1;
		close;
	} 
}

//----------------------------------------------------------------------------
// 朱诺；卖土司的小孩
//----------------------------------------------------------------------------
yuno,217,114,6	script	可爱的小孩#kh	96,{
	if (KielHyreQuest < 6) {
		mes "[思兹]"; 
		mes "买土司啊~ 土司~";
		mes "刚烤过的 还热腾腾呢~";
		close;
	}
	else if (KielHyreQuest == 6) {
		if (KHToastGirlEnd < 1) {
			mes "[思兹]"; 
			mes "欢迎光临~ 请问需要土司吗?";
			next;
			switch(select("受爱丽之托而来:没事")) {
			case 1:
				mes "[思兹]"; 
				mes "啊... 你是说^ff0000爱丽^000000姐姐的委托啊?";
				next;
				mes "[思兹]"; 
				mes "哈啊.. 我知道是什么事情了, 她是不是又把实习的材料 变成不能用了呢? 真是拿^ff0000爱丽^000000姐姐 没有办法啊";
				next;
				mes "[思兹]"; 
				mes "我了解了! 是^ff0000爱丽^000000姐姐的请求的话, 我当然要听她的! 她是我的主客户呢..";
				next;
				mes "[思兹]"; 
				mes "嗯.. 可是... 很可惜的我们的材料也都用光了, 以目前的材料我们也不敷使用的关系.. 若可以的话请你到里希塔乐镇的辗米厂, ";
				mes "帮忙配送一下材料好吗?";
				next;
				mes "[思兹]"; 
				mes "你只要说你是从朱诺土司商店派来的话, 他们会给你面粉和鸡蛋的, 只要把那些带来的话, 我会把多余的那一份分给你的";
				set KHToastGirlEnd,1;
				close;
			case 2:
				mes "[思兹]";
				mes "请你下一次再来使用~";
				close;
			}
		}
		else if (KHToastGirlEnd == 1) {
			mes "[思兹]";
			mes "请你到里希塔乐镇的辗米厂";
			mes "带回来面粉和鸡蛋吧, ";
			mes "你说你是从朱诺土司商店派来的话, ";
			mes "他们会给你的";
			close;
		}
		else if (KHToastGirlEnd == 2) {
			mes "[思兹]";
			mes "啊 你回来了, 辛苦您了, 来 这是约定好要给你的 面粉和鸡蛋, ";
			mes "帮我向^ff0000爱丽^000000姐姐问候一下";
			delitem 7488,1; //送货用的箱子
			getitem 7488,1; //送货用的箱子
			set KHToastGirlEnd,3;
			close;
		}
	}
	else if ((KielHyreQuest >= 6) || (KHToastGirlEnd == 3)) {
		//KHToastGirlEnd no longer needed-- deleting.
		set KHToastGirlEnd,0;
		mes "[思兹]";
		mes "请大家来购买刚出炉的 热腾腾土司噢~";
		close;
	}
}

//----------------------------------------------------------------------------
// 里希塔乐镇；辗米厂 主人
//----------------------------------------------------------------------------
lighthalzen,366,299,4	script	辗米厂 主人#kh	46,{
	if (checkweight(7488,1) == 0) {
		mes "[米思]";
		mes "请在这里暂停一下 !!";
		mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
		close;
	}
	if (KHToastGirlEnd < 1) {
		mes "[米思]";
		mes "有什么事吗, ";
		mes "我现在有点忙 请你下一次再来";
		close;
	}
	else if (KHToastGirlEnd == 1) {
		mes "[米思]";
		mes "有什么事吗, ";
		mes "我现在有点忙 请你下一次再来";
		next;
		switch(select("我是从朱诺土司商店那边过来的:...")) {
		case 1:
			mes "[米思]";
			mes "啊啊... 是从土司商店那边过来的啊, 请你等一下";
			next;
			mes "[米思]";
			mes "呵嗯... 我把那东西放在那里了呢... 啊 在这里";
			next;
			mes "[米思]";
			mes "来 请收下, 鸡蛋会很容易碎掉的, 所以请你好好的携带";
			getitem 7488,1; //送货用的箱子
			set KHToastGirlEnd,2;
			close;
		case 2:
			mes "[米思]";
			mes "你这家伙 酷司啊~";
			mes "还不赶快去工作啊?";
			mes "还在那里玩啊~!!";
			mes "你再继续玩就不给你饭吃";
			close;
		}
	}
	else if (KHToastGirlEnd >= 2) {
		mes "[米思]";
		mes "唉哟...真是一个败家子, ";
		mes "每天叫你去做的事你都不会去做, ";
		mes "只会想着要玩..";
		close;
	}
}

lighthalzen,366,289,2	script	辗米厂 助理	97,{
	switch (KHToastGirlEnd) {
	case 0:
		mes "[酷司]";
		mes "哼...";
		mes "也没什么事在忙, ";
		mes "每天装做一副很忙的样子..";
		mes "碎碎念..";
		close;
	case 1:
		mes "[酷司]";
		mes "呜哇~";
		mes "我没有在玩啊~!.";
		mes "你看吗 我是在工作呀... ";
		mes "碎碎念..";
		close;
	case 2:
	case 3:
		mes "[酷司]";
		mes "啊~";
		mes "朱诺的土司商店啊?";
		mes "那里的思兹姐姐真漂亮啊..";
		mes "嘻嘻...";
		close;
	}
}

//============================================================================
// 启 海伊洛学院 NPC
//============================================================================

//----------------------------------------------------------------------------
// 少女 (有关于学院的事..)
//----------------------------------------------------------------------------
yuno_fild08,196,196,5	script	少女#kh1	102,{
	mes "[少女]";
	mes "啊...我也能进入'^0000FF启 海伊洛 学院^000000'的话";
	mes "那有多好呢... ";
	mes "为什么我妈妈没有把我生成 ";
	mes "孤儿呢...真是的..";
	next;
	select("启 海伊洛 学院?");
	mes "[少女]";
	mes "嗯...这里是, ";
	mes "只收容孤儿的地方啊, ";
	mes "创立这学院的人是 ";
	mes "'^ff0000启 海伊洛^000000'这号人物, ";
	mes "听说他以前制作出很多奇怪的机械, ";
	mes "也赚了不少钱啊";
	next;
	mes "[少女]";
	mes "所以说以回馈社会的动机吧?";
	mes "因而为了孤儿们创立了学院, ";
	mes "就是这间学院啊";
	next;
	mes "[少女]";
	mes "听说只要是在这间学院毕业的话, ";
	mes "就能谋职很好的工作呢..";
	mes "啊.. 我也想进这间学院啊";
	close;
}

//----------------------------------------------------------------------------
// 学院警卫
//----------------------------------------------------------------------------
yuno_fild08,158,194,6	script	警卫#1::KHAGuard	4_M_EIN_SOLDIER,{
	if ((KielHyreQuest < 2) || (KielHyreQuest > 31)) { 
		mes "[警卫]";
		mes "这里是'^FF0000启 海伊洛 学院^000000', ";
		mes "是限制一般人进出的, ";
		mes "若没有什么特别的事情, ";
		mes "或事先没有约好的话是不能进出的";
		close;
	}
	else if (KielHyreQuest == 2) { 
		mes "[警卫]";
		mes "这里是'^FF0000启 海伊洛 学院^000000', ";
		mes "是限制一般人进出的, ";
		mes "若没有什么特别的事情, ";
		mes "或事先没有约好的话是不能进出的";
		next;
		switch(select("订的货已经到达了:......")) {
		case 1:
			mes "[警卫]";
			mes "是送货吗?请告诉我收货人姓名 和物品名称";
			next;
			input .@KHDelivery$;
			if (.@KHDelivery$ != "利可雷音") {
				mes "[警卫]";
				mes "这位"+.@KHDelivery$+", ";
				mes "确实不在我们学院里面, ";
				mes "看样子你是弄错了吧";
				close;
			}
			input .@KHDelivery$ ;
			if (.@KHDelivery$ != "酒") {
				mes "[警卫]";
				mes "请问这是配送给^ff0000利可雷音 太太^000000的^3355FF"+.@KHDelivery$+"吗?";
				mes "先让我确认一下^000000";
				next;
				mes "警卫启动了自身后面的 ";
				mes "某种装置";
				next;
				mes "[警卫]";
				mes "这里是正门, ";
				mes "有来自^ff0000利可雷音 太太^000000的包裹";
				mes "请来确认一下好吗?";
				mes "配送的物品是^3355FF"+.@KHDelivery$+"^000000";
				next;
				mes "[警卫]";
				mes "...是....是....";
				mes "..是 了解了";
				next;
				mes "[警卫]";
				mes "经过确认的结果^ff0000利可雷音 太太^000000";
				mes "确实是有订过货, ";
				mes "但她说没有订过";
				mes "这一类的货品";
				next;
				mes "[警卫]";
				mes "请你再确认一次好吗";
				close;
			}
			mes "[警卫]";
			mes "请问这是配送给^ff0000利可雷音 太太^000000的^3355FF酒吗?";
			mes "先让我确认一下^000000";
			next;
			mes "警卫启动了自身后面的 ";
			mes "某种装置";
			next;
			mes "[警卫]";
			mes "这里是正门, ";
			mes "有来自^ff0000利可雷音 太太^000000的包裹";
			mes "请来确认一下好吗?";
			mes "配送的物品是^3355FF酒^000000";
			next;
			mes "[警卫]";
			mes "...是....是....";
			mes "..是 了解了";
			next;
			mes "[警卫]";
			mes "我要确认一下, ";
			mes "'这是配送给'^ff0000利可雷音 太太^000000'的";
			mes "'^3355FF调理用的酒^000000' 对吗?";
			next;
			select("是");
			mes "[警卫]";
			mes "已经确认了, ";
			mes "妇人说她想亲自签收, ";
			mes "所以你可以进去了";
			close2;
			warp "kh_school",71,155;
			end;
		case 2:
			mes "[警卫]";
			mes "若没有其它事情的话 请你回去吧";
			close;
		}
	}
	else if (KielHyreQuest < 32) { 
		mes "[警卫]";
		mes "请问你还有什么事吗?";
		close2;
		warp "kh_school",71,155;
		end;
	}
}

yuno_fild08,158,183,7	duplicate(KHAGuard)	警卫#2	4_M_EIN_SOLDIER

//----------------------------------------------------------------------------
// 讨论八卦的女学生
//----------------------------------------------------------------------------
kh_school,57,142,6	script	学生#kha	4_F_HUWOMAN,3,3,{
	mes "[喇希]";
	mes "唉哟...";
	mes "你是谁?";
	mes "这里是禁止外人进出的啊..";
	close;

OnTouch:
	mes "[喇希]";
	mes "内夏, 内夏~";
	mes "有听过那个传闻吗?";
	next;
	mes "[桂内夏]";
	mes "嗯?";
	mes "那一种传闻?";
	next;
	mes "[喇希]";
	mes "有幽灵出现了 幽灵..";
	next;
	mes "[桂内夏]";
	mes "唉...什..什么.. 幽灵啊...";
	mes "...";
	next;
	mes "[喇希]";
	mes "真的啊, 隔壁班的 '阿喜'你知道吧?";
	mes "她不是从前几天就不见人影吗, ";
	mes "那是因为看到幽灵的关系";
	next;
	mes "[桂内夏]";
	mes "那是真的吗?";
	mes "好可怕啊....";
	mes "那事就不要再谈了...";
	close;
}

kh_school,57,139,0	script	学生#khb	4_F_HUWOMAN,{
	mes "[桂内夏]";
	mes "唉...";
	mes "哦...那里..";
	mes "也就是说...";
	mes "呜嗯...";
	emotion ET_PROFUSELY_SWEAT;
	close;
}

//----------------------------------------------------------------------------
// 利可雷音太太
//----------------------------------------------------------------------------
kh_school,176,60,4	script	太太#kh	4W_F_01,{
	if (KielHyreQuest < 2) {
		mes "[利可雷音]";
		mes "这里是禁止外人进出的, ";
		mes "请不要随意的逗留";
		close;
	}
	else if (KielHyreQuest == 2) { 
		mes "[利可雷音]";
		mes "请问你有什么事吗?";
		next;
		switch(select("我是来送货:没什么事")) {
		case 1:
			mes "[利可雷音]";
			mes "啊, 原来这样啊, 比我预期的晚了一些啊, 我还以为你会来的更早一些呢, 请你下一次提早一点好吗, ";
			mes "若你再晚到一次的话, 我就会去找其它厂商了";
			next;
			mes "[利可雷音]";
			mes "还有...";
			next;
			mes "[?????]";
			mes "呜..哇~!!!";
			next;
			mes "哇锵锵~!! 锵铿铿~!";
			next;
			mes "........... ....... ...";
			next;
			mes "[利可雷音]";
			mes "唉哟'^ff0000爱丽^000000', 你又闯祸了.. 你到底要到什么时候才不会神经大条呢, 到今晚为止姜饼没有完成的话, 这一学期就把你当掉 知道了吗?";
			next;
			mes "[爱丽]";
			mes "唉...唉... 可...可是...";
			next;
			mes "[利可雷音]";
			mes "^FF0000爱丽^000000!!";
			next;
			mes "[爱丽]";
			mes "..... 是的...知道了, 老师...";
			next;
			mes "[利可雷音]";
			mes "哼哼... 那么请你把物品放着, 就请你回去吧, 没必要继续在这里逗留";
			delitem 7487,1; //酒店的酒
			set KielHyreQuest,4;
			close;
		case 2:
			mes "[利可雷音]";
			mes "这里是禁止外人进出的, ";
			mes "请不要随意的逗留";
			close;
		}
	}
	else if (KielHyreQuest == 4) {
		mes "[利可雷音]";
		mes "若你完成事情了的话 ";
		mes "请你赶快回去吧, ";
		mes "最近这些小孩子..实在是...";
		mes "......";
		close;
	}
}

//----------------------------------------------------------------------------
// 爱丽 (在学院内)
//----------------------------------------------------------------------------
kh_school,179,39,0	script	看似可爱的 学生#kh	4_F_KHELLY,{
	if (checkweight(908,200) == 0) {
		mes "[爱丽]";
		mes "请在这里暂停一下 !!";
		mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
		close;
	}
	cutin "kh_elly01",2;
	if (KielHyreQuest < 4) { 
		cutin "kh_elly03",2;
		mes "[爱丽]";
		mes "呜哇~! 呜哇~!";
		mes "咻呜....";
		mes "又差一点弄掉了..";
		mes "要小心啊...";
	}
	else if (KielHyreQuest == 4) { 
		cutin "kh_elly03",2;
		mes "[爱丽]";
		mes "呜唉唉唉唉.... 怎么办啊~ 怎么办啊~ 呵唉.....";
		next;
		switch(select("请问有什么事吗?:......")) {
		case 1:
			mes "[爱丽]";
			mes "唉? 唉...那是因为.... 本来是要做姜饼的, 不小心把材料掉在地上了.....呵唉.. 要在今晚之前做出来才可以的~";
			next;
			switch(select("我可以帮你吗?:唉哟.. 真可怜啊")) {
			case 1:
				cutin "kh_elly02",2;
				mes "[爱丽]";
				mes "唉唉唉唉~";
				mes "真..真的吗?";
				mes "真的真的真的真的真的吗~!!";
				next;
				mes "["+strcharinfo(0)+"]";
				mes "嗯? 嗯... 哈哈..";
				mes "是真的啦.. 我来帮你";
				next;
				mes "[爱丽]";
				mes "唉嘿, 唉嘿...";
				mes "谢谢你啦~谢谢你啦~";
				mes "唉嘿嘿";
				next;
				mes "["+strcharinfo(0)+"]";
				mes "哈哈....";
				mes "那就.. 要怎么帮你呢?";
				next;
				mes "[爱丽]";
				mes "啊..对了...";
				mes "老实说....";
				mes "刚才不小心把做姜饼的材料";
				mes "给全毁不能使用了.....";
				mes "我要去找材料才可以的..";
				next;
				break;
			case 2:
				mes "[爱丽]";
				mes "呵唉~ 怎么办啊~ 怎么.... 呜嗯.... 请问~";
				next;
				select("????");
				mes "[爱丽]";
				mes "请问...~ 看样子你是送货的人.. 请帮我好吗~ 好?不?好?";
				next;
				mes "少女突然抓着你的手臂开始拜托你了";
				next;
				switch(select("我会帮你:我拒绝帮你")) {
				case 1:
					cutin "kh_elly02",2;
					mes "[爱丽]";
					mes "唉唉唉唉~";
					mes "真..真的吗?";
					mes "真的真的真的真的真的吗~!!";
					next;
					mes "["+strcharinfo(0)+"]";
					mes "嗯? 嗯... 哈哈..";
					mes "是真的啦..";
					next;
					mes "[爱丽]";
					mes "唉嘿, 唉嘿...";
					mes "谢谢你啦~谢谢你啦~";
					mes "唉嘿嘿";
					next;
					mes "["+strcharinfo(0)+"]";
					mes "嗯....";
					mes "那我要怎么帮你呢?";
					next;
					break;
				case 2:
					mes "["+strcharinfo(0)+"]";
					mes "对不起, ";
					mes "我有点忙...";
					next;
					cutin "kh_elly04",2;
					mes "[爱丽]";
					mes "呜唉...";
					mes "是是是~";
					mes "打扰到你真是抱歉啊..";
					mes "呜唉唉...";
					emotion ET_CRY;
					close2;
					cutin "",255;
					end;
				}
			}
			cutin "kh_elly01",2;
			mes "[爱丽]";
			mes "刚才毁掉的材料由于是最后一个, 呵唉....";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "不要只顾着哭啊.. 请你慢慢的说看看, 只要帮你找到新的姜饼材料就好了吗?";
			cutin "kh_elly04",2;
			mes "[爱丽]";
			mes "是的.... 嗯.... 可是很抱歉啊.. 对初次见面的人就做这样的委托..";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "没关系啊 赶快告诉我材料吧, 若不赶快做的话, 那位神经质的太太 会把你当掉的";
			next;
			mes "[爱丽]";
			cutin "kh_elly01",2;
			mes "啊! 是.. 是的! 材料是^FF0000面粉 1、鸡蛋 1、起士 2、酒 1、牛奶 7、可可 5 ^000000等";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "嗯.... 哈哈.. 确实是多了一点..";
			next;
			mes "[爱丽]";
			mes "呜呜~~~~~ 很抱歉~ 很抱歉~~~ 是爱丽做错了~~";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "啊.. 不是啊 不是啊 没有关系啊, 只是.. 看到一些新的材料啊, 不知道那些材料能从那里获得呀?";
			next;
			mes "[爱丽]";
			mes "'^0000FF面粉^000000'和 '^0000FF鸡蛋^000000'是从 ^008000朱诺^000000的 '^0000FF土司太太^000000'那里 委托的话 她会给你的 '^0000FF酒^000000'是从 ^008000朱诺^000000的 '^FF0000酒店^000000'那里, ";
			mes "'^0000FF可可^000000'是从 '^FF0000溜溜猴^000000'的 动物上可以获得";
			next;
			mes "[爱丽]";
			mes "很抱歉, 我知道我很不应该.. 但还是拜托你啦!";
			set KielHyreQuest,6;
			break;
		case 2:
			mes "[爱丽]";
			mes "呜唉唉唉唉唉...";
			break;
		}
	}
	else if (KielHyreQuest == 6) {
		if ((countitem(519) < 7) || (countitem(548) < 2) || (countitem(7182) < 5) || (countitem(7487) < 1) || (countitem(7488) < 1)) {
			cutin "kh_elly01",2;
			mes "[爱丽]";
			mes "'^0000FF面粉^000000'和 '^0000FF鸡蛋^000000'是从 ^008000朱诺^000000的 '^0000FF土司太太^000000'那里 委托的话 她会给你的 '^0000FF酒^000000'是从 ^008000朱诺^000000的 '^FF0000酒店^000000'那里, ";
			mes "'^0000FF可可^000000'是从 '^FF0000溜溜猴^000000'的 动物上可以获得";
		}
		else {
			cutin "kh_elly02",2;
			mes "[爱丽]";
			mes "哇~ 你都搜集到了, 唉嘿... 真的谢谢你啦! 唉嘿嘿";
			next;
			mes "[爱丽]";
			mes "唉嘿嘿.. 那么请你稍后一下~ 噜鲁 啦啦~";
			delitem 519,7; //牛奶
			delitem 548,2; //起士
			delitem 7182,5; //可可
			delitem 7487,1; //酒店的酒
			delitem 7488,1; //送货用的箱子
			set KielHyreQuest,8;
			set KHPubMasterEnd,0;
			emotion ET_DELIGHT;
		}
	}
	else if (KielHyreQuest == 8) {
		mes "[爱丽]";
		mes "锵锵~ 来 特制的爱丽 姜饼, 已经完成了~ 唉嘿..";
		next;
		mes "[爱丽]";
		mes "来 这是感谢之意啊, 嘻嘻.. 真的谢谢你.....啊!";
		next;
		mes "[爱丽]";
		mes "唉哟 我还不知道您贵姓大名啊, 我叫 ^FF0000爱丽^000000, 爱丽莎 爱丽是我的昵称.. 唉嘿..";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我叫 ^3355FF"+strcharinfo(0)+"^000000";
		next;
		cutin "kh_elly02",2;
		mes "[爱丽]";
		mes "唉嘿...  是^3355FF"+strcharinfo(0)+"^000000先生/小姐啊...";
		getitem 538,5; //姜饼
		set KielHyreQuest,10;
	}
	else if (KielHyreQuest == 10) {
		mes "[爱丽]";
		mes "呜呜.....请问... 我还有一个请求 可以再拜托你吗?";
		next;
		switch(select("是什么样的请求呢?:对不起 我现在有点忙..")) {
		case 1:
			mes "[爱丽]";
			mes "嗯... 也就是说... 对我来说有一位非常重要的爷爷 存在啊";
			next;
			mes "[爱丽]";
			mes "因为是"+strcharinfo(0)+" 先生/小姐的帮助, 才能让姜饼烤的很好呀! 之前都是烤焦的姜饼.. 嘿嘿.. ........";
			next;
			mes "[爱丽]";
			mes "嗯.. 所以.. 我想... 送给爷爷 这些姜饼啊! 若爷爷能看到这些的话 他一定会很高兴的啊";
			next;
			mes "[爱丽]";
			mes "若可以的话 我想亲自送给他, 因为现在我不能离开学院的关系, 时间久了姜饼也会变的 不好吃的..";
			next;
			mes "[爱丽]";
			mes "....... ......... ...........";
			next;
			switch(select("好吧, 我来送给他吧:现在我有点忙啊")) {
			case 1:
				cutin "kh_elly02",2;
				mes "[爱丽]";
				mes "呜哇~ 真的谢谢你啦! "+strcharinfo(0)+" 先生/小姐 真的很亲切啊, 唉嘿... 唉嘿嘿..";
				next;
				mes "[爱丽]";
				mes "爷爷目前在'^FF0000爷爷目前在^000000'那里啊, 你说爱丽叫我来见他的话, 他会见你的";
				set KielHyreQuest,12;
				break;
			case 2:
				cutin "kh_elly03",2;
				mes "[爱丽]";
				mes "是是...";
				mes "那就没有办法..";
				mes "......";
				break;
			}
			break;
		case 2:
			cutin "kh_elly03",2;
			mes "[爱丽]";
			mes "是!";
			mes "嗯.. 那就没有办法..";
			mes "呜呜...";
			break;
		}
	}
	else if (KielHyreQuest == 12) {
		mes "[爱丽]";
		mes "'^FF0000启 海伊洛 别墅^000000'是在 '^FF0000学院北方^000000'啊";
	}
	else if (KielHyreQuest == 14) {
		cutin "kh_elly03",2;
		mes "[爱丽]";
		mes "嗯... 爷爷在出差中? ......";
		next;
		mes "[爱丽]";
		mes "真是奇怪呀... 他没说过要去出差呀.. 他说今天会在 别墅里啊..";
		next;
		cutin "kh_elly04",2;
		mes "[爱丽]";
		mes "请问.. 可以请你再去一趟吗? 对了! 这一次我给你, 爷爷给过我的别墅补助钥匙吧, ";
		mes "用这把^FF0000钥匙^000000的话, 就可以进入到别墅里面的";
		getitem 7489,1; //Villa_Spare_Key
		set KielHyreQuest,16;
	}
	else if ((KielHyreQuest >= 14) && (KielHyreQuest < 20)) {
		mes "[爱丽]";
		mes "真奇怪啊...";
		mes "明明他说会在那里的啊...";
		mes "呜呜..";
	}
	else if (KielHyreQuest == 20) {
		mes "[爱丽]";
		mes "唉? 这是..... .....";
		next;
		mes "爱丽拆开密封的信封之后, 开始阅读信件了";
		next;
		mes "-给爱丽-";
		mes "我和儿子有事情要商量, ";
		mes "所以要回到老家见儿子齐尔, ";
		mes "自从留这一封信一个礼拜之后 ";
		mes "没有连络到我的话, ";
		mes "请你携带我留给你的物品";
		mes "快速的离开学院吧, ";
		mes "东西是藏在别墅的书房里, ";
		mes "假如你有同学要帮助你的话, ";
		mes "请叫你那位同学到别墅去, ";
		mes "请他找出我的踪迹后把我救出来, 就这样告诉他吧, ";
		mes "也许这是一桩很危险的事情也不一定..";
		mes "只要是你朋友的话, ";
		mes "就是值得信赖的人..";
		mes "只是学院的学生和相关人员";
		mes "是不被允许的, ";
		mes "也许他们可能跟齐尔是";
		mes "有关系的人也不一定, ";
		mes "务必要小心啊, ";
		mes "                 爷爷 笔..";
		next;
		cutin "kh_elly03",2;
		mes "[爱丽]";
		mes "自从爷爷... 留下信的那一天开始已经过了十天啊... 难道是爷爷有遇难吗? 我要怎么办呢? 呜呜..";
		delitem 7490,1; //Letter_to_Elly
		set KielHyreQuest,22;
	}
	else if (KielHyreQuest == 22) {
		cutin "kh_elly03",2;
		mes "[爱丽]";
		mes ".........";
		next;
		switch(select("询问有关爷爷的事情:询问有关儿子齐尔的事情:询问有关学院的事情")) {
		case 1:
			mes "["+strcharinfo(0)+"]";
			mes "爱丽的那一位爷爷, ";
			mes "到底是什么样的人啊?";
			mes "好像被一件很复杂的事情缠身啊";
			next;
			mes "[爱丽]";
			mes "我所说的爷爷是指 启 海伊洛";
			mes "财团的会长 '^FF0000启 海伊洛^000000' ";
			mes "会长先生啊";
			next;
			mes "[爱丽]";
			mes "可是对我从小就是孤儿的我, ";
			mes "非常疼爱我, ";
			mes "就如跟亲爷爷一样的人啊, ";
			mes "虽然看起来比较严肃, ";
			mes "但心里确是比任何人都温暖善良啊";
			next;
			mes "[爱丽]";
			mes "啊啊.. 爷爷.. 你还平安吗..";
			break;
		case 2:
			mes "["+strcharinfo(0)+"]";
			mes "信上所写的爷爷的儿子, ";
			mes "'^0000FF齐尔^000000'是什么样的人呢?";
			mes "看样子和爷爷的关系不太好";
			next;
			mes "[爱丽]";
			mes "'^0000FF齐尔^000000'先生老实说我也不太清楚啊, ";
			mes "学院在举办庆典时";
			mes "只偶尔见过一面";
			next;
			mes "[爱丽]";
			mes "可是他的面孔是不会被忘记的, ";
			mes "有着冰冷的银发";
			mes "看着我们学生啊";
			next;
			mes "[爱丽]";
			mes "虽然是男生但有着漂亮的脸蛋";
			mes "和白皙皮肤是一位漂亮的人, ";
			mes "身为生意人也稍微有名气的一个人, ";
			mes "在学生们中憧憬 '^0000FF齐尔^000000'先生的小孩";
			mes "也满多的";
			next;
			mes "[爱丽]";
			mes "可是爷爷和 '^0000FF齐尔^000000'先生, ";
			mes "彼此之间的感情是不太好的样子";
			next;
			mes "[爱丽]";
			mes "只要是在爷爷面前提到'^0000FF齐尔^000000'先生的话, ";
			mes "他就会发脾气的, ";
			mes "他们好像为了事业的事情常常有争吵啊";
			next;
			mes "[爱丽]";
			mes "为什么会这样子呢?";
			mes "他是那么漂亮的儿子和";
			mes "善良的父亲啊..";
			break;
		case 3:
			mes "["+strcharinfo(0)+"]";
			mes "这学院是什么样的地方呢? 说是学院保安也做的很彻底, 设备也比其它学院 看起来高级";
			next;
			mes "[爱丽]";
			mes "这是 启 海伊洛 财团所创办的, 为了孤儿们所创办的专门学院, 对所向往的职业, 会得到应有的专门教育";
			next;
			mes "[爱丽]";
			mes "啊, 我的志愿是向往卡普拉公司 和 启 海伊洛 总公司的秘书职务, 像'^0000FF爱丽希雅^000000'小姐一样变成一位漂亮的小姐 是我的愿望啊! 嘿嘿..";
			next;
			mes "[爱丽]";
			mes "可是.... 呜呜.. 最近在学校里 有发生一些奇怪的事情, 就因为这样孩子们都害怕 独自一个人活动啊..";
			next;
			cutin "kh_elly02",2;
			mes "[爱丽]";
			mes "不过我是还好啦! 如果我遇到危险的话 '"+strcharinfo(0)+"'先生/小姐会帮助我的, 唉嘿嘿..";
			next;
			switch(select("^0000FF爱丽希雅^000000小姐?:奇怪的事情?")) {
			case 1:
				mes "[爱丽]";
				mes "是为爷爷从事秘书";
				mes "工作职务的人, ";
				mes "是值得让爷爷相信信赖的女人, ";
				mes "是一位非常漂亮的好心人";
				break;
			case 2:
				cutin "kh_elly04",2;
				mes "[爱丽]";
				mes "这是一项被禁忌的话题.. '因为"+strcharinfo(0)+"'先生/小姐是值得信赖的人, 所以就告诉你吧";
				next;
				mes "[爱丽]";
				mes "最近在学校里 出没幽灵啊!!";
				next;
				mes "[爱丽]";
				mes "幽灵每晚在学院里游走, 只要是有人听到 那幽灵所念的咒文时, 都会变成坚硬的人形啊";
				next;
				mes "[爱丽]";
				mes "和我使用同一个房间的'马右', 遭受到幽灵咒文的迫害而石化了, 目前送往到医护室了..";
				mes "我们在老师不知情的状况下, 偷偷的进到医护室去看了马右..";
				next;
				mes "[爱丽]";
				mes "马右躺卧在床上, 看似没有生命的人形一样, 跟她说话也没有任何的回应... 她似乎真的是听不到看不到 任何事物的样子耶";
				next;
				mes "[爱丽]";
				mes "瞬间我感到非常的害怕, 就从医护室里逃脱出来了..";
				next;
				mes "[爱丽]";
				mes "难道有一天我也碰到那个幽灵的话, 也会像马右一样那样的被石化吗? 那么到时候连.. '" + strcharinfo(0) + "'先生/小姐 也认不出我来了?";
				next;
				cutin "kh_elly02",2;
				mes "[爱丽]";
				mes "呜呜.. 应该不会是这样吧! 假如我见到幽灵变成石化的话, '" + strcharinfo(0) + "'先生/小姐会来救我的! 唉嘿";
				next;
				mes "[爱丽]";
				mes "当我石化时'"+ strcharinfo(0) +"'先生/小姐 对着我说, '^FF0000不要再睡了 起床了爱丽^000000'的话, 我就可以马上起床活动了, 所以说我不太会害怕幽灵啊, 唉唉嘿..";
				set KielHyreQuest,24;
				break;
			}
		}
	}
	else if (KielHyreQuest >= 24 && KielHyreQuest <= 26) {
		cutin "kh_elly04",2;
		mes "[爱丽]";
		mes "啊.. 完蛋了! 要交作业的时间快要迟到了!! 我现在要去找 利可雷音 太太啊";
		next;		
		mes "[爱丽]";
		mes "请问.. 嗯.. 方便的话可以到别墅去找^FF0000爷爷所留下来的物品^000000 吗? 我所能信赖的人 只有'"+strcharinfo(0)+"'先生/小姐啊...";
		next;
		mes "[利可雷音]";
		mes "爱丽!! 要交的作业还早了吗? 你到底知不知道.. 现在是几点呢?!!";
		next;
		mes "[爱丽]";
		mes "呜哇! 我们傍晚时再见面吧! 请你到我宿舍房间来";
		next;
		mes "[爱丽]";
		mes "宿舍在学院后方 跟教堂建筑物在一起, 我的房间在宿舍 2楼后面 右边的房间, 请搭梯子上来吧, 我会把窗户打开的";
		set KielHyreQuest,26;
	}
	else {
		mes "[爱丽]";
		mes "请你快离开吧, ";
		mes "老师会马上过来的";
	}
	close2;
	cutin "",255;
	end;
}

//----------------------------------------------------------------------------
// 爱丽房间的窗户
//----------------------------------------------------------------------------
yuno_fild08,69,185,0	script	窗户#kh	HIDDEN_NPC,{
	if (KielHyreQuest < 29) {
		mes "是某一个人的房间, ";
		mes "看似一位女孩子的房间, ";
		mes "从窗户缝里可以看到可爱花纹的窗帘";
		close;
	}
	else if (KielHyreQuest== 29) {
		mes "这是爱丽所说的爱丽的房间..";
		mes "看不到梯子, ";
		mes "看样子好像还没有回来呀";
		close;
	}
	else if ((KielHyreQuest >= 30) && (KielHyreQuest <= 45)) {
		mes "这是爱丽的房间, 还是看不到梯子啊, 嗯? 窗户稍微开了一点缝, 看样子是有办法可以上去的..";
		next;
		mes "...看样子是可以利用排水管 ....";
		next;
		switch(select("利用排水管:寻找其它方法")) {
		case 1:
			if (rand(1,3) == 2) {
				mes "搭着排水管进入到了爱丽的房间";
				close2;
				warp "kh_school",185,185;
				end;
			}
			else {
				mes "搭着排水管爬上去之后又滑下来了";
				percentheal -10,0;
				close;
			}
		case 2:
			mes "寻找别的方法吧";
			close;

		}
	}
	else {
		mes "好像还没有获得充分的情报啊, ";
		mes "重新再回到别墅吧";
		close;
	}
}

//----------------------------------------------------------------------------
// 爱丽 (在宿舍)
//----------------------------------------------------------------------------
kh_school,178,180,4	script	爱丽	4_F_KHELLY,{
	if (checkweight(908,200) == 0) {
		mes "请在这里暂停一下 !!";
		mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
		close;
	}
	if (KielHyreQuest < 30) {
		mes "[爱丽]";
		mes "你是谁!";
		mes "请你离开这里";
		close2;
		percentheal -99,0;
		warp "yuno_fild08",100,100;
		end;
	}
	else if (KielHyreQuest < 32) {
		mes "[爱丽]";
		mes "............";
		next;
		mes "[爱丽]";
		mes "............";
		close;
	}
	else if (KielHyreQuest == 32) {
		mes "[爱丽]";
		mes "............";
		next;
		mes "难道爱丽.. 被石化了吗.. 要怎么办呢..";
		next;
		switch(select("试着触碰一下爱丽:试着触碰一下爱丽:不管它")) {
		case 1:
			mes "我拾起颤抖的手, 轻轻的推了一下爱丽的手臂";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "爱丽? 爱丽?";
			next;
			mes "没有任何反应.. 到底是怎么一回事啊..";
			close;
		case 2:
			input .@KHInput$;
			if (.@KHInput$ == "别再睡了起床了爱丽") {
				mes "[爱丽]";
				mes ".............";
				next;
				mes "瞬间爱丽握紧的拳头松开了, 掉落了^3355FF小的黄金钥匙^000000和 ^3355FF钮扣^000000 ...? 这是什么呀?";
				getitem 7493,1; //Golden_Key
				getitem 7494,1; //Kiel_Button
				set KielHyreQuest,34;
				close;
			}
			else {
				mes "[爱丽]";
				mes "..........";
				next;
				mes "爱丽没有任何反应";
				close;
			}
		case 3:
			mes "[爱丽]";
			mes "..........";
			next;
			mes "爱丽没有任何反应";
			close;
		}
	}
	else if (KielHyreQuest == 34) {
		if (countitem(7491) < 1) {
			mes "^3355FF从爱丽身上得到的^FF0000黄金钥匙^000000, 应该可以开启^0000FF灰色箱子^000000似的^000000";
			close;
		}
		else {
			mes "^3355FF从爱丽身上得到的^FF0000黄金钥匙^000000, 应该可以开启^0000FF灰色箱子^000000似的^000000";
			next;
			mes "用^ff0000黄金钥匙^000000打开^0000FF箱子^000000后,  在开启的^0000FF箱子^000000里面发现^00CC52纸条^000000和 ^0000FF蓝色钥匙卡^000000";
			next;
			mes "齐尔打破了禁忌,  爱丽..";
			mes "对寄望于你们的我, 随便的给换掉了!";
			mes "当你发现这箱子时, 我可能已经陷入危险之中, ";
			mes "假如只有你能开启这个箱子的话";
			mes "那我就安心了, 我就把我的生命寄托给你了, ";
			mes "人形, 若你看到他了的话 我想你也知道";
			mes "你已经不是人类了, ";
			mes "详细的事情等你进到工厂的话就知道了, ";
			mes "工厂的入口是在^0000FF教堂旁边的墓地附近^000000, ";
			mes "请执行命令吧 爱丽, ";
			mes "请你去找在工厂秘密房间里的^0000FF爱丽希雅^000000吧, ";
			mes "我在那女人的保安系统上输入了我的名字, ";
			mes "那女的会来救我的";
			getitem 7495,1; //Blue_Key_Card
			delitem 7491,1; //Iron_Box
			set KielHyreQuest,36;
			close;
		}
	}
	else if (KielHyreQuest >= 36) {
		mes "在箱子里面的纸条, 如下面这样写着";
		next;
		mes "齐尔打破了禁忌,  爱丽..";
		mes "对寄望于你们的我, 随便的给换掉了!";
		mes "当你发现这箱子时, 我可能已经陷入危险之中, ";
		mes "假如只有你能开启这个箱子的话";
		mes "那我就安心了, 我就把我的生命寄托给你了, ";
		mes "人形, 若你看到他了的话 我想你也知道";
		mes "你已经不是人类了, ";
		mes "详细的事情等你进到工厂的话就知道了, ";
		mes "工厂的入口是在^0000FF教堂旁边的墓地附近^000000, ";
		mes "请执行命令吧 爱丽, ";
		mes "请你去找在工厂秘密房间里的^0000FF爱丽希雅^000000吧, ";
		mes "我在那女人的保安系统上输入了我的名字, ";
		mes "那女的会来救我的";
		close;
	}
}

//----------------------------------------------------------------------------
// 姜饼提篮
//----------------------------------------------------------------------------
kh_school,175,176,0	script	姜饼提篮#kh	HIDDEN_NPC,{
	if (KielHyreQuest < 30) {
		mes "^3355FFIt's a cookie";
		mes "basket filled with";
		mes "delicious cookies.^000000";
		close;
	}
	else if (KielHyreQuest == 30) {
		mes "是爱丽的姜饼提篮, 在装满姜饼的缝隙中 看到了白色物体, 拿起了一块姜饼后 发现了^FF0000纸条^000000";
		next;
		switch(select("阅读看看:不管它")) {
		case 1:
			mes "穿着黑色衣服的男子";
			mes "嘴里边念着奇怪的咒文边走着, ";
			mes "只要是听到那个咒文";
			mes "孩子们像个人形一样被石化了!";
			mes "好可怕啊..";
			mes "现在偷偷的回到房间";
			mes "正在写这张纸条啊, ";
			mes "我把窗户打开了, ";
			mes "啊啊..";
			mes "不知道你能否看到这些字?";
			mes "难道我也会跟朋友们一样被暂停吗?";
			mes "不要!";
			mes "我不想那样啊..";
			mes "啊, 好像听到那个人在推门的声音啊..";
			mes " '"+strcharinfo(0)+"先生/小姐!!";
			set KielHyreQuest,32;
			close;
		case 2:
			mes ".........";
			close;
		}
	}
	else if (KielHyreQuest < 108) {
		mes "有摆放着慢慢冷却的姜饼";
		close;
	}
	else if (KielHyreQuest == 108) {
		mes "暂时看着姜饼提篮时, ";
		mes "从开启的窗户那里吹进来的风";
		mes "把姜饼提篮稍微吹动了一下, ";
		mes "在那下面看到了还没有被发现的";
		mes "^FF0000信件, ^000000";
		mes "也许是.. 爱丽所写的^FF0000信件^000000";
		next;
		mes "写给"+strcharinfo(0)+"..";
		mes "我爱丽虽然是一位, 神经大条错误百出每次被老师挨骂的人, ";
		mes "今天确实把姜饼烤的很有味道, 还难得被老师夸赞了呢, ";
		mes "我想这都是"+strcharinfo(0)+"先生/小姐给予帮忙的关系啊, 真的谢谢你!";
		mes "看到"+strcharinfo(0)+"这样的先生/小姐的话, 世界上还真的有许多好心人啊.. 会有这种想法啊, ";
		mes "只会骂人的老师们都是为了爱丽好才会这样.. 让我郁卒的心有点云霄散开, ";
		mes strcharinfo(0)+"先生/小姐是好人啊.. 我喜欢你的细心照顾, ";
		mes "虽然现在我还不能见到我爷爷, 假如能见到我爷爷的话, 我想把 "+strcharinfo(0)+"先生/小姐介绍给我爷爷认识, ";
		mes "假如我爷爷见到"+strcharinfo(0)+"先生/小姐的话, 也会把平常严肃的面孔收起来并对着你微笑的, ";
		mes strcharinfo(0)+"先生/小姐, 再一次的感谢你, ";
		mes "希望能永远在爱丽身边, 成为爱丽的重要人吧, ";
		mes "我也会试着努力成为能带给"+strcharinfo(0)+"先生/小姐一个微笑的人!";
		mes " ";
		mes "　　　　　　　　　　　爱丽";
		next;
		mes "从饼干提篮里的姜饼里, ";
		mes "还是可以感觉到";
		mes "爱丽的气息..";
		mes "我拿起一块姜饼";
		mes "大大的咬了一口, ";
		mes "稍微有点苦涩后, ";
		mes "甜美的巧克力味散发在嘴里";
		set KielHyreQuest,109;
		next;
		input .@input$;
		mes "["+strcharinfo(0)+"]";
		mes ""+.@input$+"";
		mes "回去吧再没有理由留在这边了";
		close2;
		warp "yuno_fild08",69,183;
		end;
	}
	else {
		mes "时间流失里面装着坏掉的姜饼";
		close;
	}
	end;
}

//----------------------------------------------------------------------------
// Elly's Window (In Dormitory)
//----------------------------------------------------------------------------
kh_school,188,185,0	script	窗户#kh2	HIDDEN_NPC,{
	warp "yuno_fild08",69,183;
	end;
}

//----------------------------------------------------------------------------
// Grave/Kiel Hyre dungeon entry
//----------------------------------------------------------------------------
yuno_fild08,71,170,0	script	坟墓#kh	HIDDEN_NPC,{
	if (KielHyreQuest < 36) {
		mes "是某一个人的坟墓";
		close;
	}
	else if (KielHyreQuest == 36) {
		if (countitem(7492) < 1) {
			mes "检查坟墓周边时发现了隐藏的门";
			next;
			mes "仔细的观察后, 发现了可以放入某种东西的小缝隙和数字板";
			close;
		}
		else {
			mes "检查坟墓周边时发现了隐藏的门";
			next;
			mes "仔细的观察后, 发现了可以放入某种东西的小缝隙和数字板";
			next;
			mes "在小缝隙里放入什么呢?";
			next;
			input .@KHInput$;
			if (.@KHInput$ == "黄色钥匙卡") {
				mes "放入'^0000FF黄色钥匙卡^000000'后, '哔~'的一声 并且传出人的声音了, 请输入'^008000暗号^000000 '";
				next;
				input .@KHInput$;
				next;
				if (.@KHInput$ == "4772961") {
					mes "输入了数字";
					mes "'确认完毕, ";
					mes "^FF0000启 海伊洛^000000先生 欢迎您, ";
					mes "'哔~'的一声后出现了通路";
					set KielHyreQuest,38;
					close;
				}
				else {
					mes "输入了数字'暗号错误, ";
					mes "请你重新输入";
					close;
				}
			}
			else {
				mes "没有任何反应";
				close;
			}
		}
	}
	else if ((KielHyreQuest >= 38) && (KielHyreQuest < 106)) {
		mes "通往工厂的门已经开启着";
		next;
		switch(select("进去:不进去")) {
		case 1:
			warp "kh_dun01",3,230;
			end;
		case 2:
			mes "........";
			close;
		}
	}
	else if (KielHyreQuest >= 106) {
		if (countitem(7509) < 1) {
			mes "通往工厂的门已经关闭着";
			close;
		}
		else {
			mes "走到坟墓旁边之后, ";
			mes "在坟墓的某一部份上";
			mes "开始闪烁着光芒";
			next;
			switch(select("使用^FF0000华丽的钥匙卡^000000:不理它")) {
			case 1:
				mes "使用钥匙卡后, 形成了通往内部的通路";
				next;
				switch(select("进去:不进去")) {
				case 1:
					warp "kh_dun01",3,230;
					end;
				case 2:
					mes ".........";
					close;
				}
			case 2:
				mes ".........";
				close;
			}
		}
	}
}

//============================================================================

//============================================================================
// 启 海 依洛 别墅NPC
//============================================================================

//----------------------------------------------------------------------------
// 别墅管家
//----------------------------------------------------------------------------
yuno_fild02,93,210,4	script	别墅管家#kh	4_M_03,{
	if ((KielHyreQuest < 12) || (KielHyreQuest > 12)) {
		mes "[别墅管家]";
		mes "因为这里是私有地 ";
		mes "所以不能随便进出";
		close;
	}
	else if (KielHyreQuest == 12) {
		mes "[别墅管家]";
		mes "因为这里是私有地 ";
		mes "所以不能随便进出";
		next;
		switch(select("我是要来见^FF0000启 海伊洛先生^000000的:我了解了")) {
		case 1:
			mes "[别墅管家]";
			mes "请问有事先约好吗?";
			next;
			switch(select("是的:没有")) {
			case 1:
				mes "[别墅管家]";
				mes "非常抱歉, 现在主人出差中, 所以不能见面啊";
				next;
				mes "[别墅管家]";
				mes "主人现在出差中, 所以不能见面啊";
				set KielHyreQuest,14;
				close;
			case 2:
				mes "[别墅管家]";
				mes "若没有事先约好的话 是不能见面的";
				next;
				mes "[别墅管家]";
				mes "主人现在出差中, 所以不能见面啊";
				close;
			}
		case 2:
			mes "[别墅管家]";
			mes "再见";
			close;
		}
	}
}

//----------------------------------------------------------------------------
// 别墅的门 (left)
//----------------------------------------------------------------------------
yuno_fild02,75,218,0	script	门#kh2	HIDDEN_NPC,{
	if (KielHyreQuest < 16) {
		mes "有一道被关闭的门";
		close;
	}
	if (KielHyreQuest == 16) {
		mes "有一道被关闭的门";
		next;
		switch(select("开启:不管它")) {
		case 1:
			mes "使用钥匙打开门之后, 从门缝里掉落了一个纸条, 纸条上面写着 '^FF0000前 6、左边 3、前3、左边4^000000, ";
			close2;
			set KielHyreQuest,18;
			warp "kh_vila",188,18;
			end;
		case 2:
			mes ".......";
			close;
		}
	}
	else {
		mes "有一道开启的门";
		next;
		switch(select("进去:不进去")) {
		case 1:
			warp "kh_vila",188,18;
			end;
		case 2:
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage Door (Right)
//----------------------------------------------------------------------------
yuno_fild02,109,218,0	script	门#kh1	HIDDEN_NPC,{
	if (KielHyreQuest != 16) {
		mes "有一道被关闭的门";
		close;
	}
	if (KielHyreQuest == 16) {
		mes "有一道被关闭的门";
		next;
		switch(select("开启:不管它")) {
		case 1:
			mes "从爱丽那里得到的钥匙不能使用";
			close;
		case 2:
			mes ".......";
			close;
		}
	}
}


//----------------------------------------------------------------------------
// Store room interior; Wall
//----------------------------------------------------------------------------
kh_vila,191,14,0	script	墙壁#kh	HIDDEN_WARP_NPC,1,1,{
	if (KielHyreQuest < 28) {
		mes "单纯的墙壁";
		close;
	}
	if (KielHyreQuest >= 28) {
		mes "墙面破裂后出现了一个秘密通路";
		next;
		switch(select("移动:不移动")) {
		case 1:
			warp "kh_vila",17,177;
			end;
		case 2:
			close;
		}
	}

OnOpenDoor:
	misceffect 316;
	end;
}

//----------------------------------------------------------------------------
// Store room interior; books
//----------------------------------------------------------------------------
kh_vila,184,20,0	script	书#kh1::BookKHQ1	HIDDEN_NPC,{
	if (KielHyreQuest != 26) {
		mes "书有插在那边";
		close;
	}
	else if (KielHyreQuest == 26) {
		if (rand(1,10) == 8) {
			mes "从书架里把书拿起来时, 楼梯旁的墙面破裂后出现了一个通路";
			donpcevent "Wall#kh::OnOpenDoor";
			set KielHyreQuest,28;
			close;
		}
		else {
			mes "书有插在那边";
			close;
		}

	}

}
kh_vila,181,20,0	duplicate(BookKHQ1)	书#kh2	HIDDEN_NPC
kh_vila,178,20,0	duplicate(BookKHQ1)	书#kh3	HIDDEN_NPC
kh_vila,175,19,0	duplicate(BookKHQ1)	书#kh4	HIDDEN_NPC

//----------------------------------------------------------------------------
// Store room interior; Letter to Elly on the floor.
//----------------------------------------------------------------------------
kh_vila,179,11,0	script	信件#kh	-1,1,1,{
//OnTouch2:
OnTouch:
	if (KielHyreQuest == 18) {
		if (checkweight(7490,1) == 0) {
			mes "请在这里暂停一下 !!";
			mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
			close;
		}
		mes "发现了掉落在地板上的'^FF0000信件^000000'";
		getitem 7490,1; //Kyll_Hire_Letter
		set KielHyreQuest,20;
		close;
	} 
	else{
		mes "地板上是空空的";
		close;
	}
	end; 
}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Box (Pet Food vending machine)
//----------------------------------------------------------------------------
kh_vila,16,175,0	script	箱子#khp1	HIDDEN_NPC,{
	mes "　　　好吃 营养又高的宠物用";
	mes "　 宠物饲料 自动贩卖机, ";
	mes "　　　为了你可爱的宠物";
	mes "　　　　唯一的选择!";
	mes "　和市面上所贩卖的一般宠物饲料";
	mes "　　　　　是不一样的!";
	mes "使用方法:";
	mes "把1100金币投入到投币口里, ";
	mes "　　　 把把手往右边转2次, ";
	mes "　　　 在取物口里会出现";
	mes "　　好吃 营养又高的宠物饲料";
	next;
	switch(select("购买:不购买")) {
	case 1:
		if (Zeny < 1100) {
			mes "没有足够的金币可以投入投币口里";
			close;
		}
		else {
			mes "看来是有点贵了还是购买吧";
			next;
			mes "只是宠物饲料啊";
			set Zeny,Zeny-1100;
			getitem 537,1;	//Pet_Food
			close;
		}
	case 2:
		mes "感觉有点不太对劲";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Apple Box (Useless?)
//----------------------------------------------------------------------------
kh_vila,30,184,0	script	苹果 箱子#khp1	HIDDEN_NPC,{
	mes "里面装满着好吃的苹果";
	mes "一堆";
	next;
	switch(select("拿走:不拿走")) {
	case 1:
		mes "..想要去拿苹果的时候, ";
		mes "在背后感觉到一股寒意, ";
		mes "难道是有死神在吗?";
		next;
		mes "看样子还是不要拿好了";
		close;
	case 2: 
		mes "感觉有点不太对劲";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, dining room; Map
//----------------------------------------------------------------------------
kh_vila,44,126,0	script	地图#khp1	HIDDEN_NPC,{
	if ((KHCottagePoem1 < 2) && (KielHyreQuest < 30)) {
		mes "挂着一幅漂亮的地图, 上面画着 卢恩--米德加兹和秀发兹发德, 那左边有着别的国家, 是一个不清楚的国家, ";
		mes "本来想看仔细一点就用手去触摸地图时, 触摸到了一个粗壮的东西";
		next;
		switch(select("不要去理它:多观察一点")) {
		case 1:
			mes "看样子并不是什么重要的物品";
			close;
		case 2:
			mes "经过仔细观察的结果, 地图是牢牢的固定在墙壁上的, 好像是用胶水之类的物体";
			mes "所固定似的, ";
			mes "若把胶水的黏性降低的话";
			mes "应该是可以拔掉似的";
			set KHCottagePoem1,1;
			close;
		}
	}
	else  if ((KHCottagePoem1 == 2) && (KielHyreQuest < 30)) {
		mes "用壶水所出现的水蒸气, 润湿地图的后方, 地图一点点可以开始拔起来了";
		next;
		mes "稍微抬起来地图后, 地图后方 '咚~' 的一声, 掉落了一个东西, 捡起来看是一张被揉搓的 纸张";
		next;
		mes "纸张上面写着 如下般的内容";
		next;
		mes "^0000FF井水干枯地面龟裂的话, 通往那女人心脏的路会开启, 那女人的心脏如透明的水晶一样, ";
		mes "那女人所在地方如北极冰河般一样冷, 我为了找那位女人, 举起了四把剑和四只蛇决斗了";
		mes "第一把剑是 爱, 第二把剑是 绝望, 第三把剑是 忿怒, 第四把剑是 希望, ";
		mes "为了寻找那女人所在的地方, 为了拯救那女人, 我举起了四把剑, 和四只蛇决斗了^000000";
		next;
		mes ".....是有着什么样的意义 我也不清楚";
		set KHCottagePoem1,3;
		close;
	}
	else  if ((KHCottagePoem1 > 2) || (KielHyreQuest >= 30)) {
		mes "这里是获得写着诗纸条的地方, ";
		mes "再确认一下诗吗?";
		next;
		switch(select("确认一下:没必要")) {
		case 1:
			mes "纸张上面写着 如下般的内容";
			next;
			mes "^0000FF井水干枯地面龟裂的话, 通往那女人心脏的路会开启, 那女人的心脏如透明的水晶一样, ";
			mes "那女人所在地方如北极冰河般一样冷, 我为了找那位女人, 举起了四把剑和四只蛇决斗了";
			mes "第一把剑是 爱, 第二把剑是 绝望, 第三把剑是 忿怒, 第四把剑是 希望, ";
			mes "为了寻找那女人所在的地方, 为了拯救那女人, 我举起了四把剑, 和四只蛇决斗了^000000";
			next;
			mes ".....是有着什么样的意义 我也不清楚";
			close;
		case 2:
			mes "感觉上没这个必要似的";
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage interior, kitchen; Pot
//----------------------------------------------------------------------------
kh_vila,33,184,0	script	壶#khp1	HIDDEN_NPC,{
	if (KHCottagePoem1 < 1) {
		mes "有着热腾腾的壶水, 热腾腾的蒸气慢慢的飘上来中";
		close;
	}
	else if (KHCottagePoem1 == 1) {
		mes "有着热腾腾的壶水, 热腾腾的蒸气慢慢的飘上来中";
		next;
		mes "热腾腾的蒸气...?!";
		mes "不知道用这个可不可以";
		mes "把地图上的胶水给稀释掉呢?";
		next;
		switch(select("试试看:看样子不太可行的样子")) {
		case 1:
			mes "^FF0000获得了有热腾腾蒸气的壶^000000, 不小心烫伤了一点自己";
			set KHCottagePoem1,2;
			close;

		case 2:
			mes "寻找其它方法吧";
			close;
		}
	}
	else if ((KHCottagePoem1 > 1) || (KielHyreQuest >= 30)){
		mes "这个地方是有着热腾腾蒸气壶的地方";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, fire place; Calabash
//----------------------------------------------------------------------------
kh_vila,14,55,0	script	葫芦瓶#khp1	HIDDEN_NPC,{
	if ((countitem(7329) < 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		if (checkweight(7329,1) == 0) {
			mes "请在这里暂停一下 !!";
			mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
			close;
		}
		mes "看起来很贵的葫芦瓶, ";
		mes "..要怎么办呢?";
		next;
		switch(select("把瓶子打破看看:检查里面:不理它")) {
		case 1:
			mes "看起来很贵....";
			mes "不能随便乱动别人的东西";
			close;
		case 2:
			mes "到底会有什么呢? .....";
			next;
			mes "把瓶子抬起来轻轻的摇晃时, 在里面听到'锵~' 的一声, 果然里面有个 某种东西似的";
			next;
			mes "获得了'^FF0000破旧铜铸钥匙^000000'";
			getitem 7329,1; //Old_Bronze_Key
			close;
		case 3:
			mes "看起来只是普通的瓶子, ";
			mes "虽然看起来是有点贵..";
			close;
		}
	}
	else {
		mes "是获得破旧铜铸钥匙的葫芦瓶, ";
		mes "看起来很贵";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, garden; Pool
//----------------------------------------------------------------------------
kh_vila,39,41,0	script	池塘#khp1	HIDDEN_NPC,{
	if ((KHCottagePoem1 < 3) && (KielHyreQuest < 30)) {
		mes "看起来有着凉快的水积在那边";
		next;
		mes "....应该不能喝吧?";
		close;
	}
	else if ((KHCottagePoem1 == 3) && (KielHyreQuest < 30)) {
		mes "看起来有着凉快的水积在那边";
		next;
		mes "看到了狮子像和两个把手, 可以拉拉看吗?";
		next;
		switch(select("拉拉看:不去拉")) {
		case 1:
			mes "要拉哪一个呢?";
			next;
			switch(select("右边把手:左边把手")) {
			case 1:
				mes "拉起了把手, ";
				mes "从狮子像的嘴里开始流出水了, ";
				mes "满好看的嘛";
				close;
			case 2:
				mes "拉起了把手";
				mes "池塘底部的洞开启了, ";
				mes "使积水处的水开始流走了, ";
				mes "等水都流走后有着绿色青苔的";
				mes "石头池塘裸裸的呈现着";
				next;
				switch(select("看样子在没有什么可以值得观察的了:再多观察一点")) {
				case 1:
					mes "水都流走的池塘";
					mes "没有什么好看的地方了";
					close;
				case 2:
					mes "观察池塘在角落里面, 有着小小的按钮物体";
					next;
					switch(select("按按看:....不管它")) {
					case 1:
						mes "按下按钮后, 听到了 '嗡~' 的一声, 应该是从^FF0000走道楼梯^000000那里传来的";
						set KHCottagePoem1,4;
						close;
					case 2:
						mes "可能是陷阱也不一定 不用理它";
						close;
					}
				}
			}
		case 2:
			mes "看样子还是不要碰它比较好";
			close;
		}
	}
	else if ((KHCottagePoem1 > 3) || (KielHyreQuest >= 30)) {
		mes "在池塘里按下按钮后, ";
		mes "从楼梯那里传来";
		mes "'嗡~' 的一声";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Vicious Dog
//----------------------------------------------------------------------------
kh_vila,181,178,4	script	看起来 很凶的狗#khp1	4_DOG01,7,3,{
//OnTouch2:
OnTouch:
	mes "厄勒勒勒勒勒勒~";
	next;
	mes "看起来很凶的狗 在那里嚷嚷着, 可以小心的路过吗?";
	next;
	switch(select("路过:重新下去")) {
	case 1:
		if (countitem(537) >= 1) {
			mes "......仔细的想一想.. 看来有带宠物饲料啊";
			next;
			switch(select("试着使用宠物饲料看看:看样子行不通的")) {
			case 1:
				mes "把宠物饲料往前方推出去, ";
				mes "狗开始摇尾巴接近后, ";
				mes "对着宠物饲料";
				mes "开始大口大口的吃了起来, ";
				mes "趁这时候通过";
				delitem 537,1; //Pet_Food
				close2;
				warp "kh_vila",173,182;
				end;
			case 2:
				break;
			}
		}
		mes "小心小心的接近后, ";
		mes "狗还是凶猛的嚷嚷着";
		next;
		mes "想要从旁边路过时";
		mes "...";
		mes "汪!汪!汪!汪!汪!!!!";
		next;
		mes ".......";
		mes "被狗追逐只好逃到楼下了";
		close2;
		warp "kh_vila",126,70;
		end;
	case 2:
		mes ".....会不会被狗咬啊?";
		close2;
		warp "kh_vila",126,70;
		end;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Drawer, first room nightstand
//----------------------------------------------------------------------------
kh_vila,115,186,0	script	抽屉#khp1	111,{
	if (checkweight(7492,1) == 0) {
		mes "请在这里暂停一下 !!";
		mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
		close;
	}
	if ((countitem(7492) < 1) && (KielHyreQuest <= 36)) {
		mes "好像是有很多人的 手所触碰过的抽屉";
		next;
		switch(select("打开抽屉看看:寻找别的地方")) {
		case 1:
			mes "打开抽屉后看到黄色的物体";
			getitem 7492,1; //Yellow_Key_Card
			close;
		case 2:
			mes "寻找别的地方";
			close;
		}
	}
	else {
		mes "...看样子所需要的东西都找到了, ";
		mes "回去吧";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Box
//----------------------------------------------------------------------------
kh_vila,107,126,0	script	箱子#khp2	HIDDEN_NPC,{
	if ((countitem(7329) < 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		mes "看到了一个摆放着坚固的箱子, ";
		mes "观察箱子后发现里面还有";
		mes "双层构造的其它箱子, ";
		mes "第二个箱子被钥匙给锁住了, ";
		close;
	}
	else if ((countitem(7329) >= 1) && (countitem(7516) < 1) && (countitem(7491) < 1) && (KielHyreQuest < 38)) {
		mes "看到了一个摆放着坚固的箱子, ";
		mes "观察箱子后发现里面还有";
		mes "双层构造的其它箱子, ";
		mes "第二个箱子被钥匙给锁住了, ";
		mes "....会不会是从葫芦瓶里得到的钥匙";
		mes "能开启呢?";
		next;
		switch(select("开启看看:应该是不会对的...")) {
		case 1:
			mes "'喳喀' 开启了";
			next;
			mes "'嘻嘻~' 箱子里面有 绿色钥匙卡";
			next;
			mes ".....是钥匙....";
			getitem 7516,1; //Green_Key_Card
			delitem 7329,1; //Old_Bronze_Key
			close;
		case 2:
			mes "应该是不会对的...";
			close;
		}
	}
	else {
		mes "是获得^008000绿色钥匙卡^000000的箱子";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Bookshelf.
//----------------------------------------------------------------------------
kh_vila,181,138,0	script	书柜#khp1	HIDDEN_NPC,{
	if ((countitem(7491) < 1) && (countitem(7329) >= 1) || (countitem(7516) >= 1)) {
		mes "装满许多书的书柜, 有着相当多量的书籍 满满的 .......";
		next;
		mes "........嗯? '为了爱丽'? '爱丽'?";
		next;
		switch(select("拿起书来查看一下:很特别的书啊")) {
		case 1:
			mes "拿起书来查看后 没有看到什么特别的内容, 把书重新放回原处";
			mes "查看书缝时, 看到里面有坚硬的铁壁";
			next;
			switch(select("再多观察一下:应该是墙吧")) {
			case 1:
				mes "把周围的书拿开后, 出现了以铁做成的金库, 看到了两个钥匙孔, ...打不开";
				next;
				switch(select("用已携带的钥匙试试看:....好像没有合适的钥匙")) {
				case 1:
					mes "第一个钥匙孔";
					next;
					if (countitem(7329) >= 1) {
						select("破旧铜铸钥匙:别墅补助钥匙");
						mes "第二个钥匙孔";
						next;
						select("破旧铜铸钥匙:别墅补助钥匙");
					}
					else if (countitem(7516) >= 1) {
						switch(select("绿色钥匙:别墅补助钥匙")) {
						case 1:
							set .@KHFirstKeyhole,1;
							break;
						case 2:
							set .@KHFirstKeyhole,2;
							break;
						}
						mes "第二个钥匙孔";
						next;
						switch(select("绿色钥匙:别墅补助钥匙")) {
						case 1:
							set .@KHSecondKeyhole,1;
							break;

						case 2:
							set .@KHSecondKeyhole,2;
							break;

						}
						if (.@KHFirstKeyhole == 2) && (.@KHSecondKeyhole == 1) {
							mes "和'喳喀!'一声 一起 金库开启了, 金库里面有着白色的箱子";
							next;
							mes "已获得了^FF0000白色箱子^000000";
							delitem 7489,1; //Villa_Spare_Key
							delitem 7516,1; //Green_Key_Card
							getitem 7491,1; //Iron_Box
							close;
						}

					}
					mes "打不开";
					close;
				case 2:
					mes "多逛一下别墅好了";
					close;
				}
			case 2:
				mes "把书放在原来的地方了";
				close;
			}
		case 2:
			mes "除此之外没有看到特别的东西";
			close;
		}
	}
	else {
		mes "应该还需要些东西吧, ";
		mes "再找找看";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Desk
//----------------------------------------------------------------------------
kh_vila,118,144,0	script	书桌#khp1	HIDDEN_NPC,{
	if (KHCottagePoem2 < 1) {
		mes "看到书桌上面有着";
		mes "乱七八糟的书籍和纸屑, ";
		mes "上面写着人工动力的制作法和利用方法..";
		mes "大贤者 霸肋门德的论文集..";
		mes "工厂用自动机械的活用法..";
		mes "高级魔法卷轴的制作法..";
		mes "为了爱丽..";
		next;
		mes "'爱丽?'";
		mes "在翻阅全部都是白色书页的时候, ";
		mes "发现了一张纸, ";
		mes "上面记载着有 '启 海伊洛";
		mes "企业的文章";
		mes "......先把它拿在身边吧";
		next;
		mes "获得了'^FF0000记载着 启 海伊洛 文章的纸^000000'";
		set KHCottagePoem2,1;
		close;
	}
	else if (KHCottagePoem2 >= 1) {
		mes "有著书和文件堆满的书桌, 感觉到一股头痛的样子";
		close;
	}
}

//----------------------------------------------------------------------------
// Cottage interior, upstairs; Medicine Chest
//----------------------------------------------------------------------------
kh_vila,123,170,0	script	药柜#khp1	HIDDEN_NPC,{
	if ((KHCottagePoem2 < 1) && (KielHyreQuest < 30)) {
		mes "形形色色的瓶子混乱的摆在那里, 是用在那里的药呢?";
		close;
	}
	else if ((KHCottagePoem2 == 1) && (KielHyreQuest < 30)) {
		mes "形形色色的瓶子混乱的摆在那里, 是用在那里的药呢?";
		mes "......好像在那里某一本书上看过, ";
		mes "上面写着好像在使用特定的液体时, 墨水才会有反应啊..";
		next;
		switch(select("真的会有那种东西吗...:仔细想一想 刚才那个纸张才是...")) {
		case 1:
			mes "....怎么可能会有那种东西呢";
			close;
		case 2:
			switch(select("把红色试药滴落在上面:把蓝色试药滴落在上面:把黄色试药滴落在上面:把绿色试药滴落在上面:还是 不要做")) {
			case 1:
				set .@KHPotionColor$,"红色";
				break;
			case 2:
				mes "^3355FF第一头蛇是以硬铁所做成的蛇, 有着冰冷的身躯和坚硬的头脑, 我拾起忿怒对着蛇头砸下去了, 之后蛇就变的静悄悄了, ";
				mes "第一头蛇是以硬铁所做成的蛇, 有着冰冷的身躯和坚硬的头脑, 我拾起忿怒对着蛇头砸下去了, 之后蛇就变的静悄悄了, ";
				mes "第三头蛇是以血和肉所做成的蛇, 有着温暖的身躯和柔软的头脑, 我拾起希望缠住了蛇的身躯, 之后蛇就变的静悄悄了, ";
				mes "第四头蛇是没有形体的蛇, 它的身躯和头脑没有任何人知道, 我拾起绝望投向虚空处, 蛇是否真的平静下来";
				mes "没有人会知道的, 没有人会知道的, 我的名字是 ^000000'^FF0000迷路的小恶魔^000000'";
				mes "^3355FF我拿着四把剑和对着四头蛇, 在黑暗里寻找那位女的 ^000000";
				next;
				mes "....... 好奇怪的诗啊...到底有什么样的意义呢?";
				set KHCottagePoem2,2;
				close;
			case 3:
				set .@KHPotionColor$,"黄色";
				break;
			case 4:
				set .@KHPotionColor$,"绿色";
				break;
			case 5:
				mes "....怎么可能会有那种东西呢";
				close;
			}
			mes .@KHPotionColor$+"试药顺着纸张的表面流下了, ";
			mes "很神奇的没有润湿纸面";
			mes "也没有任何反应";
			close;
		}
	}
	else if ((KHCottagePoem2 >= 2) || (KielHyreQuest >= 30)) {
		mes "这里是";
		mes "在纸里面找到诗的地方, ";
		mes "要在念一遍看看吗?";
		next;
		switch(select("因为没有时间下一次再念吧:我要念")) {
		case 1:
			mes "赶快到家里面观察一下吧";
			close;
		case 2:
			mes "^3355FF第一头蛇是以硬铁所做成的蛇, 有着冰冷的身躯和坚硬的头脑, 我拾起忿怒对着蛇头砸下去了, 之后蛇就变的静悄悄了, ";
			mes "第一头蛇是以硬铁所做成的蛇, 有着冰冷的身躯和坚硬的头脑, 我拾起忿怒对着蛇头砸下去了, 之后蛇就变的静悄悄了, ";
			mes "第三头蛇是以血和肉所做成的蛇, 有着温暖的身躯和柔软的头脑, 我拾起希望缠住了蛇的身躯, 之后蛇就变的静悄悄了, ";
			mes "第四头蛇是没有形体的蛇, 它的身躯和头脑没有任何人知道, 我拾起绝望投向虚空处, 蛇是否真的平静下来";
			mes "没有人会知道的, 没有人会知道的, 我的名字是 ^000000'^FF0000迷路的小恶魔^000000'";
			mes "^3355FF我拿着四把剑和对着四头蛇, 在黑暗里寻找那位女的 ^000000";
			close;

		}
	}
}

//----------------------------------------------------------------------------
// Cottage interior, stair case; Sword hilt
//----------------------------------------------------------------------------
kh_vila,136,68,0	script	剑装饰#kh	HIDDEN_NPC,{
	if ((KHCottagePoem1 < 3) || (KHCottagePoem2 < 2) && (KielHyreQuest < 30)) {
		mes "有一个把手很漂亮的剑";
		mes "和一个感觉可怕的蛇雕像";
		close;
	}
	else if ((KHCottagePoem1 <= 4) || (KHCottagePoem2 <= 2) && (KielHyreQuest < 30)) {
		mes "有一个把手很漂亮的剑";
		mes "和一个感觉可怕的蛇雕像, ";
		mes "..四把剑?";
		mes "四头蛇?";
		mes "和刚才看到的诗";
		mes "也什么关系吗?";
		next;
		switch(select("应该没有什么关系吧:我要再观察一下")) {
		case 1:
			mes "应该是偶然吧";
			close;
		case 2:
			mes "仔细的观察蛇雕像, 在蛇头左侧边有一个";
			mes "可以放入剑的洞口";
			next;
			switch(select("是什么样的洞口呢?:拔出剑来插插看")) {
			case 1:
				mes "...除了剑之外";
				mes "看不到其它可适当插入的东西";
				close;
			case 2:
				if (KHCottagePoem1 != 4) {
					mes "剑是可以稍微移动的, ";
					mes "好像被什么东西给顶住了不能动";
					close;
				}
				else {
					mes "怎么办呢?";
					next;
					mes "拔出了第一把剑";
					next;
					switch(select("第一头蛇:第二头蛇:第三头蛇:第四头蛇")) {
					default:
						break;
					case 2:
						set .@KHSwords,.@KHSwords+1;
						break;
					}
					next;
					mes "拔出了第二把剑";
					next;
					switch(select("第一头蛇:第二头蛇:第三头蛇:第四头蛇")) {
					default:
						break;
					case 4:
						set .@KHSwords,.@KHSwords+1;
						break;
					}
					next;
					mes "拔出了第三把剑";
					next;
					switch(select("第一头蛇:第二头蛇:第三头蛇:第四头蛇")) {
					case 1:
						set .@KHSwords,.@KHSwords+1;
						break;
					default:
						break;
					}
					next;
					mes "拔出了第四把剑";
					next;
					switch(select("第一头蛇:第二头蛇:第三头蛇:第四头蛇")) {
					default:
						break;
					case 3:
						set .@KHSwords,.@KHSwords+1;
						break;
					}

					if (.@KHSwords == 4) {
						mes "突然间听到低沈的嗡嗡声音, 感觉到身躯";
						mes "移动到别的地方去";
						set KHCottagePoem1,5;
						set KHCottagePoem2,3;
						close2;
						warp "kh_vila",178,72;
						end;
					}

					else {
						mes "....没有任何的变化, ";
						mes "把剑重新放回原来的位置吧";
						close;
					}
				}
			}
		}
	}
	else if ((KHCottagePoem1 == 5) && (KHCottagePoem2 == 3) || (KielHyreQuest >= 30)) {
		mes "这是移动到 秘密试验室的通路";
		next;
		switch(select("重新进去:不进去")) {
		case 1:
			warp "kh_vila",178,72;
			end;
		case 2:
			mes "再多观察一下吧";
			close;
		}
	}
}

//----------------------------------------------------------------------------
// Cottage interior, Secret Room; left test tube
//----------------------------------------------------------------------------
kh_vila,179,68,0	script	试验管#khp2	HIDDEN_NPC,{
	mes "有穿着 启 海伊洛 学院, ";
	mes "校服的男学生在试验管里面, ";
	mes "感觉好面熟啊";
	close;
}


//----------------------------------------------------------------------------
// Cottage interior, Secret Room; Right test tube
//----------------------------------------------------------------------------
kh_vila,185,68,0	script	试验管::TestTubeKHQ2	HIDDEN_NPC,{
	if (KielHyreQuest > 28) {
		mes "^3355FFA strange looking,";
		mes "wizened old man is";
		mes "held within this test tube.^000000";
		close;
	}
	else if (KielHyreQuest == 28) {
		mes "看起来一位很严肃的老人 在试验管里, 试验管下面看到 红色的按钮";
		next;
		switch(select("按一下按钮:多观察一会儿")) {
		case 1:
			mes "按下按钮 试验管里的老人开始对着你说话了";
			next;
			mes "..........";
			mes "'你是谁啊..'";
			mes "'是一个陌生的面孔啊, '";
			mes "'假如你是我的朋友的话, ";
			mes "你一定会知道我的名字的?'";
			next;
			input .@KHInput$;
			if (.@KHInput$ == "迷路的小恶魔") {
				mes "请你记下这数字吧 ^FF00004.7.7.2.9.6.1^000000";
				next;
				mes "^FF00004772961^000000 ?";
				mes "这是什么数字啊?";
				//KHCottagePoem1 and KHCottagePoem2 no longer needed-- deleting
				set KHCottagePoem1,0;
				set KHCottagePoem2,0;
				set KielHyreQuest,30;
				close;
			}
			else {
				mes "这应该不是你的名字吧..";
				close;
			}
		case 2:
			mes "应该是多观察一下周围是比较好一点吧";
			close;
		}
	}
	else if (KielHyreQuest >= 30) {
		if ((countitem(7491) > 0) && (countitem(7492) > 0)){
			mes "^FF00004772961^000000 ?";
			mes "这是什么数字啊?";
			mes "........";
			mes "看样子所需要的东西都已经找到了, ";
			mes "回到爱丽的身边吧";
			close;
		}
		else {
			mes "^FF00004772961^000000 ?";
			mes "这是什么数字啊?";
			mes "........";
			mes "应该还需要些东西吧, ";
			mes "去家里面多找找看吧";
			close;
		}
	}
	end;
}

//============================================================================

//============================================================================
// Robot Factory NPCs
//============================================================================

//----------------------------------------------------------------------------
// Robotic's Factory; Heavy Door
//----------------------------------------------------------------------------
kh_dun01,235,48,0	script	坚固的门#kh1::HeavyDoorKHQ1	HIDDEN_NPC,{
	if (KielHyreQuest < 38) {
		mes "有着一座坚固的门";
		next;
		switch(select("开启看看:不管它")) {
		case 1:
			input .@KHInput$;
			mes "打不开";
			close;
		case 2:
			mes "看样子没必要开启";
			close;
		}
	}
	else if ((KielHyreQuest >= 38) && (KielHyreQuest < 46)) {
		mes "有着一座坚固的门";
		next;
		switch(select("开启看看:不管它")) {
		case 1:
			input .@KHInput$;
			if (.@KHInput$ == "蓝色钥匙卡") {
				mes "门 开启了";
				close2;
				warp "kh_school",119,144;
				end;
			}
			else {
				mes "打不开";
				close;
			}
		case 2:
			mes "看样子没必要开启";
			close;
		}
	}
	else {
		mes "是紧闭关着的厚重的门";
		close;
	}
}

//----------------------------------------------------------------------------
// Robotic's Factory; Heavy Door (These doors don't seem to serve any purpose)
//----------------------------------------------------------------------------
kh_dun01,76,233,0	script	坚固的门::HeavyDoorKHQ2	HIDDEN_NPC,{
	if ((KielHyreQuest >= 38) && (KielHyreQuest < 46)) {
		mes "有着一座坚固的门";
		next;
		switch(select("开启看看:不管它")) {
		case 1:
			input .@KHInput$;
			mes "打不开";
			close;
		case 2:
			mes "看样子没必要开启";
			close;
		}
	}
	else {
		mes "是紧闭关着的厚重的门";
		close;
	}
}

kh_dun01,106,233,0	duplicate(HeavyDoorKHQ2)	坚固的门#kh3	HIDDEN_NPC
kh_dun01,6,164,0	duplicate(HeavyDoorKHQ2)	坚固的门#kh4	HIDDEN_NPC
kh_dun01,6,133,0	duplicate(HeavyDoorKHQ2)	坚固的门#kh5	HIDDEN_NPC
kh_dun01,6,60,0	duplicate(HeavyDoorKHQ2)	坚固的门#kh6	HIDDEN_NPC
kh_dun01,6,30,0	duplicate(HeavyDoorKHQ2)	坚固的门#kh7	HIDDEN_NPC
kh_dun01,6,18,0	duplicate(HeavyDoorKHQ2)	坚固的门#kh8	HIDDEN_NPC
kh_dun01,235,70,0	duplicate(HeavyDoorKHQ2)	坚固的门#kh9	HIDDEN_NPC
kh_dun01,235,92,0	duplicate(HeavyDoorKHQ2)	坚固的门#kh10	HIDDEN_NPC
kh_dun01,235,114,0	duplicate(HeavyDoorKHQ2)	坚固的门#kh11	HIDDEN_NPC

//----------------------------------------------------------------------------
// Beautiful Lady and Beautiful Lady copies.
//----------------------------------------------------------------------------
kh_school,119,149,4	script	漂亮的女人#kh1::BeatifulLadyKHQ1	4_F_KHELLISIA,{
	cutin "kh_ellisia",2;
	if (KielHyreQuest < 40) {
		mes "[爱丽希雅]";
		mes "........";
		mes "你不是在我记忆里的人";
		next;
		mes "[爱丽希雅]";
		mes "依据 启 海伊洛 先生的话, 能进入到这里的人是 ^FF0000初级设定的 爱丽^000000和 ^FF0000爱丽的朋友^000000而已";
		next;
		mes "[爱丽希雅]";
		mes "可是怎么看不到^FF0000爱丽^000000呢, 她也被遇难了吗? 请问你是^FF0000爱丽的朋友^000000吗?";
		next;
		mes "[爱丽希雅]";
		mes "那么请你 出示一下 你是^FF0000爱丽的朋友^000000 的 证明物件好吗?";
		next;
		switch(select("黄色钥匙卡:蓝色钥匙卡:黄金钥匙:有画着纹样的钮扣:......?")) {
		default:
			break;
		case 3:
			mes "[爱丽希雅]";
			mes "这是 启 海伊洛 先生 给^FF0000爱丽^000000 保管的钥匙啊, 就用这个足以证明你是, ^FF0000爱丽的朋友^000000了";
			next;
			mes "[爱丽希雅]";
			mes ".....我正在等你呢, 我会带你到我停留的地方, 请你稍后";
			close2;
			cutin "",255;
			warp "kh_school",120,180;
			end;
		case 4:
			mes "[爱丽希雅]";
			mes "那个是....";
			mes "^0000FF齐尔^000000先生的纹章! 你是来抓我的吗?";
			close2;
			cutin "",255;
			monster "kh_school",117,144,"恒量魔",1745,1;
			monster "kh_school",117,144,"恒量魔",1745,1;
			monster "kh_school",117,144,"恒量魔",1745,1;
			monster "kh_school",117,144,"恒量魔",1745,1;
			end;
		case 5:
			mes "[爱丽希雅]";
			mes "...........";
			close2;
			cutin "",255;
			end;
		}
		mes "[爱丽希雅]";
		mes "不能只用这个来证明";
		mes "你就是^FF0000爱丽的朋友^000000, ";
		mes "可以请你拿出别的物件来证明吗?";
		close2;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest >= 40) {
		mes "[爱丽希雅]";
		mes "....请你赶快走吧";
		close2;
		cutin "",255;
		warp "kh_school",120,180;
		end;
	}
}


kh_school,117,149,4	script	漂亮的女人#kh2::BeatifulLadyKHQ2	4_F_KHELLISIA,{
	end;
}
kh_school,118,149,4	duplicate(BeatifulLadyKHQ2)	漂亮的女人#kh3	4_F_KHELLISIA
kh_school,120,149,4	duplicate(BeatifulLadyKHQ2)	漂亮的女人#kh4	4_F_KHELLISIA
kh_school,121,149,4	duplicate(BeatifulLadyKHQ1)	漂亮的女人#kh5	4_F_KHELLISIA

//----------------------------------------------------------------------------
// Beautiful Lady "Allysia"
//----------------------------------------------------------------------------
kh_school,122,186,4	script	漂亮的女人#kh6	4_F_KHELLISIA,{
	if (checkweight(7496,1) == 0) {
		mes "请在这里暂停一下 !!";
		mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
		close;
	}
	cutin "kh_ellisia",2;
	if (KielHyreQuest < 38) {
		mes "[??????]";
		mes "这里是私人区域";
		mes "请你立刻离开";
		close2;
		cutin "kh_ellisia",255;
		warp "yuno_fild08",73,172;
		end;
	}
	else if (KielHyreQuest <= 38) {
		mes "[爱丽希雅]";
		mes "我正在等待 ^FF0000初级设定 爱丽^000000的朋友";
		next;
		mes "[爱丽希雅]";
		mes "我想你多少应该知道";
		mes "我需要帮忙, ";
		mes "目前^FF0000启 海伊洛^000000先生";
		mes "在这工厂的某个地方";
		mes "被监禁中";
		next;
		mes "[爱丽希雅]";
		mes "请你救救^FF0000启 海伊洛^000000先生吧, 那个才是当务之急啊";
		next;
		switch(select("这工厂到底是....?:请问对^FF0000启 海伊洛^000000先生 发生了什么事情呢..")) {
		case 1:
			mes "[爱丽希雅]";
			mes "这里隶属于是 启 海伊洛 企业 秘密事业的, ";
			mes "制作自动机械人形的工厂, ";
			mes "你目前所看到的我, ";
			mes "'或是 启 海伊洛 学院的学生们, ";
			mes "都不是人类而是'机械人形'";
			next;
			mes "[爱丽希雅]";
			mes "长的跟人类相似却比人类还坚强, ";
			mes "制作出抗压性强的自动机械人形, ";
			mes "对人类社会做出贡献, ";
			mes "是我们 '启 海伊洛 企业'的目标及 理念";
			break;
		case 2:
			mes "[爱丽希雅]";
			mes "^0000FF齐尔^000000先生";
			mes "对工厂里的人形";
			mes "强制执行了'异常改造'的行动, ";
			mes "知道这事实的^FF0000启 海伊洛^000000先生, 对^0000FF齐尔^000000先生的行动";
			mes "加以谴责后, 再也没有回来过";
			next;
			mes "[爱丽希雅]";
			mes "^FF0000启 海伊洛^000000先生";
			mes "知道, 担心我会在 ^0000FF齐尔^000000先生";
			mes "手里被破坏, ";
			mes "所以把我放在这里, 而从我的一堆人形中";
			mes "拿走了一个人形";
			next;
			mes "[爱丽希雅]";
			mes "看来目前还是可以收到^FF0000启 海伊洛^000000先生的";
			mes "生存信号, 所以 ^FF0000启 海伊洛^000000先生";
			mes "目前是平安的, ";
			mes "麻烦你能找一下^FF0000启 海伊洛^000000先生";
			mes "所在的地方好吗";
			next;
			mes "[爱丽希雅]";
			mes "我给你一个可以在工厂秘密地区";
			mes "到处可游走的^FF0000钥匙卡^000000, ";
			mes "若找到^FF0000启 海伊洛^000000先生";
			mes "的所在地的话, 请回到这里告诉我好吗";
			getitem 7496,1; //Red_Key_Card
			set KielHyreQuest,40;
			break;
		}
		close2;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest == 40) {
		mes "[爱丽希雅]";
		mes "麻烦你快点去找^FF0000启 海伊洛^000000先生吧";
		close2;
		cutin "",255;
		warp "kh_dun01",22,216;
		end;
	}
	else if (KielHyreQuest == 42) {
		mes "[爱丽希雅]";
		mes "请问你有找到 启 海伊洛 先生吗?";
		next;
		mes "我告诉那位女人, 启 海伊洛 被监禁地方的位置, 并把他给我的^FF0000碎金属破片^000000给她看了";
		next;
		mes "^0000FF爱丽希雅^000000接受 ^FF0000碎金属破片^000000后, 装置在自己的手臂上";
		next;
		mes "^FF0000启 海伊洛^000000先生 的暗号确认, ";
		mes "B_2_3地区 生体讯号 正常, ";
		mes "同封文书确认, 改造人形设计图传送完毕";
		next;
		mes "[爱丽希雅]";
		mes "按.照.命.令 来.执.行.";
		delitem 7497,1; //Steel_Piece
		set KielHyreQuest,44;
		close2;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest == 44) {
		mes "[爱丽希雅]";
		mes "我现在要开始要执行^FF0000启 海伊洛^000000先生的命令了, ";
		mes "等以后请到^0000FF里希塔乐镇的 '启 海伊洛 官邸'^000000 来找我吧, ";
		mes "并且你所携带的钥匙卡, 因保安上的需要就直接回收了";
		next;
		mes "[爱丽希雅]";
		mes "只要你到官邸";
		mes "把^FF0000黄金钥匙^000000 拿给他们看的话, ";
		mes "他们会为你服务的";
		delitem 7492,1; //Yellow_Key_Card
		delitem 7495,1; //Blue_Key_Card
		delitem 7496,1; //Red_Key_Card
		set KielHyreQuest,46;
		close2;
		warp "yuno_fild08",73,172;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest >= 44) {
		warp "yuno_fild08",73,172;
		cutin "",255;
		end;
	}
}

//----------------------------------------------------------------------------
// Signboard (another useless NPC?)
//----------------------------------------------------------------------------
kh_dun01,163,223,4	script	看板#kh	4_BOARD3,{
	mes "宠物禁止进入";
	close;
}

//----------------------------------------------------------------------------
// Mechanical Devices for accessing restricted area
//----------------------------------------------------------------------------
kh_dun01,166,223,0	script	机械装置#kh::KHKeyardReader	HIDDEN_NPC,{
	if ((KielHyreQuest <= 38) || (KielHyreQuest >= 44)) {
		mes "可以放入某种东西的机械装置";
		close;
	}
	else if ((KielHyreQuest == 40) && (countitem(7496) >= 1)) {
		mes "可以放入某种东西的机械装置";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "红色钥匙卡") {
			mes "放入钥匙卡后";
			mes "门就开启了";
			close2;
			warp "kh_dun01",170,227;
			end;
		}
		else {
			mes "没有任何反应";
			close;
		}
	}
}

kh_dun01,162,206,0	duplicate(KHKeyardReader)	机械装置	HIDDEN_NPC

//----------------------------------------------------------------------------
// Keep monsters out of the quest area.
// Silly really since the rest of it's a dungeon
//----------------------------------------------------------------------------
//kh_dun01,180,220,0	script	Monster Warp#kh1::KHMobWarp	-1,5,20,{
//OnTouchNPC:
//	warp "kh_dun01",178,138;
//	end;
//}

//kh_dun01,190,220,0	duplicate(KHMobWarp)	Monster Warp#kh2	-1,5,20
//kh_dun01,200,250,0	duplicate(KHMobWarp)	Monster Warp#kh3	-1,5,20
//kh_dun01,210,220,0	duplicate(KHMobWarp)	Monster Warp#kh4	-1,5,20
//kh_dun01,220,220,0	duplicate(KHMobWarp)	Monster Warp#kh5	-1,5,10

//----------------------------------------------------------------------------
// Kiel Hyre - OnTouch
//----------------------------------------------------------------------------
kh_dun01,224,233,0	script	Factory B Area Door	-1,5,5,{
//OnTouch2:
OnTouch:
	if (KielHyreQuest == 40) {
		if (checkweight(7497,1) == 0) {
			mes "请在这里暂停一下 !!";
			mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
			close;
		}
		mes "...........";
		next;
		mes "好像在门的对面 听到某人说话的声音";
		next;
		mes "[????]";
		mes "...^0000FF齐尔^000000....你为什么要这...";
		next;
		mes "是...^FF0000启 海伊洛^000000先生 吗?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "^FF0000启 海伊洛^000000先生?";
		next;
		mes "[启 海伊洛]";
		mes ".....谁呀?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我是.....";
		next;
		mes "对^FF0000启 海伊洛^000000先生 把^FF0000爱丽^000000和 ^0000FF爱丽希雅^000000小姐的 故事说给他听了";
		next;
		mes "[启 海伊洛]";
		mes "....原来这样子啊, 难道连爱丽也被那些家伙们遇难了吗";
		mes ".............";
		next;
		mes "请把这个带走吧, 把这个给^0000FF爱丽希雅^000000的话 她会知道怎么做";
		next;
		mes "从门和地面的缝隙中 推出来了一个^FF0000碎金属破片^000000";
		getitem 7497,1; //Steel_Piece
		set KielHyreQuest,42;
		close;
	}

	else if (KielHyreQuest >= 42) {
		mes "[启 海伊洛]";
		mes "........";
		close;
	}
}

//----------------------------------------------------------------------------
// Robot Factory Second Floor Entrances
//----------------------------------------------------------------------------
kh_dun01,44,203,0	script	出入 装置#khd2::KHAccess	HIDDEN_NPC,{
	if (countitem(7509) < 1) {
		mes "有一座巨大的门";
		close;
	}
	else {
		mes "有着可以让钥匙卡";
		mes "进去的机械装置的门";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "华丽的钥匙卡") {
			mes "使用'华丽的钥匙卡'后, ";
			mes "巨大的门开启了, ";
			mes "出现了通往下面的楼梯";
			next;
			switch(select("下去:不下去")) {
			case 1:
				warp "kh_dun02",41,198;
				end;
			case 2:
				mes "过了一段时间后 门关起来了";
				close;
			}
		}
		else {
			mes "打不开";
			close;
		}
	}
}

kh_dun01,36,195,0	duplicate(KHAccess)	出入 装置#khd1	HIDDEN_NPC

//============================================================================

//============================================================================
// 启 海伊洛宅邸NPC, 及 基尔的房间 NPC
//============================================================================

//----------------------------------------------------------------------------
// 启 海伊洛的管家
//----------------------------------------------------------------------------
kh_mansion,78,55,5	script	管家#kh	109,{
	if (KielHyreQuest < 46) {
		mes "[管家]";
		mes "这里是私人住宅, 请你离开好吗";
		close2;
		warp "lighthalzen",188,201;
		end;
	}
	if ((KielHyreQuest >= 46) && (KielHyreQuest < 50)) {
		mes "[管家]";
		mes "请问你是主人的客人吗?";
		mes "那么请出示证据给我看";
		next;
		switch(select("把黄金钥匙拿给他看:????")) {
		case 1:
			mes "[管家]";
			mes "是"+strcharinfo(0)+"先生/小姐啊, 我们正在等你呢, 我来带领你到主人那里吧";
			close2;
			warp "kh_mansion",21,14;
			end;
		case 2:
			mes "[管家]";
			mes "若你不是客人的话, 请你离开好吗";
			close2;
			warp "lighthalzen",188,201;
			end;
		}
	}
	if ((KielHyreQuest >= 50) && (KielHyreQuest < 64) || (KielHyreQuest >= 70)) {
		mes "[管家]";
		mes ".....请问你要见我们家主人吗?";
		next;
		switch(select("是的:不要")) {
		case 1:
			mes "[管家]";
			mes "我来带你去";
			close2;
			warp "kh_mansion",21,14;
			end;
		case 2:
			mes "[管家]";
			mes "我在这里等你吧";
			close;
		}
	}
	if ((KielHyreQuest == 52) || (KielHyreQuest == 54) || (KielHyreQuest >= 64) && (KielHyreQuest <= 70)) {
		mes "[管家]";
		mes "欢迎光临, 我们正在等你呢, 请问你要跟主人说话吗? 或是跟....";
		next;
		switch(select("和^FF0000启 海伊洛^000000先生 对话呢..:^3355FF米契尔^000000...")) {
		case 1:
			mes "[管家]";
			mes "我了解了, 我来带你去吧";
			close2;
			warp "kh_mansion",21,14;
			end;
		case 2:
			mes "[管家]";
			mes "哈哈.... 看样子你有带来好消息啊";
			next;
			mes "观察周围的管家的眼神不是普通啊...";
			mes "果然平凡的管家是....";
			mes "请问你的名字是不是";
			mes "尔普...嗯嗯..";
			mes ".......... ";
			next;
			mes "[管家]";
			mes "看样子没有讨厌的家伙在这边, 请到这边...";
			close2;
			warp "kh_mansion",20,87;
			end;
		}
	}
}

//----------------------------------------------------------------------------
// 启 海伊洛
//----------------------------------------------------------------------------
kh_mansion,22,28,4	script	Kiel Hyre#kh	4_M_KHKYEL,{
	if (checkweight(908,200) == 0) {
		mes "请在这里暂停一下 !!";
		mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
		close;
	}

	cutin "kh_kyel01",2;
	if (KielHyreQuest < 46) {
		mes "[启 海伊洛]";
		mes ".........";
		close2;
		cutin "",255;
		end;
	}

	else if (KielHyreQuest == 46) {
		cutin "kh_kyel01",2;
		mes "[启 海伊洛]";
		mes "噢~ 你是 "+strcharinfo(0)+"吗?";
		mes "谢谢你的帮忙..";
		mes "因为有你工作变得顺利多了";
		next;
		mes "[启 海伊洛]";
		mes "呵嗯... 看样子有很多 疑惑的表情啊.. 其实对你来说 也是一场陌生的经验吧..";
		next;
		mes "[启 海伊洛]";
		mes "若有疑问的话就直接问我吧, 若是可以在回答的范围内的话, 我就帮你回答吧";
		next;
		while(1) {
			switch(select("机械人形是...?:^3355FF齐尔^000000这人是..?:^FF0000爱丽^000000所拿的钮扣是?")) {
			case 1:
				mes "[启 海伊洛]";
				mes "是32年前 我20岁开始投入灵魂般";
				mes "浑身研究的研究物啊..";
				mes "是大贤者 霸肋门德 想要做的, ";
				mes "和人类类似和人类一样般行动的, ";
				mes "是以人类的手所做成的人形, ";
				mes "那就是机械人形啊";
				next;
				mes "[启 海伊洛]";
				mes "也许可能看起来";
				mes "跟监护人魔物很类似, ";
				mes "却跟那些没有自己的意见, ";
				mes "只会听命行事的监护人魔物";
				mes "是不一样的, ";
				mes "他们是会自行思考行动的";
				mes "现代科学的产物..";
				next;
				mes "[启 海伊洛]";
				mes "若想了解更清楚一点的话, ";
				mes "请你去询问^0000FF爱丽希雅^000000吧..";
				set .@KHQRead,.@KHQRead+1;
				next;
				break;
			case 2:
				mes "[启 海伊洛]";
				mes "^3355FF齐尔^000000是";
				mes "我和之前所喜爱的女人";
				mes "所生下来的唯一的我的儿子, ";
				mes "那位女人生完小孩就去世了..";
				mes "那小孩拥有着天才般的";
				mes "机械设计能力..";
				next;
				mes "[启 海伊洛]";
				mes "像^FF0000爱丽^000000一样的 第3代 机械人形";
				mes "也是^3355FF齐尔^000000所设计的, ";
				mes "可是现在是把..";
				mes "第3代 机械人形做改造, ";
				mes "想做为其它用途来使用..";
				next;
				mes "[启 海伊洛]";
				mes "我本来是要去那里阻挡他的, ";
				mes "却被他监禁在那里了..";
				mes "到底那家伙想要的是什么呢..";
				mes "为什么要开始做出那种行动呢, ";
				mes "我到现在还是不能理解啊";
				set .@KHQRead,.@KHQRead+1;
				next;
				break;
			case 3:
				mes "[启 海伊洛]";
				mes "那纹路是 ^3355FF齐尔的纹路^000000";
				mes "你说是穿黑色衣服的男子吗?";
				mes "我想那可能是 ^3355FF齐尔^000000的";
				mes "个人保镖 '凯音哲' 也不一定啊";
				next;
				mes "[启 海伊洛]";
				mes "不知道从何时开始被 ^3355FF齐尔^000000";
				mes "所雇用的身分不明的男士, ";
				mes "平常都一直穿着黑色衣服, ";
				mes "不常于暴露身份, ";
				mes "连我都不知道他的真实面孔啊";
				set .@KHQRead,.@KHQRead+1;
				next;
				break;
			}
			if (.@KHQRead == 3) {
				mes "[启 海伊洛]";
				mes "呼呜.. 请不要再询问了, 我有点累呀";
				delitem 7493,1; //Golden_Key
				delitem 7494,1; //Kiel_Button
				set KielHyreQuest,48;
				break;
			}
		}
	}
	else if (KielHyreQuest == 48) {
		mes "[启 海伊洛]";
		mes "还有.... 这是感谢的谢礼, 虽然是小小的东西 请你收下吧...";
		getitem 12105,1; //Taming_Gift_Set
		getexp 700000,0;
		set KielHyreQuest,50;
	}
	else if ((KielHyreQuest >= 50) && (KielHyreQuest < 64)) {
		mes "[启 海伊洛]";
		mes "若没有问题要问的话 我要休息了";
	}
	else if (KielHyreQuest == 64) {
		cutin "kh_kyel01",2;
		mes "[启 海伊洛]";
		mes "请问还有什么话要说吗?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "我还没有正确的情报";
	}
	else if (KielHyreQuest == 68) {
		cutin "kh_kyel02",2;
		mes "[启 海伊洛]";
		mes "噢噢.. 是"+strcharinfo(0)+"先生啊 请问有什么事吗?";
		next;
		select("询问有关^0000FF爱丽希雅^000000的事情");
		mes "["+strcharinfo(0)+"]";
		mes "我在朱诺的某个废弃的民宅里, 看到了和 ^0000FF爱丽希雅^000000长的一模一样的肖像画";
		next;
		cutin "kh_kyel02",2;
		mes "[启 海伊洛]";
		mes "........... 我不知道你要想讲些什么啊, 那个到底又怎么了呢?";
		next;
		cutin "kh_Kyel03",2;
		mes "[启 海伊洛]";
		mes "这世界上有很多长相类似的人, 对于那个神奇的偶然, 就是你想要对我所说的事情吗?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "不, 那女人和^0000FF爱丽希雅^000000 是不是同一号人物, 有所疑问所以才会对你说的";
		next;
		cutin "kh_kyel02",2;
		mes "[启 海伊洛]";
		mes "呵呵, 看样子你是搞错了, ^0000FF爱丽希雅^000000是我亲自设计的 款式";
		next;
		mes "[启 海伊洛]";
		mes "至于.. 那肖像画.. 也许是有人看到路过的 ^0000FF爱丽希雅^000000的模样, 把她画出来也不一定, 因为画家们是喜欢画些 自己所喜爱的对象啊";
		next;
		cutin "kh_kyel01",2;
		mes "["+strcharinfo(0)+"]";
		mes "其实, 那幅画看起来 是过了一段满久远的样子..";
		next;
		mes "[" + strcharinfo(0) + "]";
		mes "我所看到肖像画是约30年前的一副画, 那女孩的名字也叫做 '^0000FF爱丽希雅^000000', 是在朱诺 罗希米爱乐家里工作的女孩";
		next;
		cutin "kh_kyel02",2;
		mes "[启 海伊洛]";
		mes "............";
		next;
		cutin "kh_kyel01",2;
		mes "["+strcharinfo(0)+"]";
		mes "突然间让我想到一件事情, 那女的是^0000FF爱丽希雅^000000的模仿对象, 也许是你年轻的时候 所喜爱的人也不一定..";
		next;
		mes "[启 海伊洛]";
		mes "................";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "有一位贫穷的男子 喜欢了一位女子.. 可是那位女子 已喜欢上别的男人了, ";
		mes "那女的所喜欢的男子 跟那位贫穷的男子相比, 拥用着无法比较的富和权力的人";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "更让人荒唐的是, 那女的所喜爱的富家少爷, 在家里已有命定的未婚妻, 有一天突然那家少爷 背叛了那个女的, 跟未婚妻就这样结婚了";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "那女的受不了背叛的打击, 朝着冰冷的湖面投身而去, 喜欢那女的 贫穷的男子 开始萌起复仇的念头了";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "对那位男子本身 有一个特别的技术, 那技术又是某个企业 非常急迫需要的技术, 那男子把那个技术卖给了企业, ";
		mes "而那个企业为那个男子所付出的代价是, 让他实现复仇";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "在这边我们给这些人 取上一些名字吧, 富家少爷 罗希米爱乐, 可怜的小姐 爱丽希雅, 贫穷的男子 启 海伊洛..";
		next;
		cutin "kh_Kyel03",2;
		mes "[启 海伊洛]";
		mes "呵呵... 呵哈哈哈哈哈.. 真的是一个不简单的想像力啊, 只是因为 ^0000FF爱丽希雅^000000 跟那位女子是同名, 长的像的女子的理由, ";
		mes "只有想像到这些吗? 你干脆转职去做小说家吧?";
		next;
		mes "[启 海伊洛]";
		mes "也许, 可能是在很久以前 我见过那位女的也不一定, 所以在无意识中把 ^0000FF爱丽希雅^000000 做的和那位女的很像也不一定";
		next;
		mes "[启 海伊洛]";
		mes "可是我和那位女孩恩爱的事 只不过是你的妄想而已, 我和那位女孩互相认识 的证据在哪里呢? 呼呼";
		next;
		select("把在凉亭上得到的肖像画拿给他看");
		cutin "kh_kyel02",2;
		mes "[启 海伊洛]";
		mes "这...这是? ....... 在那里得到这..?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "启 海伊洛 先生, 这就是你年轻时候的肖像画啊";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "这是打捞'^0000FF爱丽希雅^000000'尸体的 渔夫告诉我的, 这里是买走那女人的戒指那位男士所生活的家, 就是在这里找到的";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "你把那位女人所戴的戒指, 比市价更高的价钱给买走了, 请问那是完全不认识那位女人 所能做出来的事情吗?";
		next;
		cutin "kh_Kyel03",2;
		mes "[启 海伊洛]";
		mes "............";
		mes "休呜....终于被你知道了..";
		next;
		mes "[启 海伊洛]";
		mes "对啊, 机械人形 ^0000FF爱丽希雅^000000是 模仿已故的 ^0000FF爱丽希雅^000000所做出来的, 因为我爱过那位女人..";
		next;
		mes "[启 海伊洛]";
		mes "可是说我把罗希米爱乐家 弄成没落, 那是你自己的幻觉, 我只是一位机械工学者而已啊, 我对其它事业没什么关心啊";
		next;
		mes "[启 海伊洛]";
		mes "我痛恨他是事实, 那都是年轻时候的事情啊, 我是没有才能让 罗希米爱乐家 像这样有着根深柢固的家门没落啊";
		next;
		cutin "kh_kyel02",2;
		mes "'看样子需要确实的证据, '";
		mes "'把那个拿给他看看吗?'";
		next;
		select("罗希米爱乐家 的肖像画");
		mes "["+strcharinfo(0)+"]";
		mes "真的是这样吗? 请你看这个, 这肖像画是在 罗希米爱乐家 那里所发现的, 也许是 罗希米爱乐家的家人吧";
		next;
		mes "^FF0000启 海伊洛^000000悄悄的看了一眼肖像画";
		next;
		cutin "kh_Kyel03",2;
		mes "[启 海伊洛]";
		mes "那又怎么样了呢? 我从来没有见过这些人啊";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "^FF0000启 海伊洛^000000先生, 你所携带的怀表... 看样子满久了的样子... 和这幅画里的那个人所携带的 好像是同一款物品";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "为什么你会拥有 那个怀表呢?";
		next;
		cutin "kh_kyel02",2;
		mes "[启 海伊洛]";
		mes ".............";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "'看样子说中了'";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "对你来说没有才能 让一个家门没落啊..可是! 你的赞助人 雷根贝勒社, 换他们的话对这种小事情 简直是易如反掌啊?";
		next;
		cutin "kh_Kyel03",2;
		mes "[启 海伊洛]";
		mes "很不简单啊, 是啊, 是我把那家门给弄成没落了, 可是这些都是为了冤枉死去的 ^0000FF爱丽希雅^000000啊";
		next;
		mes "[启 海伊洛]";
		mes "若詹姆斯没有背叛那个女的的话, 若跟那个女孩幸福的活着了的话, 所以那个女孩没有自杀的话...";
		next;
		mes "[启 海伊洛]";
		mes "哼, 对那种做出坏事的家伙复仇 到底有错吗!!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "那女孩并不是自杀的, 所以你的复仇 并没有正当性";
		next;
		mes "[启 海伊洛]";
		mes "什么?!!!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "请你看这个";
		next;
		select("把詹姆斯的纸条 拿给他看");
		mes "[启 海伊洛]";
		mes "哼.. 这是什么玩意纸条啊? 就用这种纸条一张来证明, 詹姆斯没有背叛那个女的吗? 那不足以证明的? 结果那个女孩是没有自杀吗!";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "那么那位女孩在前一天晚上, 也就是 8月 19日 晚上 死亡了的意思......";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "詹姆斯和那位女的讲好一起要私奔的日期是 30年前的 8月 20日.. 并且发现那位女的尸体日期也是8月 20日, 有点奇怪吧?";
		mes "那么那位女孩在前一天晚上, 也就是 8月 19日 晚上 死亡了的意思......";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "为什么那位女孩和喜欢的男人, 说好在一起私奔的前一天晚上, 却要跳进冰冷的江水里面呢?";
		next;
		mes "[启 海伊洛]";
		mes "因为她不相信这个男生啊, 所以她认为她只不过是富豪年轻 男子的一时玩伴而已啊... ............. ........ ....";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "............ ..... ..";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "不, 那位女的不会是因为那个理由 而跳进江水的, 在这张纸条上 有着真实的事实";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "也许是在前一天, 也就是 8月 19日, 她会去江边的理由 就是你约她出来的关系";
		next;
		mes "[启 海伊洛]";
		mes ".............! 这...这是什么话呀!! 我那天约她出来的证据 在在哪里啊!!!";
		next;
		select("K.H的 纸条");
		mes "["+strcharinfo(0)+"]";
		mes "证据的话.... 在这里啊, 这纸条上明明写着8月19日晚上, 和她约在第一次所见面的地方 相见的内容啊, 也许那个地点是.. 江边吧";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "这里所写的简称 K.H 是, 是在你确认过的肖像画 里所用的简称是一样的, 那天晚上你和她之间 到底发生什么事情了呢?";
		next;
		cutin "kh_kyel02",2;
		mes "[启 海伊洛]";
		mes "............. ....... .....";
		next;
		cutin "kh_Kyel03",2;
		mes "[启 海伊洛]";
		mes "喀... 喀喀... 是啊... 那天晚上... ..........";
		next;
		cutin "kh_kyel02",2;
		mes "[启 海伊洛]";
		mes "那天晚上, 她按照我的邀约来到了江边, 我对她建议说, 请把背叛她的詹姆斯给丢弃吧, 然后就跟着我一起私奔吧";
		next;
		mes "[启 海伊洛]";
		mes "可是她却对我说, 詹姆斯没有背叛她, 也拒绝和我一起私奔, 你猜当我听到这句话时我的心情会怎么样? 呜呜... 真的是很惨痛啊";
		next;
		mes "[启 海伊洛]";
		mes "我还站在她前面时, 当我看到她用手触摸戒指的那一瞬间, 我实在是太生气了从她那里把戒指给抢走了, 想要投掷到江里去";
		next;
		mes "[启 海伊洛]";
		mes "可是她确试图 想要从我这里找回戒指啊, 只是小小的肢体冲突.. 那时因为好几天的豪雨 造成地基脆弱而倒塌了....... ......... ";
		next;
		select(".........");
		mes "[启 海伊洛]";
		mes "喀.. 喀喀.. 哈哈哈哈哈";
		delitem 7499,1; //Family_Portrait
		delitem 7500,1; //Elysia_Portrait
		delitem 7501,1; //Kyll_Hyre_Letter2
		delitem 7502,1; //Piece_Memo_Of_James
		delitem 7503,1; //Man_Portrait
		set KielHyreQuest,70;
		close2;
		cutin "",255;
		end;
	}
	else if (KielHyreQuest <= 70) {
		cutin "kh_kyel01",2;
		mes "[启 海伊洛]";
		mes "第二天...";
		mes "发现她时已经死亡了, 并且手里还紧握着戒指啊....";
		mes "哈哈...";
		next;
		cutin "kh_kyel03",2;
		mes "[启 海伊洛]";
		mes "我也不知道是什么样的想法, 对捡到那戒指的渔夫, 用我的全部财产向他购买戒指了, ";
		mes "然后我就... 离开了";
		mes "那个受到诅咒般的朱诺了";
		next;
		mes "[启 海伊洛]";
		mes "我离开朱诺后, 边四处流浪边思考, 我为什么要像这样被追逐到处流浪呢?所有的原因都是来自罗希米爱乐家的关系...";
		mes "以及那位男子詹姆斯的缘故啊";
		mes "后来是这样领悟到的";
		next;
		mes "[启 海伊洛]";
		mes "我绝对不能原谅他, 他已经拥有所有需要的东西了, 连^0000FF爱丽希雅^000000也要获得的";
		mes "那位富家少爷...";
		mes "当他失去所有东西的时候是多么的难堪啊, ";
		mes "我想让死去的爱^0000FF丽希雅^000000看到这些";
		next;
		mes "[启 海伊洛]";
		mes "然后我拿着 第1代人形....";
		mes "^0000FF爱丽希雅^000000 的设计图, 去拜访了雷根贝勒社";
		next;
		mes "[启 海伊洛]";
		mes "雷根贝勒社把我想要的";
		mes "所有东西都提供给我了, 金钱、权力、人脉, 还有把某个人弄成没落的方法....";
		mes "相对的我提供给他们 机械人形";
		next;
		mes "[启 海伊洛]";
		mes "我也大概猜测到他们会使用在那里, 监视、暗杀、间谍等等, 这比那些不知什么时候会被背叛的人类来的更安全的装备啊";
		next;
		mes "[启 海伊洛]";
		mes "呵呵.....看来你能调查到这样, 我想你背后一定有某些后台吧, 他们到底想要什么呢? 我的生命? 还是机械人形的设计图?";
		mes "若不是这个的话, 是全部的东西吗?";
		mes "哈哈哈";
		next;
		select("他们是....");
		cutin "kh_kyel01",2;
		mes "["+strcharinfo(0)+"]";
		mes "这是为了 你和雷根贝勒社的关系, 还有有关 ^0000FF齐尔^000000的事情";
		next;
		mes "[启 海伊洛]";
		mes "^0000FF齐尔^000000啊.... 是你的话大概猜测到的, 有关那小孩的身份..";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "难道他也是..机械人形吗? 第2代的...";
		next;
		mes "[启 海伊洛]";
		mes "是的, ^0000FF齐尔^000000是最初使用到压缩魔法卷轴的 第2代 机械人形.. 是经过许多失败和错误的考验所诞生的 独一无二的 第2代啊..";
		next;
		mes "[启 海伊洛]";
		mes "所以对那孩子会更有爱意啊, 以取我和 ^0000FF爱丽希雅^000000的名字, 命名为^0000FF齐尔^000000, 把我所有的机械设计精髓都传授给他了";
		next;
		mes "[启 海伊洛]";
		mes "目前他正在制作 第3代 机械人形, 拥有卓越的资质, 可是....并没有教他好好做人, 只是一个不错的继承者而已...";
		next;
		select("..........");
		mes "[启 海伊洛]";
		mes "改造的机械人形, 它们就如传闻, 就是披着人皮的杀人兵器啊, ";
		mes "也不会像监护人魔物那样 有着独特的外表, 是有着不会被 任何人查觉的人类模样啊....";
		next;
		mes "[启 海伊洛]";
		mes "我对 ^0000FF齐尔^000000的天才般的学习能力, 强壮的力量、还有感情上的不安定";
		mes "一直担忧着";
		next;
		mes "[启 海伊洛]";
		mes "所以才会让 第3代 赋予着跟人类类似的筋力和学习能力, 透过团体的生活 让他学习到人类的感情";
		next;
		mes "[启 海伊洛]";
		mes "可是 ^0000FF齐尔^000000所改造的 第3代人形们, 完全不理会那控制";
		next;
		mes "[启 海伊洛]";
		mes "搭载着如魔物般能力的小孩, ";
		mes "和机械融合在一起的小孩们..";
		mes "那就是";
		mes "雷根贝勒社所要执行的";
		mes "人类生体实验的相同的事情啊..";
		next;
		mes "[启 海伊洛]";
		mes "请你想像看吧, 人类不承认人类尊严性的世界...";
		next;
		mes "[启 海伊洛]";
		mes "你.....竟然触碰了";
		mes "我不想回忆的过去, 啊啊...";
		mes "不过";
		mes "我也并不会对你怎么样的...";
		mes "只是帮我一个委托 就好";
		next;
		select("委托?");
		mes "[启 海伊洛]";
		mes "是啊..";
		mes "委托啊, 大概.....";
		mes "和他们委托你";
		mes "所做的调查目的, 不会有太大的差别的";
		next;
		select("爱丽希雅的戒指?");
		mes "[启 海伊洛]";
		mes "请你帮我阻挡^0000FF齐尔^000000吧, 我再不想看到我所制作出来的小孩";
		mes "遭受破坏啊";
		next;
		mes "[启 海伊洛]";
		mes "虽然....";
		mes "让那些孩子们堕落的确实是我.";
		mes "..";
		mes "那些罪孽等到这些事情都结束后, ";
		mes "我会自愿接受惩罚的";
		next;
		select("接受:接受他的委托:点头示意");
		mes "[启 海伊洛]";
		mes "谢谢你, ^0000FF齐尔^000000应该在 这官邸的地下呀";
		next;
		mes "[启 海伊洛]";
		mes "这是那个孩子刚做出来时所待的房间, 现在因为被改造了, 变成连我都不能进入到 很深的空间了";
		next;
		mes "[启 海伊洛]";
		mes "请在那里帮我找到那位孩子吧, 并且在那孩子的心脏那里 请拿一件物品来吧, 那么那孩子的暴力倾向会停住的";
		next;
		select("物品?");
		mes "[启 海伊洛]";
		mes "^0000FF爱丽希雅^000000的戒指..";
		mes "是这一切事端起因的物品...";
		mes "当我制作出那孩子时";
		mes "为了不要忘记对 罗希米爱乐社的怨恨, ";
		mes "和我对那孩子的感情, 于是在那孩子心脏里";
		mes "植入戒指来代替主要的零件了";
		next;
		mes "[启 海伊洛]";
		mes "以一般的武器 来制服他是满困难的, 就给你这个吧, 它是可以让 第2代 身躯的动力停止的机械";
		next;
		mes "[启 海伊洛]";
		mes "把这个贴在^0000FF齐尔^000000身上的话, 他会暂时不能使力的, 趁这个空档时开启那个孩子的胸部, 取出戒指即可..";
		mes "拜托你啦";
		getitem 7504,1; //Toy_Motor
		next;
		cutin "kh_kyel03",2;
		mes "[启 海伊洛]";
		mes "若你准备好了的话, 我就把你送到^0000FF齐尔^000000的 房间了";
		set KielHyreQuest,74;
	}
	else if ((KielHyreQuest >= 74) && (KielHyreQuest <= 104)) {
		mes "[启 海伊洛]";
		mes "请问准备好了吗?";
		next;
		switch(select("是的:还没")) {
		case 1:
			mes "[启 海伊洛]";
			mes "那么...就拜托你啦..";
			close2;
			enablenpc "Kiehl_Room_Warp";
			donpcevent "Kiehl_Room_Warp::OnEnable";
			end;
			break;
		case 2:
			mes "[启 海伊洛]";
			mes "若准备好了的话, 再来找我吧";
			break;
		}
	}
	else if ((KielHyreQuest >= 74) && (KielHyreQuest <= 106)) {
		cutin "kh_kyel01",2;
		mes "[启 海伊洛]";
		mes "你来了吗, 那请问齐尔有没有怎么样啊?";
		next;
		if (countitem(7508) < 1) {
			mes "[启 海伊洛]";
			mes "You mean... You don't have it?";
			mes "Please, retrieve Allysia's Ring";
			mes "from Kiehl's heart!";
			next;
			enablenpc "Kiehl_Room_Warp";
			donpcevent "Kiehl_Room_Warp::OnEnable";
			close2;
			cutin "",255;
			end;
		}
		mes "向^FF0000启 海伊洛^000000把这几天所发生的事情告诉他了, 听完这番话的^FF00000启 海伊洛^000000显露出沉痛的表情";
		next;
		if (Sex == 0) {
			set .@KHTitle$,"小姐";
		}
		else set .@KHTitle$,"先生";
		mes "不管怎么样谢谢你啦";
		mes ""+strcharinfo(0)+""+.@KHTitle$+"..";
		mes "我再也不能坐视不理啦, 他已经对我视同提出挑战书了, ";
		mes "我也试着拿出我的诚意来阻挡那孩子了";
		next;
		mes "[启 海伊洛]";
		mes "请你收下这个吧, 这是这些日子以来你帮我做些事情的谢意表达..";
		next;
		mes "[启 海伊洛]";
		mes "我知道我很冒昧, 我想再拜托你一件事情, 我回想我当初在工厂被监禁时, 见过了一个跟^0000FF齐尔^000000一模一样的 机械人形";
		next;
		mes "[启 海伊洛]";
		mes "我那时候认为^0000FF齐尔^000000只是抱着玩耍的心态所做出来的自己的复制人而已..等听完你所讲的话之后, ";
		mes "我才知道那是为了那孩子换身躯时所制造出来的实验体啊";
		next;
		mes "[启 海伊洛]";
		mes "我给你一把可以进入到工厂深层里的钥匙卡吧, 请你帮我检查一下工厂吧, 我去检查一下已倒塌的^0000FF齐尔^000000房间";
		getitem 7509,1; //Fancy_Key_Card
		set KielHyreQuest,108;
		next;
		mes "[启 海伊洛]";
		mes "那么祝你一路小心啊";
		getitem 616,1;  //Old card Album
		delitem 7508,1; //Elysia_Ring
		getexp 1000000,0;
	}
	else if (KielHyreQuest >= 108) {
		mes "[启 海伊洛]";
		mes "......";
		mes ".........";
		mes "............";
	}
	close2;
	cutin "",255;
	end;
}


//----------------------------------------------------------------------------
// Allysia
//----------------------------------------------------------------------------
kh_mansion,18,30,4	script	爱丽希雅	4_F_KHELLISIA,{
	if (KielHyreQuest < 46) {
		mes "[爱丽希雅]";
		mes "Who are you?";
		mes "How did you get here?";
		mes "Go away";
		close;
	}
	cutin "kh_ellisia",2;
	if (KielHyreQuest < 70) {
		mes "[爱丽希雅]";
		mes "请问你需要 有关机械人形的说明吗?";
		next;
		switch(select("是的:不需要")) {
		case 1:
			mes "[爱丽希雅]";
			mes "所谓机械人形是指 自己会思考会动的人形, 在过去有很多贤者们, 做了很多研究所失败的 机械工学的精粹";
			next;
			mes "[爱丽希雅]";
			mes "我的主人启 海伊洛先生, 从20岁开始做研究, ";
			mes "总计制作出了3种类型的机械人形, 那些统称为 第1代、第2代、第3代的 机械人形啊";
			next;
			switch(select("第1代?:第2代?:第3代?")) {
			case 1:
				mes "[爱丽希雅]";
				mes "你现在所看到的我'^0000FF爱丽希雅^000000', ";
				mes "就是^FF0000启 海伊洛^000000先生的第1代";
				mes "机械人形";
				next;
				mes "[爱丽希雅]";
				mes "在纯粹的机械骨骼上";
				mes "放上人工心脏, ";
				mes "穿上以化学所做成的";
				mes "人工皮肤";
				next;
				mes "[爱丽希雅]";
				mes "头脑是应用魔法卷轴的";
				mes "'记忆卷轴'植入, ";
				mes "所做成的旧型机械人形, ";
				mes "就是第1代的机械人形";
				next;
				mes "[爱丽希雅]";
				mes "因为有机械骨骼的关系, ";
				mes "所以重量比较重, ";
				mes "因为有着限定的卷轴容量, ";
				mes "所以不能从事复杂的学习, ";
				mes "缺点是有着不能表现出人类";
				mes "情感的表情";
				next;
				break;
			case 2:
				mes "[爱丽希雅]";
				mes "假如 第1代 机械人形是从纯粹";
				mes "机械工学里所衍生出来的人形的话, ";
				mes "那么 第2代 机械人形是指, ";
				mes "结合了贤者的卷轴制作, ";
				mes "和炼金术师的";
				mes "生命体制造等的研究结果, ";
				mes "所完成的新的机械人形";
				next;
				mes "[爱丽希雅]";
				mes "和第1代一样是用机械骨骼";
				mes "和人工心脏做为动力原, ";
				mes "使用生命体制作方法";
				mes "给它穿上人工身躯, ";
				next;
				mes "[爱丽希雅]";
				mes "用第1代所使用的'记忆卷轴', ";
				mes "拥有植入着10万倍以上";
				mes "容量和效率性的";
				mes "'压缩记忆卷轴', ";
				mes "让它更能像人类一样般的";
				mes "学习";
				next;
				mes "[爱丽希雅]";
				mes "可是很可惜的也许是";
				mes "压缩记忆卷轴的错误, ";
				mes "使得人类型身躯和";
				mes "机械骨骼之间不协调的关系, ";
				mes "使得开发的第2代 机械人形, ";
				mes "在完成的第6年后出现了异常行动, ";
				mes "就让它停止机能了";
				next;
				break;
			case 3:
				mes "[爱丽希雅]";
				mes "和第2代 机械人形不一样的是, ";
				mes "第3代是 ^FF0000启 海伊洛^000000先生 的儿子, ";
				mes "^0000FF齐尔^000000先生 所设计的款式";
				next;
				mes "[爱丽希雅]";
				mes "没有使用机械骨骼的, ";
				mes "而是纯粹的生命体的身躯, ";
				mes "类似使用改造过的";
				mes "伊美乐的心脏碎片";
				mes "做为人工心脏的动力原, ";
				mes "和人类一样可做些生理活动";
				mes "而建造完成的";
				next;
				mes "[爱丽希雅]";
				mes "记忆卷轴是使用 第2代的, ";
				mes "'压缩记忆卷轴'";
				mes "所改造而制成的";
				next;
				mes "[爱丽希雅]";
				mes "虽然比 第2代的卷轴效能较低, ";
				mes "但安定性非常优, ";
				mes "是把生产价格降低的";
				mes "新的量产型的";
				mes "'压缩记忆卷轴'";
				next;
				mes "[爱丽希雅]";
				mes "你所见到的'^FF0000爱丽^000000'";
				mes "就是 第3代的机械人形的";
				mes "初版款式, ";
				mes "现在在工厂里为了大量贩卖, ";
				mes "量产型机械人形系列";
				mes "已完成初版制作的状态了";
				next;
				mes "[爱丽希雅]";
				mes "目前在使用新引进的学习方法, ";
				mes "让他们在学院里";
				mes "经验共同的生活, ";
				mes "正在进行最适合化的";
				mes "测试中";
				next;
				break;
			}
		case 2:
			mes "[爱丽希雅]";
			mes "若需要的话请跟我说一声吧";
			break;
		}
	}
	else {
		mes "[爱丽希雅]";
		mes "......";
		mes ".........";
		mes "............";
	}
	close2;
	cutin "",255;
	end;
}

//----------------------------------------------------------------------------
// Abduction triggering NPC
//----------------------------------------------------------------------------
lighthalzen,188,200,0	script	Abduction_trigger	-1,3,1,{
//OnTouch2:
OnTouch:
	if (KielHyreQuest == 50) {
		mes "离开官邸想要回去的时候, 在头上有一股震痛后就失去精神了";
		close2;
		percentheal -99,0;
		warp "kh_mansion",30,75;
	}
	end;
}

//----------------------------------------------------------------------------
// Mysterious Woman "Mitchell Layla"
//----------------------------------------------------------------------------
kh_mansion,25,79,4	script	可疑的女子#kh	4_F_JOB_HUNTER,3,3,{

//OnTouch2:
OnTouch:
	if (KielHyreQuest == 50) {
		mes "头上感觉到一股震痛醒来后, 前面站着一位 可疑的女子";
		next;
		mes "[??????]";
		mes "你醒来了吗,  没想到你这么快就醒来了,  可见你比我想像中还健康嘛, ";
		mes "我知道你现在很没有精神,  不过请你提起精神听好";
		next;
		mes "[??????]";
		mes "若不这样子的话... 我不能保障你的安全啊,  我是属于秀发兹发德 情报部所属的要员啊";
		next;
		mes "[??????]";
		mes "近来'雷根贝勒社'和 '启 海伊洛 企业'间有些异常的动静,  所以正在调查当中";
		next;
		mes "[??????]";
		mes "在监视官邸中看到你和 ^FF0000启 海伊洛^000000有一段单独对话,  因为我有几项问题要询问你,  所以就用了强硬的方法 把你带到这里来了";
		next;
		mes "[??????]";
		mes "嗯...对我用强硬的方法把你带过来,  我深深的说一声对不起,  不过....请问你和 ^FF0000启 海伊洛^000000是什么关系啊?";
		next;
		switch(select("把目前所发生的事情说给她听:我也不太清楚啊")) {
		case 2:
			mes "[??????]";
			mes "你真的是不清楚吗?";
			mes "能和^FF0000启 海伊洛^000000单独对话";
			mes "不是任何人都能办得到的啊....";
			mes "我们不会让你遭受伤害的";
			mes "请把你知道的事情说出来看看吧";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "......";
			mes ".........";
			mes "............";
			next;
			mes "[??????]";
			mes "这并不是你硬要闭着嘴";
			mes "就能解决的问题啊, ";
			mes "要有你的协助";
			mes "事情才会容易解开啊";
			next;
			mes "["+strcharinfo(0)+"]";
			mes "....(看样子话题有点偏离了...)";
			next;
			mes "[??????]";
			mes "呵呵....好吧..";
			mes "看样子你还是不会轻易的开口呀, ";
			mes "那我们这边";
			mes "先提供给你情报吧, ";
			mes "相对的你也把你所知道的情报";
			mes "提供给我们啊";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "唉?....什么....那...";
			next;
			mes "[??????]";
			mes "啊啊... 不需要有任何负担啊, ";
			mes "反正我们彼此共享情报";
			mes "不是吗?";
			mes "那我们把所知道的情报";
			mes "就来告诉你吧";
			next;
			mes "[??????]";
			mes "^FF0000启 海伊洛^000000以前是";
			mes "生产贩卖各式各样自动机械的";
			mes "'启 海伊洛' 企业的会长啊";
			next;
			mes "[??????]";
			mes "刚开始是从艾音布罗克";
			mes "小小的店面开始做起, ";
			mes "自从他优秀的能力传开来之后, ";
			mes "雷根贝勒方面就跟他接触了, ";
			mes "以一种子公司的概念";
			mes "来跟他接触";
			next;
			mes "[??????]";
			mes "其实对那部份有所疑问, ";
			mes "再怎么说重要的开发者";
			mes "即使都已离开了, ";
			mes "对当时在雷根贝勒重要的事业";
			mes "修护监护人魔物等, ";
			mes "却交给一位没有名气的";
			mes "'^FF0000启 海伊洛^000000'来负责, ";
			mes "虽然我认为他们之间有某种关连, ";
			mes "不过至今尚未正式的证实";
			next;
			mes "[??????]";
			mes "在这时候突然间出现了他的继承人, ";
			mes "叫做'^0000FF齐尔 海伊洛^000000', ";
			mes "没有听过他结婚的传闻, ";
			mes "虽然我们有猜测过, ";
			mes "或许是跟他的秘书^0000FF爱丽希雅^000000之间";
			mes "所生的小孩也不一定啊..";
			mes "也许吧....";
			next;
			mes "[??????]";
			mes "反正这样出现的 '^0000FF齐尔 海伊洛^000000'";
			mes "真的是呈现出完美的模样呢, ";
			mes "外貌、个性、能力..";
			mes "不缺任何一样啊";
			next;
			mes "[??????]";
			mes "不知道他是拥有着什么样的想法";
			mes "'^0000FF齐尔^000000'开始了他的某种事业, ";
			mes "也谈不上说是什么事业啊, ";
			mes "只是成立了福利馆和专门学院而已";
			next;
			mes "[??????]";
			mes "以回馈社会的名目, ";
			mes "所以像政府或在其它有竞争关系的";
			mes "企业们, 企图在学院让要员们";
			mes "伪装成学生潜入后做卧底, ";
			mes "可是都被拒绝了, ";
			mes "伪装成孤儿的文件,  和优异的成绩..";
			mes "全部都被拒绝了";
			next;
			mes "[??????]";
			mes "就像是....只接受一些";
			mes "已预定好的孩子们似的, ";
			mes "这样过了一段时间之后, 在不久前, ";
			mes "那'^0000FF齐尔^000000'召集了雷根贝勒相关者, ";
			mes "和相关企业们的首长们";
			mes "开了一场极秘密的聚会";
			next;
			mes "[??????]";
			mes "可是询问了几个地方后, ";
			mes "大约搜集到了某些情报, ";
			mes "在那个聚会里'^0000FF齐尔^000000'发表了";
			mes "新的计划";
			next;
			mes "[??????]";
			mes "那就是机械人形, ";
			mes "是从监护人魔物进化而成, ";
			mes "会自行思考行动的那种机械人形, ";
			mes "不过很奇怪的是在那重要的聚会里, ";
			mes "会长 '^FF0000启 海伊洛^000000'却";
			mes "完全看不到人影啊";
			next;
			mes "[??????]";
			mes "还有他的秘书 '^0000FF爱丽希雅^000000'也是一样, ";
			mes "可是就在昨天, ";
			mes "这几天看不到人影的 '^FF0000启 海伊洛^000000'";
			mes "在官邸里现身了, ";
			mes "好像一副若无其事";
			mes "的样子";
			next;
			mes "[??????]";
			mes "可是很神奇的这一次是 '^0000FF齐尔^000000', ";
			mes "以研究为藉口在正式的场合上";
			mes "消失踪影了";
			next;
			mes "[??????]";
			mes "再怎么看这很不自然吧?";
			mes "好像父子之间有种某种程度的";
			mes "暗中角力, ";
			mes "或许有某种阴谋";
			mes "也不一定啊";
			next;
			mes "[??????]";
			mes "因为他们的背后有";
			mes "雷根贝勒的关系呀";
			next;
			mes "[??????]";
			mes "来 我把我方已知的情报";
			mes "告诉你了, 现在换你说了吧?";
			mes "你不需要感到负担, ";
			mes "请你放轻松的说吧";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "啊...嗯.. 我的意思是...";
			mes "........";
			next;
			mes "[" + strcharinfo(0) + "]";
			mes "我被她的说话法所吸引, ";
			mes "不知不觉中打开话匣子了";
			mes "..........";
			mes "...... ";
			next;
		case 1:
			mes "你把目前所发生的事情 说给她听了";
			mes "讲到^FF0000爱丽^000000的故事时候 突然觉得自己的声音变小了";
			mes "......... .....";
			next;
			mes "[??????]";
			mes "嗯..... 原来是这样啊.. 有关那位女的事情 ......";
			next;
			mes "[??????]";
			mes "反正以后请你多多帮助 我们就好了";
			next;
			switch(select("帮助他们:........")) {
			case 2:
				mes "[??????]";
				mes "我就知道会这样啊, ";
				mes "嗯嗯....所谓沉默就是承认..";
				mes "呼呼..";
				next;
				mes "["+strcharinfo(0)+"]";
				mes "唉?";
				mes "不是我的..意思是...";
				next;
				mes "[??????]";
				mes "啊啊...请你不要太担心, ";
				mes "你个人的安全";
				mes "我们会负责到底的, ";
				mes "你只要配合我们协助";
				mes "做调查就可以了";
				next;
				select("..好吧那就那样子吧");
			case 1:
				mes "[??????]";
				mes "我就知道会这样啊, ";
				mes "呼呼...";
				mes "我...我还没有做自我介绍啊, ";
				mes "我是属于";
				mes "秀发兹发德 情报部所属的";
				mes "'^0000FF米契尔 拉音拉^000000'";
				mes "以后请你多多指教";
				set KielHyreQuest,52;
				close;
			}
		}
	}
	else if (KielHyreQuest == 52) {
		mes "[米契尔]";
		mes "好吧, 那我就给你几样线索吧, ";
		mes "你去朱诺的话, 约30年前";
		mes "有位女士见过^FF0000启 海伊洛^000000的秘书";
		mes "^0000FF爱丽希雅^000000";
		next;
		mes "[米契尔]";
		mes "但是依据那位女士的说法, ";
		mes "^0000FF爱丽希雅^000000在30年前就自杀了, ";
		mes "现在^FF0000启 海伊洛^000000的秘书";
		mes "^0000FF爱丽希雅^000000和 30年前的那女孩";
		mes "竟然长的一模一样啊";
		next;
		mes "[米契尔]";
		mes "竟然长的一模一样啊";
		mes "莫非 ^0000FF爱丽希雅^000000的模型";
		mes "是不是就是她呢";
		mes "...让我启人疑窦, ";
		mes "所以请你到朱诺后";
		mes "对那位女士进行调查吧";
		next;
		mes "[米契尔]";
		mes "等你把情报都搜集好了跟管家对话的话, 他会把你带领到这边来的";
		next;
		mes "[米契尔]";
		mes "等你都准备好了的话, 我会用专用的飞空艇送你到朱诺";
		set KielHyreQuest,54;
		close;
	}
	else if (KielHyreQuest == 54) {
		mes "[米契尔]";
		mes "怎么样啊? 准备好了吗?";
		next;
		switch(select("是的:还没有")) {
		case 1:
			mes "[米契尔]";
			mes "那么就拜托你啦~?";
			close2;
			warp "yuno",54,209;
			end;
		case 2:
			mes "[米契尔]";
			mes "那么等你准备好的话再来跟我说吧";
			close;
		}
	}
	else if (KielHyreQuest == 64) {
		mes "[米契尔]";
		mes "啊啊, 你回来了啊, ";
		mes "有带来什么好玩的情报吗?";
		mes "你以在朱诺所搜集到的情报为基础, ";
		mes "对她做全盘性的说明了";
		next;
		mes "[米契尔]";
		mes "果然....";
		mes "委托给你是 对的, ";
		mes "以那些故事为基础, ";
		mes "对^FF0000启 海伊洛^000000的过去谈论的话, ";
		mes "也许能挖出一些";
		mes "关于^0000FF齐尔^000000的真面目和 雷根贝勒社之间的关系吧";
		next;
		mes "[米契尔]";
		mes "来 请把这个窃听器戴好吧, ";
		mes "若有发生危险的情况时, ";
		mes "我们的要员会直接过去帮你的";
		set KielHyreQuest,68;
		next;
		warp "kh_mansion",83,50;
		end;
	}
	else if (KielHyreQuest >= 68) {
		mes "[米契尔]";
		mes "你怎么还没有离开啊?";
		next;
		warp "kh_mansion",83,50;
		end;
	}
}

//----------------------------------------------------------------------------
// Warp portal into Kiehl's 'Room'
// - Anyone can enter
// - After 30-40 seonds this NPC should be disabled.
//----------------------------------------------------------------------------
kh_mansion,29,27,0	script	Kiehl_Room_Warp	WARPNPC,2,2,{
OnTouch:
	warp "kh_kiehl01",10,31;
	end;

OnEnable:
	initnpctimer;
	specialeffect EF_SUMMONSLAVE;
	end;

OnTimer30000:
	stopnpctimer;
	specialeffect EF_SUMMONSLAVE;
	disablenpc "Kiehl_Room_Warp";
	end;

OnInit:
	disablenpc "Kiehl_Room_Warp";
	end;
}

//============================================================================

//============================================================================
// Rosimier NPCs and other Related NPCs
//============================================================================

//----------------------------------------------------------------------------
// Odd Grandma
//----------------------------------------------------------------------------
yuno,257,140,4	script	看似可疑的 奶奶	4_F_EINOLD,{
	if (KielHyreQuest < 54) {
		mes "[奶奶]";
		mes "我们家小孩到哪里去了呢?";
		mes "孩子呀~ 孩子呀~";
		close;
	}
	else if (KielHyreQuest == 54) {
		mes "[奶奶]";
		mes "小孩 小孩 我们 小孩";
		mes "不要 哭啊 不要 哭啊";
		mes "你哭 的话 所有 天空";
		mes "月亮 星星 会悲 哀啊";
		mes "睡吧 睡吧 我们 小孩";
		mes "不要 哭啊 不要 哭啊";
		next;
		mes "[奶奶]";
		mes "小孩 小孩 我们 小孩";
		mes "不要 哭啊 不要 哭啊";
		mes "你哭 的话 深水里 的鱼";
		mes "也都 不能 睡着啊";
		mes "睡吧 睡吧 我们 小孩";
		mes "不要 哭啊 不要 哭啊";
		next;
		switch(select("请问你在做什么呢?:看样子小孩很爱哭啊?")) {
		case 1:
			mes "[奶奶]";
			mes "嗯嗯? 嗯嗯...";
			mes "我们家小孩一直哭不肯睡觉...";
			mes "要哄她睡觉她却要远离妈妈";
			mes "一直玩个不停..";
			mes "也要等到小孩睡了, ";
			mes "我也才能做点家事啊..";
			next;
			mes "[奶奶]";
			mes "因为小孩不睡我也没能做家事";
			mes "所以家里有点乱..";
			mes "唉哟.. 害的我还要 被主人骂..";
			set KielHyreQuest,56;
			next;
			select("请问小孩在哪里呢?");
			mes "[奶奶]";
			mes "嗯嗯? 啊..小孩跑到哪里去了呢?";
			mes "刚才还在这里啊...";
			mes "小孩子觉得太无聊出去玩耍了吧..";
			mes "啊! 你原来在这啊";
			next;
			mes "[奶奶]";
			mes "我说过不可以捉弄旅行者吗?";
			mes "快点过来啊!";
			mes "唉哟.. 很抱歉啊, ";
			mes "小孩子太调皮啦...";
			//GetHEALTHSTATE VAR_CURSE 30
			close;
		case 2:
			mes "[奶奶]";
			mes "嗯? 嗯嗯...";
			mes "小孩子每天说好冷所以才会哭, ";
			mes "若觉得冷的话就回到妈妈的怀抱里吧";
			next;
			mes "[奶奶]";
			mes "你为什么那么的喜欢水呢...";
			mes "睡吧~ 睡吧~ 我们 ^0000FF爱丽希雅^000000, ";
			mes "不要再任性了, 快来这里睡吧";
			next;
			mes "[奶奶]";
			mes "因为你这样不睡觉妈妈也不能做家事啊..";
			close;
		}
	}
	else if ((KielHyreQuest >= 56) && (KielHyreQuest < 60)) {
		mes "[奶奶]";
		mes "我们家小孩到哪里去了呢?";
		mes "孩子呀~ 孩子呀~";
		if (countitem(7500) < 1) { 
			close;
		}
		else {
			next;
			switch(select("爱丽希雅? 难道是...")) {
			case 1:
				cutin "kh_ellisia_port",1;
				mes "把爱丽希雅的肖像画拿给奶奶看了";
				next;
				cutin "",255;
				mes "[奶奶]";
				mes "嗯嗯?";
				mes "唉..爱丽! ^0000FF爱丽希雅^000000!!";
				mes "你....你认识我们家爱丽啊?!";
				mes "我们家小孩在哪里呢?!?!";
				next;
				mes "[奶奶]";
				mes "我们家小孩... 我们家爱丽";
				mes "昨天离开家之后再也没有回来了!!";
				mes "若你知道我们家小孩在哪里的话";
				mes "请务必告诉我?!?!";
				next;
				mes "[" + strcharinfo(0) + "]";
				mes "...奶奶手拿着肖像画";
				mes "很长一段时间忐忑不安后, ";
				mes "开始对自己自言自语了";
				close;
			}
		}
	}
	else if (KielHyreQuest >= 60) {
		mes "[奶奶]";
		mes "我们家 ^0000FF爱丽希雅^000000 该睡了吧?";
		mes "嗯嗯? 什么肚子饿呀?";
		mes "那就吃饭吧..";
		mes "睡吧 睡吧~";
		close;
	}
}

//----------------------------------------------------------------------------
// Old Lady; gives you the key to the Rosimier Mansion
//----------------------------------------------------------------------------
yuno,250,132,0	script	阿姨#kh	4_F_05,{
	if (KielHyreQuest < 56) {
		mes "[阿姨]";
		mes "唉哟 好累啊...";
		mes "可能是上了年纪吧";
		mes "全身不对筋啊..唉哟哟..";
		close;
	}
	else if (KielHyreQuest == 56) {
		if (checkweight(7498,1) == 0) {
			mes "请在这里暂停一下 !!";
			mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
			close;
		}
		mes "[阿姨]";
		mes "唉哟, 最近天气是怎么搞的啊...";
		next;
		switch(select("......:询问有关那位奶奶的事情..")) {
		case 1:
			mes "[阿姨]";
			mes "我也是上了年纪呀...唉哟哟..";
			close;
		case 2:
			mes "[阿姨]";
			mes "嗯? 啊.. 那位奶奶呀? 那位奶奶我是很熟啦, 她是我好友的母亲啊, 叫做'^0000FF爱丽希雅^000000'啊...";
			mes "不过却红颜薄命.. 唉咻.. 她曾是一位很漂亮又善良的朋友...";
			next;
			mes "[阿姨]";
			mes "自从那事件之后 那位奶奶受不了那场打击, 就变成那个样子了, 唉咻...";
			next;
			select("^3355FF爱丽希雅^000000小姐呢...?");
			mes "[阿姨]";
			mes "^0000FF爱丽希雅^000000还....真的很漂亮呢.. 身为同样的女人看了 也会被她迷住呀";
			next;
			mes "[阿姨]";
			mes "所以在她的周围附近 对她眼红的男士很多, 尤其是那罗希米爱乐家的儿子 詹姆斯最为严重, 据传闻他有向她 求婚啊...";
			next;
			mes "[阿姨]";
			mes "不过没多久因为^0000FF爱丽希雅^000000过世的关系, 全部都落空了, 好可惜啊...嗯...";
			next;
			select("罗希米爱乐家??");
			mes "[阿姨]";
			mes  "啊啊.. 罗希米爱乐家在朱诺算是 历史很悠久的家族, 好像是在..... ^0000FF爱丽希雅^000000过世之后, ";
			mes "可能是大儿子在事业上失败, 让家世在一夕之间 就垮了....";
			next;
			mes "[阿姨]";
			mes "于是后来就由 市府管理这间官邸, 钥匙却交给我保管...";
			next;
			select("请问我能进入官邸吗?");
			mes "[阿姨]";
			mes "嗯....";
			mes "老实说是不可以的..";
			mes "但感觉你跟 ^0000FF爱丽希雅^000000很熟, 我就相信你把钥匙交给你, ";
			mes "你必须在市府派人来以前, 把钥匙还给我呀";
			getitem 7498,1; //Rosimier_Key
			set KielHyreQuest,58;
			close;
		}
	}

	else if ((KielHyreQuest == 58) &&
		(countitem(7499) < 1) || 
		(countitem(7500) < 1) || 
		(countitem(7501) < 1) || 
		(countitem(7502) < 1)) {
		mes "[阿姨]";
		mes "听说市府要派人来呀, 请你快一点好吗";
		close;
	}

	else if ((KielHyreQuest == 58) &&
		(countitem(7499) == 1) && 
		(countitem(7500) == 1) && 
		(countitem(7501) == 1) && 
		(countitem(7502) == 1)) {
		mes "[阿姨]";
		mes "请问事情做的还顺利吗?老实说这房子里";
		mes "没有什么值钱的东西啊, 老早就被那些债主们都搬走了";
		next;
		select("请问^0000FF爱丽希雅^000000为什么....?");
		mes "[阿姨]";
		mes "啊啊...";
		mes "上次提过的罗希米爱乐家的 长子, ";
		mes "我不是说詹姆斯答应^0000F爱丽希雅^000000";
		mes "要结婚的吗?";
		next;
		mes "[阿姨]";
		mes "但事实上詹姆斯家里";
		mes "已有内定的未婚妻了, ";
		mes "所以时间拖久了之后, ";
		mes "他就跟未婚妻结婚了";
		next;
		mes "[阿姨]";
		mes "所以为此事伤心的";
		mes "^0000F爱丽希雅^000000, 不幸的就自杀了..";
		next;
		mes "[阿姨]";
		mes "想要知道细节的话, 请你去找";
		mes "'启 海伊洛' 学院南边的渔夫吧, ";
		mes "去那里会有在江边把^0000FF爱丽希雅^000000的";
		mes "尸体捞起来的渔夫, 请你去问他吧";
		delitem 7498,1; //Rosimier_Key 
		set KielHyreQuest,60;
		close;
	}
	else if (KielHyreQuest >= 60) {
		mes "[阿姨]";
		mes "要下雨了吗....";
		mes "全身又酸痛啊..";
		close;
	}
}


//----------------------------------------------------------------------------
// Warp portal into Rosimier Mansion
//----------------------------------------------------------------------------
yuno,273,141,0	script	Rosimmir_Entrance	WARPNPC,2,2,{
OnTouch:
	if (countitem(7498) < 1) {
		end;
	}
	else {
		warp "kh_rossi",20,92;
	}
	end;
}

//----------------------------------------------------------------------------
// Rosimier Mansion, first floor; Table
//----------------------------------------------------------------------------
kh_rossi,23,23,0	script	桌子#khr2	HIDDEN_NPC,{
	if (checkweight(7499,1) == 0) {
		mes "请在这里暂停一下 !!";
		mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
		close;
	}
	if (KielHyreQuest < 58) {
		mes "是一个空空的抽屉";
		close;
	}
	else if (KielHyreQuest < 60) {
		if (countitem(7499) < 1) {
			cutin "kh_family_port",1;
			mes "查看书桌后发现书桌的抽屉是可以打开的, 在抽屉里发现了一个相框";
			getitem 7499,1; //Family_Portrait
		}
		else {
			mes "是一个空空的抽屉";
		}
	}
	else{
		mes "只是获得家族肖像画的空抽屉而已, 看不到什么其它的物品";
		close;
	}
	close2;
	cutin "",255;
	end;
}

//----------------------------------------------------------------------------
// Rosimier Mansion, first floor; Shelf
//----------------------------------------------------------------------------
kh_rossi,92,40,0	script	书柜#khr	HIDDEN_NPC,{
	if (checkweight(7500,1) == 0) {
		mes "请在这里暂停一下 !!";
		mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
		close;
	}
	if (KielHyreQuest < 58) {
		mes "看不到什么其它的物品";
		close;
	}
	else if (KielHyreQuest < 60) {
		if (countitem(7500) < 1) {
			mes "有一个被锁住的抽屉";
			next;
			switch(select("使用钥匙:不管它")) {
			case 1:
				switch(select("钥匙 1:钥匙 2")) {
				case 1:
					mes "使用钥匙后 响起'喳喀!'的一声";
					mes "抽屉被开启了, ";
					mes "抽屉里面有一位";
					mes "女人的肖像画, ";
					next;
					cutin "kh_ellisia_port",2;
					mes "女人的长相跟 ^0000FF爱丽希雅^000000一模一样, ";
					mes "相框后面写着 '挚爱的 ^0000FF爱丽希雅^000000..";
					mes "詹姆斯' 留";
					getitem 7500,1; //Elysia_Portrait
					close2;
					cutin "",255;
					end;
				case 2:
					close;
				}
			case 2:
				mes "看不到什么其它的物品";
				close;
			}
		}
		else {
			mes "这里是发现女人肖像画的地方";
			close;
		}
	}
	else {
		mes "这里是发现女人肖像画的地方看不到什么其它的物品";
		close;
	}
}


//----------------------------------------------------------------------------
// Rosimier Mansion, top floor; Desk
//----------------------------------------------------------------------------
kh_rossi,144,286,0	script	书桌#khr3	HIDDEN_NPC,{
	if (checkweight(7501,1) == 0) {
		mes "请在这里暂停一下 !!";
		mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
		close;
	}
	if (KielHyreQuest < 58) {
		mes "有着3个抽屉的书桌";
		close;
	}
	else if (KielHyreQuest < 60) {
		mes "有着3个抽屉的书桌";
		next;
		switch(select("第一个抽屉:第二个抽屉:第三个抽屉:不理它")) {
		case 1:
			mes "好像被什么给卡住了打不开";
			close;
		case 2:
			if (countitem(7501) < 1) {
				mes "打开抽屉后看到了信件";
				next;
				mes "写着 'K.H' 缩写的人 好像要写给^0000FF爱丽希雅^000000的信";
				getitem 7501,1; //Kyll_Hyre_Letter2
				close;
			}
			else {
				mes "看到了一个空的抽屉";
				close;
			}
		case 3:
			mes "打开抽屉后看到了一张纸条";
			next;
			mes "信件的内容是 詹姆斯向";
			mes "^0000FF爱丽希雅^000000求婚的内容, ";
			mes "好像^0000FF爱丽希雅^000000从 詹姆斯那里";
			mes "得到订婚戒指似的";
			close;
		case 4:
			mes "......";
			mes ".........";
			mes "............";
			close;
		}
	}
	else{
		mes "有一个开不启的抽屉 和空抽屉的书桌";
		close;
	}
}

//----------------------------------------------------------------------------
// Rosimier Mansion, top floor; Bookshelf
//----------------------------------------------------------------------------
kh_rossi,148,288,0	script	书橱#khr	HIDDEN_NPC,{
	if (checkweight(7502,1) == 0) {
		mes "请在这里暂停一下 !!";
		mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
		close;
	}
	if (KielHyreQuest < 58) {
		mes "有着累积了许多灰尘的书";
		close;
	}
	else if (KielHyreQuest < 60) {
		if (countitem(7502) < 1) {
			mes "观察书柜的途中, 发现了夹在书本里面的纸条";
			getitem 7502,1; //Piece_Memo_Of_James
			close;
		}
		else {
			mes "有着累积了许多灰尘的书";
			close;
		}
	}
	else{
		mes ".......有着累积了些灰尘的书";
		close;
	}
}

//----------------------------------------------------------------------------
// Rosimier Mansion, top floor; Bed
//----------------------------------------------------------------------------
kh_rossi,154,286,0	script	床铺#khr	HIDDEN_NPC,{
	if (KielHyreQuest < 58) {
		mes "有一张已整理顿好的床铺, 可是上面已累积了一点灰尘, 所以感觉不到人的气息";
		close;
	}
	else if (KielHyreQuest < 60) {
		mes "有一张已整理顿好的床铺, 可是上面已累积了一点灰尘, 所以感觉不到人的气息";
		next;
		switch(select("查看床铺上方:查看床铺下方")) {
		case 1:
			mes "查看床铺上方时起了一点灰尘";
			mes "........";
			next;
			mes "没有任何成果只觉得喉咙有点不舒服";
			percentheal -10,0;
			close;
		case 2:
			mes "查看床铺下方时, ";
			mes "看到某一个角落有着开启的戒指盒子, ";
			mes "不过却看不到戒指";
			close;
		}
	}
	else {
		mes "有一张零乱的床铺";
		close;
	}
}

//----------------------------------------------------------------------------
// Fisherman
//----------------------------------------------------------------------------
yuno_fild12,232,222,0	script	老渔夫	4_M_SEAMAN,{
	if (KielHyreQuest < 60) {
		mes "[渔夫]";
		mes "最近都钓不到鱼";
		mes "真是糟糕啊自从这里进驻工厂之后, ";
		mes "这里的鱼就变得有点奇怪了, 很难钓到鱼...";
		mes "唉哟....";
		close;
	}
	else if (KielHyreQuest == 60) {
		mes "[渔夫]";
		mes "嗯? 你是谁啊? 对我有什么话要说吗? 有什么事情要委托我的话 请先给谢礼啊 谢礼...";
		next;
		mes "[渔夫]";
		mes "唉咻....最近这些年轻人们....唉咿.. 想想看离上一次吃到新鲜的生鱼片 也过了一段满长的时间啊...";
		if (countitem(544) >= 10)  {
			next;
			mes "[渔夫]";
			mes "嗯? 你说把这个给我呀? 唉哟 不需要这样吧..... 呵呵...谢谢你, 有什么问题的话就直接问我吧";
			next;
			select("30年前在这里...");
			mes "[渔夫]";
			mes "嗯? 让我想一想...30年前啊... 啊啊...我想起来了, 也就是... 正确的日子是 30年前的 8月 20日.....";
			mes "那天是我老婆的生日啊, 所以我记得很清楚啊";
			next;
			mes "[渔夫]";
			mes "那天我想送她一件礼物... 所以一大早就出来洒网了, 不过网子没有过多久 感觉到网子里很重, 我还以为抓到 '鳟鱼了!'";
			mes "用力的拉上来之后 却发现是一位女的尸体";
			next;
			mes "[渔夫]";
			mes "我吓的直接就通报朱诺的警备队了, 后来得知那位女孩 喜欢上自己的主人, 然后又被他背叛了所以就自杀了 唉哟...真是一个坏家伙啊";
			next;
			mes "[渔夫]";
			mes "所以当警备队人员 把那女的尸体抬走时, 从握紧的那女孩的手里中 掉落了一个闪烁的东西";
			next;
			mes "[渔夫]";
			mes "可是警备队人员 都没有发现就直接路过了, 我等到警备队人员都不见了之后 小心的回去寻找了";
			next;
			mes "[渔夫]";
			mes "可是这是怎么回事啊, 看起来非常贵重的戒指 就掉在那里啊?";
			next;
			mes "[渔夫]";
			mes "怎么会有这么好康的事情.. 其实心理面有想到 这是尸体的遗物啊心理会有点毛毛的, 后来想一想死人是已经死亡了, ";
			mes "活着的人还是要继续的活下去啊?";
			next;
			mes "[渔夫]";
			mes "我还想着把这个东西卖掉之后 准备买个东西做为我老婆的生日礼物呢, 结果却发现某一位男子 很努力的往这边跑过来, ";
			mes "所以我就若无其事的..在这边等他了";
			next;
			mes "[渔夫]";
			mes "等到那男子跑到我面前后 喘了一阵子气后, 就问我 你是不是捞起 那女子尸体的人呢, 所以我就回答是啊";
			next;
			mes "[渔夫]";
			mes "他又问起我 有没有捡到戒指之类的东西, 所以我就想到状况是不是有点不太对劲啊, 就假装什么事情都不知道, ";
			mes "就回答他我什么东西都没有捡到啊";
			next;
			mes "[渔夫]";
			mes "突然间那男子对我说 他真的非常需要那个戒指还哭哭哀求我呢, 并且还说他愿意 以高价买回戒指呢";
			next;
			mes "[渔夫]";
			mes "所以说 并不是..嗯嗯 为了高价钱的价格, 只是觉得那男人看起来哀求很可怜... 所以就把那戒指 卖给了那位男的";
			next;
			mes "戒指看起来并不是很贵, 却没想到他给我了一堆钱之后就离开了, ";
			mes "最后在我打听的消息之后 他是在村落里修理一些坏掉的机械 来维系生命的人啊, 之后那个人就消失不见了...";
			next;
			mes "[渔夫]";
			mes "之后就忘却在 我的记忆里了";
			next;
			select("请问你还记得那男人的名字吗?");
			mes "[渔夫]";
			mes "让我想一想.... 好像叫做... '海洛?' '海音?' 大概是这类的名字...";
			next;
			mes "[渔夫]";
			mes "事隔已久的事情了, 所以也没有再理会这件事情啊.... 不过他生活的地方我还记得呢...";
			mes "'^FF0000在东北方 森林 警备队 露营地附近的凉亭^000000' 的样子..";
			delitem 544,10; //Fish_Slice
			set KielHyreQuest,62;
			close;
		}
		else {
			close;
		}
	}
	else if (KielHyreQuest >= 62) {
		mes "[渔夫]";
		mes "什么你说记不起来在什么地方?";
		mes "天啊... 年轻人记忆力怎么";
		mes "这么差劲啊..";
		mes "我再讲一遍请你听好并记住";
		next;
		mes "[渔夫]";
		mes "刚才我明明有讲";
		mes "'^FF0000在东北方 森林 警备队";
		mes "露营地附近的凉亭^000000'啊, ";
		mes "我是这么说的...嗯...";
		mes "还有什么事要问我的吗?";
		mes "有关那件事";
		mes "我再也没有可回想的..";
		close;
	}
}

//----------------------------------------------------------------------------
// Kiel Hyre's hut; Wooden Board
//----------------------------------------------------------------------------
yuno_fild09,158,217,0	script	木板#kh	HIDDEN_NPC,{
	if (checkweight(7503,1) == 0) {
		mes "请在这里暂停一下 !!";
		mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
		close;
	}
	if ((KielHyreQuest < 62) || (KielHyreQuest >= 64)) {
		mes "看起来没什么有用的木板掉落在草丛里";
		close;
	}
	else if (KielHyreQuest == 62) {
		mes "掉落着长型的木板, 木板上纤细的写着 K.H 的字样";
		next;
		mes "为了观察木板试着移动, 那下面有";
		mes "碎掉的相框, 相框里画着不知在哪里见过面的";
		mes "年轻人的肖像画, ";
		next;
		cutin "kh_kyel_port",2;
		mes "......感觉上跟";
		mes "^FF0000启 海伊洛^000000先生";
		mes "满像的";
		getitem 7503,1;	//Man_Portrait
		set KielHyreQuest,64;
		next;
		cutin "",255;
		mes "看样子已累积了不少的情报";
		mes "回到 '米契尔'身边吧";
		close;
	}
}

//============================================================================
// Kiehl Hyre's Room and Boss NPCs
//============================================================================
// Beyond here the NPC for the final areas.
// Now, this area is not someplace you wanna slow down so
// you can pick up dialog. I used packet logging to pull
// what I could and for the sake of the two people with me,
// did not bother doing all the proper NPC positioning
// or some of the 'error/wrong option' dialogs.
// All the doors are kind of weird.
//============================================================================

//----------------------------------------------------------------------------
// 基尔的房间; Receiver (Gives black keycards upon killing mobs)
//----------------------------------------------------------------------------
kh_kiehl01,17,39,0	script	收讯机#kh	HIDDEN_NPC,{
	if (mobcount("kh_kiehl01","Receiver#kh::OnMyMobDead") < 1) {
		mes "吱兹...吱吱兹...吱....";
		if (KielHyreQuest == 74) {
			next;
			mes "从收讯机里传来带有";
			mes "杂音和某个人的声音";
			next;
			mes "[????]";
			mes "没见过的面孔啊...";
			mes "是父亲派来的刺客吗...";
			mes "呼呼, 那么...";
			mes "做为你能顺利到达这里来的奖赏, ";
			mes "也许我会给你我的卷轴也不一定啊, ";
			mes "来 请顺利来找我吧";
			set KielHyreQuest,76;
		}
		close2;
		monster "kh_kiehl01",16,32,"爱丽瑟",1739,1,"收讯机#kh::OnMyMobDead";
		monster "kh_kiehl01",18,31,"爱丽俄",1740,1,"收讯机#kh::OnMyMobDead";
		end;
	}

	else {
		end;
	}

OnMyMobDead:
	if (mobcount("kh_kiehl01","收讯机#kh::OnMyMobDead") <1) { 
		makeitem 7506,1,"this",19,36;
	}
	end;
}

//----------------------------------------------------------------------------
// 基尔的房间; Flower Vase (Gives...password...for Box)
//----------------------------------------------------------------------------
kh_kiehl01,13,40,0	script	花瓶#kh1	HIDDEN_NPC,{
	if (KielHyreQuest < 74) {
		mes "有放着花瓶";
		close;
	}
	if (KielHyreQuest >= 74) {
		mes "有放着花瓶";
		next;
		switch(select("抬起花瓶:打破花瓶:把花瓶倒过来")) {
		case 1:
			mes "没有任何东西";
			close;
		case 2:
			mes "打不破, ";
			mes "......是雷根贝勒的特制品吗?";
			close;
		case 3:
			mes "花瓶底部有写着 特别的文字";
			mes "'^FF0000The rabbit often observes the door.'";
			mes "'The night eats the pickled orange.^000000'";
			close;
		}
	}
	else{
		mes "花瓶底部有写着 特别的文字";
		mes "'^FF0000The rabbit often observes the door.'";
		mes "'The night eats the pickled orange.^000000'";
		close;
	}
}


//----------------------------------------------------------------------------
// 基尔的房间; Box
//----------------------------------------------------------------------------
kh_kiehl01,19,25,0	script	箱子#kh1	HIDDEN_NPC,{
	if (checkweight(7505,1) == 0) {
		mes "请在这里暂停一下 !!";
		mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
		close;
	}
	if (KielHyreQuest < 74) {
		mes "有一个关闭的箱子, 箱子上有写着奇怪的文字做为钥匙的排列";
		next;
		input .@KHInput$;
		mes "'哔~' 你所输入的暗号错误";
		close;
	}
	if (KielHyreQuest >= 74) {
		if (countitem(7505) < 1) {
			mes "有一个关闭的箱子, 箱子上有写着奇怪的文字 做为钥匙的排列";
			next;
			input .@KHInput$;
			if (.@KHInput$ == "open the door") {
				mes "打开箱子时 '喳喀'一声 从门那里传来了, 箱子里面有着 ^FF0000小钥匙^000000";
				getitem 7505,1; //Toy_Key
				close;
			}
			else {
				mes "哔~' 你所输入的暗号错误";
				close;
			}
		}
		else {
			mes "打开的箱子里面没有任何东西";
			close;
		}
	}
	else{
		mes "打开的箱子里面没有任何东西";
		close;
	}
}

//----------------------------------------------------------------------------
// 基尔的房间; Big Door, (First)
// - Anyone can pass through this door
// - Consume one Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,44,33,0	script	巨大的门#BigDoorKHQ1	HIDDEN_NPC,{
	if (.KHDoor1Opened == 0) {
		mes "门是关闭的, 在把手那边看到纤细的小缝";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "黑色钥匙卡") {
			if (countitem(7506) >= 1) {
				mes "把^0000FF黑色钥匙卡^000000放在里面旋转时 '喳喀'一声 门开启了";
				delitem 7506,1; //Black_Key_Card
				donpcevent "Big_Door_1_Warp::OnEnable";
				enablenpc "Big_Door_1_Warp";
				set .KHDoor1Opened,1;
				close;
			}

		}
		mes "打不开";
		close;
	}

	else {
		mes "门已经开启着";
		close;
	}
}

kh_kiehl01,43,33,0	script	Big_Door_1_Warp	45,1,1,{
OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnInit:
	disablenpc "Big_Door_1_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Big_Door_1_Warp";
	set getvariableofnpc(.KHDoor1Opened,"巨大的门#BigDoorKHQ1"),0;
	end;

OnTouch:
	warp "kh_kiehl01",55,33;
	end;
}

//----------------------------------------------------------------------------
// 基尔的房间; Big Door, (second)
// - Consume Toy Key when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,174,40,0	script	巨大的门#BigDoorKHQ2	HIDDEN_NPC,{
	if (.KHDoor2Opened == 0) {
		mes "门是关闭的";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "玩具钥匙") {
			if (countitem(7505) >= 1) {
				mes "把^FF0000钥匙^000000放在里面旋转时 '喳喀'一声 门开启了";
				delitem 7505,1; //Toy_Key
				donpcevent "Big_Door_2_Warp::OnEnable";
				enablenpc "Big_Door_2_Warp";
				set .KHDoor2Opened,1;
				close;
			}

		}
		mes "打不开";
		close;
	}
	else {
		mes "门已经开启着";
		close;
	}
}

kh_kiehl01,174,39,0	script	Big_Door_2_Warp	WARPNPC,1,1,{
OnEnable:
	initnpctimer;
	specialeffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Big_Door_2_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	specialeffect EF_SUMMONSLAVE;
	disablenpc "Big_Door_2_Warp";
	set getvariableofnpc(.KHDoor2Opened,"巨大的门#BigDoorKHQ2"),0;
	end;

OnTouch:
	warp "kh_kiehl01",173,52;
	end;
}

//----------------------------------------------------------------------------
// 基尔的房间; Big Door, (Third)
// - Consume one Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,77,108,0	script	巨大的门#BigDoorKHQ3	HIDDEN_NPC,{
	if (.KHDoor3Opened == 0) {
		mes "^3355FFThe door is locked,";
		mes "but there is a narrow";
		mes "slot next to the doorknob.^000000";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "黑色钥匙卡") {
			if (countitem(7506) >= 1) {
				mes "把^0000FF黑色钥匙卡^000000放在里面旋转时 '喳喀'一声 门开启了";
				delitem 7506,1; //Black_Key_Card
				donpcevent "Big_Door_3_Warp::OnEnable";
				enablenpc "Big_Door_3_Warp";
				set .KHDoor3Opened,1;
				close;
			}

		}
		mes "打不开";
		close;
	}
	else {
		mes "门已经开启着";
		close;
	}
}

kh_kiehl01,78,108,0	script	Big_Door_3_Warp	WARPNPC,1,1,{
OnEnable:
	initnpctimer;
	specialeffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Big_Door_3_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	specialeffect EF_SUMMONSLAVE;
	disablenpc "Big_Door_3_Warp";
	set getvariableofnpc(.KHDoor3Opened,"巨大的门#BigDoorKHQ3"),0;
	end;

OnTouch:
	warp "kh_kiehl01",68,108;
	end;
}

//----------------------------------------------------------------------------
// 基尔的房间; Big Door, (Fourth)
// - Consume TWO Black KeyCard when opened.
// - Only one person actually needs to open it.
//----------------------------------------------------------------------------
kh_kiehl01,42,177,0	script	巨大的门#BigDoorKHQ4	HIDDEN_NPC,{
	if (.KHDoor4Opened == 0) {
		mes "^3355FFThe door is locked,";
		mes "but there is a narrow";
		mes "slot next to the doorknob.^000000";
		next;
		input .@KHInput$;
		if (.@KHInput$ == "黑色钥匙卡") {
			if (countitem(7506) >= 2) {
				mes "把^0000FF黑色钥匙卡^000000放在里面旋转时 '喳喀'一声 门开启了";
				delitem 7506,2; //Black_Key_Card
				donpcevent "Big_Door_4_Warp::OnEnable";
				enablenpc "Big_Door_4_Warp";
				set .KHDoor4Opened,1;
				close;
			}
		}
		mes "打不开";
		close;
	}

	else {
		mes "门已经开启着";
		close;
	}
}

kh_kiehl01,41,177,0	script	Big_Door_4_Warp	WARPNPC,1,1,{
OnEnable:
	initnpctimer;
	specialeffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Big_Door_4_Warp";
	end;

OnTimer30000:
	stopnpctimer;
	specialeffect EF_SUMMONSLAVE;
	disablenpc "Big_Door_4_Warp";
	set getvariableofnpc(.KHDoor4Opened,"巨大的门#BigDoorKHQ4"),0;
	end;

OnTouch:
	warp "kh_kiehl01",49,177;
	end;
}

//----------------------------------------------------------------------------
// 基尔的房间; Robots
//----------------------------------------------------------------------------
kh_kiehl01,15,179,0	script	机械人形#kh1	HIDDEN_NPC,{
	if (mobcount("kh_kiehl01","Robots#kh1::OnMyMobDead") < 1) {
		mes "触碰试验管后, 机械人形们就跳出来了";
		close2;
		monster "kh_kiehl01",18,181,"爱丽俄",1740,1,"机械人形#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,180,"爱丽瑟",1739,1,"机械人形#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,179,"爱丽俄",1740,1,"机械人形#kh1::OnMyMobDead";
		monster "kh_kiehl01",18,178,"爱丽瑟",1739,1,"机械人形#kh1::OnMyMobDead";
		end;
	}
	else  {
		end;
	}

OnMyMobDead:
	if (mobcount("kh_kiehl01","机械人形#kh1::OnMyMobDead") < 1) { 
		makeitem 7506,1,"this",18,180;
		}
	end;
}

//----------------------------------------------------------------------------
// 基尔的房间; Dummy Robots
//----------------------------------------------------------------------------
kh_kiehl01,15,177,0	script	机械人形#kh2::RobotsKHQ	HIDDEN_NPC,{
	end;
}
kh_kiehl01,15,180,0	duplicate(RobotsKHQ)	机械人形#kh3	HIDDEN_NPC
kh_kiehl01,15,182,0	duplicate(RobotsKHQ)	机械人形#kh4	HIDDEN_NPC
kh_kiehl01,35,187,0	duplicate(RobotsKHQ)	机械人形#kh5	HIDDEN_NPC
kh_kiehl01,37,187,0	duplicate(RobotsKHQ)	机械人形#kh6	HIDDEN_NPC
kh_kiehl01,39,187,0	duplicate(RobotsKHQ)	机械人形#kh7	HIDDEN_NPC
kh_kiehl01,41,187,0	duplicate(RobotsKHQ)	机械人形#kh8	HIDDEN_NPC

//----------------------------------------------------------------------------
// 基尔的房间; Big Door, (Fifth, and final)
// - Anyone can pass through this door
// - Consumes 4 Solid Iron Pieces
//----------------------------------------------------------------------------
kh_kiehl01,166,187,0	script	巨大的门#BigDoorKHQ5	HIDDEN_NPC,{
	if (($@KHQuestBusy == 0) && (KielHyreQuest >= 74) && (KielHyreQuest <= 106)) {
		if (KielHyreQuest < 86) {
			mes "有一座巨大的门, 门好像可以移动传来'吱支~吱支'";
			next;
			select("推门:踢门:摇晃门:拉门:抬门");
			mes "触碰门之后, 魔物们就出现了, 难道是有什么机关吗?";
			close2;
			set @KHDoorPushAttempt,@KHDoorPushAttempt+1;
			monster "kh_kiehl01",163,183,"爱丽瑟",1739,1;
			monster "kh_kiehl01",163,179,"爱丽俄",1740,1;
			monster "kh_kiehl01",169,183,"爱丽瑟",1739,1;
			monster "kh_kiehl01",169,179,"爱丽俄",1740,1;
			if (@KHDoorPushAttempt >= 3) { 
				set KielHyreQuest,86; 
			}
			end;
		}
		else if ((KielHyreQuest > 84) && (KielHyreQuest < 94)) {
			mes "触碰了门好几次之后, 沉重的门轻轻的开启了, 看样子在门缝里塞个东西用力的话门是可以开启的";
			next;
			switch(select("钢铁:生锈的铁碎片:坚硬的铁碎片:铁碎片:螺丝:结束")) {
			case 1:
			case 2:
				break;
			case 3:
				if (countitem(7507) >= 1) {
					if (KielHyreQuest < 92) {
						mes "看样子门稍微开启了一点, ";
						mes "再用点力量的话门会开启的样子";
						delitem 7507,1; //Hard_Piece_of_Steel
						set KielHyreQuest,KielHyreQuest+2;
						close;
					}
					else if (KielHyreQuest == 92) {
						mes "使用了^0000FF坚硬的铁碎片^000000之后, ";
						mes "形成了一个可以穿越的空间";
						delitem 7507,1; //Hard_Piece_of_Steel
						set KielHyreQuest,94;
						close;
					}
				}
				else {
					mes "门跟本就没有在动";
					close;
				}
			case 4:
			case 5:
			case 6:
				mes "门跟本就没有在动";
				close;
			}

			mes "门跟本就没有在动";
			close;
		}
		else if ((KielHyreQuest >= 94) && (KielHyreQuest <= 104)) {
			if (.KHDoor5Opened == 0) {
				mes "穿越门";
				next;
				switch(select("是的:不要")) {
				case 1:
					close2;
					donpcevent "Big_Door_5_Warp::OnEnable";
					enablenpc "Big_Door_5_Warp";
					set .KHDoor5Opened,1;
					end;
				case 2:
					close;
				}
			}
			else {
				mes "门已经开启着";
				close;
			}
		}
		else {
			mes "巨大的门关闭着";
			close;
		}
	}
	else {
		mes "门关闭的很紧打不开";
		close;
	}
}

kh_kiehl01,166,186,0	script	Big_Door_5_Warp	WARPNPC,1,1,{
	end;

OnEnable:
	initnpctimer;
	misceffect 215;
	end;

OnTimer30000:
	stopnpctimer;
	misceffect 215;
	disablenpc "Big_Door_5_Warp";
	set getvariableofnpc(.KHDoor5Opened,"巨大的门#BigDoorKHQ5"),0;
	end;

OnInit:
	disablenpc "Big_Door_5_Warp";
	end;

OnTouch:
	if (KielHyreQuest >= 46)
		warp "kh_kiehl02",50,7;
	else
		warp "kh_kiehl01",166,183;
	end;
}

//----------------------------------------------------------------------------
// 基尔的房间; Kiehl_Room_Trap (Entry way trap)
//----------------------------------------------------------------------------
kh_kiehl02,49,10,0	script	Kiehl_Room_Trap	-1,5,3,{
	end;

OnTouch:
	if (.KHTrapSprung < 1) {
		set .KHTrapSprung,1;
		set $@KHQuestBusy,1;
		initnpctimer;
		monster "kh_kiehl02",47,13,"爱丽俄",1740,1;
		monster "kh_kiehl02",45,13,"爱丽瑟",1739,1;
		monster "kh_kiehl02",49,13,"恒量魔",1745,1;
		monster "kh_kiehl02",51,13,"爱丽俄",1740,1;
		monster "kh_kiehl02",53,13,"爱丽瑟",1739,1;
		monster "kh_kiehl02",49,13,"恒量魔",1745,1;
	}
	end;

OnTimer300000:
OnTimer600000:
OnTimer900000:
	if (getmapusers("kh_kiehl02") == 0) {
		donpcevent "KiehlRoom::OnReset";
		stopnpctimer;
	}
	end;

OnTimer1200000:
	donpcevent "KiehlRoom::OnReset";
	stopnpctimer;
	end;

OnGlobalTimerOff:
	stopnpctimer;
	end;
}

//----------------------------------------------------------------------------
// 基尔的房间; Kiehl
// - Timer will drop to 3 minutes once Kiehl is defeated.
//----------------------------------------------------------------------------
kh_kiehl02,50,52,4	script	齐尔#Original	902,{
	if (checkweight(908,200) == 0) {
		mes "请在这里暂停一下 !!";
		mes "你所携带的物品太多了, 所以不能获得物品；请把身上的物品减轻之后, 再来挑战吧";
		close;
	}
	cutin "kh_kiel01",2;
	if ((KielHyreQuest < 94) || (KielHyreQuest >= 106)) {
		mes "[齐尔]";
		mes "......";
		mes ".........";
		mes "............";
		close2;
		cutin "",255;
		end;
	}
	if ((KielHyreQuest == 94) && (getvariableofnpc(.KHKilled,"KiehlRoom") < 5)) {
		mes "[齐尔]";
		mes "你终于找到我了, 来到我这寒舍真是辛苦你啦, 刺客大爷, 我也想按照约定把我的卷轴给你..";
		next;
		mes "[齐尔]";
		mes "如果把那个给拔走的话, 只会剩下躯壳的身体, 若你想要的话直接用你的实力来拿";
		close2;
		cutin "",255;
		set getvariableofnpc(.KHKilled,"KiehlRoom"),0;
		monster "kh_kiehl02",50,52,"爱丽俄",1740,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"爱丽瑟",1739,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"恒量魔",1745,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"爱丽俄",1740,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"爱丽瑟",1739,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"恒量魔",1745,1,"KiehlRoom::OnKiehlMobDead";
		monster "kh_kiehl02",50,52,"爱丽俄",1740,1,"KiehlRoom::OnKiehlMobDead";
		hideonnpc "齐尔#Original";
		end;
	}
	else if ((KielHyreQuest == 94) && (getvariableofnpc(.KHKilled,"KiehlRoom") >= 5)) {
		cutin "kh_kiel03",2;
		mes "[齐尔]";
		mes "果然是爸爸所选中的刺客实力还不错吗?";
		mes "好吧, 就这样闲着也很无聊, ";
		mes "就听听看我爸到底委托了你哪些事情呢?";
		mes "是不是叫你来杀我呢?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "^FF0000启 海伊洛^000000先生叫我来阻止你, ";
		mes "他对自己的过失非常的痛苦呀, ";
		mes "现在该停止这一切了吧, ";
		mes "^0000FF齐尔^000000随我回到老爸的身边吧";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "你现在这是欺负同族啊, 那是不对的!";
		next;
		cutin "kh_kiel01",2;
		mes "[齐尔]";
		mes "同族啊..";
		mes "可是你们也不是一样吗, 神的创造物是人类, 和人类的创造物是机械人";
		next;
		mes "[齐尔]";
		mes "为了自身的利益把同种的人类杀掉或做实验的你们, 和为了我的目标, 我把我做的同族们提供给所需要的人们, ";
		mes "这我和你们有什么不同的吗?";
		next;
		mes "[齐尔]";
		mes "虽然我所做的人形们, 有着和人类一样的身躯, 但在没有学习之前是不会感受到感情, 连疼痛和痛苦都感觉不到";
		next;
		cutin "kh_kiel04",2;
		mes "[齐尔]";
		mes "可是人类是不一样的, 对在眼前感觉到痛苦, 和哭诉感情的自己同族 '人类 ', 你们人类还不是乱来嘛, 那才是不正常的事情呀..";
		mes "假如你有头脑的话你就会知道的";
		next;
		mes "[齐尔]";
		mes "很抱歉我要拒绝你的提案, 为了一段扭曲的爱情, 却让一个家庭破灭的残忍的父亲, 我不相信他会能比我做出更好的人形来啊";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "是啊, 当然也会有做错了事却不知悔改的人啊, 可是^0000FF齐尔^000000跟你携手合作的雷根贝勒社才是, 这种人类的代表象征啊";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "请你跟他们停止交易吧!再继续的帮助他们的话会增加更多不幸的人类呀";
		next;
		cutin "kh_kiel02",2;
		mes "[齐尔]";
		mes "你还记得进到这里时所看到的第一个房间吗?有着装满五对小孩物品的那个房间..";
		next;
		mes "[齐尔]";
		mes "那里是我被刚制作出来时的房间啊, 可是为什么人只有一位物品却是五双呢?";
		next;
		mes "["+strcharinfo(0)+"]";
		mes "?????";
		next;
		cutin "kh_kiel03",2;
		mes "[齐尔]";
		mes "当初第2代所做出来的机械人形是有五台的关系呀, 我们从刚出生的那一天开始, 就被从雷根贝勒社派遣的职员受到教育了";
		next;
		mes "[齐尔]";
		mes "对我们机械人形来说是一场严谨的教育啊.. 筋力试验、学习能力试验、跟着状况不同的感情表现试验..";
		next;
		mes "[齐尔]";
		mes "也许是很早就拥有的缺陷问题..或是错误的教育问题, 其它四位在学习和试验当中不幸死掉了";
		next;
		mes "[齐尔]";
		mes "之后所生存下来的只有我一位, 我父亲对那时候没有名字的我, 为我取名叫 ^0000FF齐尔^000000了";
		next;
		mes "[齐尔]";
		mes "雷根贝勒社? 他们的那些非人类的行动, 我比任何人都知道的清楚啊, 可是我不会冤枉他们的";
		next;
		mes "[齐尔]";
		mes "因为那是人类的本质, 想站的和想拥有的比人家高又多那就是人类的本性啊!";
		next;
		mes "[齐尔]";
		mes "呼无... 对不起 对不起, 我不想再跟你说话了, 我会放你走的, 请你就回去吧";
		next;
		cutin "",255;
		mes "[米契尔]";
		mes "不能这样子啊!^0000FF齐尔 海伊洛^000000!";
		mes "我们把你以制作不法武器和走私的嫌疑来拘捕你";
		set KielHyreQuest,100;
		hideoffnpc "米契尔#KiehlRoom";
		hideoffnpc "要员#KHAgent1";
		hideoffnpc "要员#KHAgent2";
		hideoffnpc "要员#KHAgent3";
		hideoffnpc "要员#KHAgent4";
		next;
	}
	if ((KielHyreQuest == 100) && (getvariableofnpc(.KHKilledBoss,"KiehlRoom") < 1)) {
		set getvariableofnpc(.KHKilledBoss,"KiehlRoom"),0;
		cutin "kh_kiel01",2;
		mes "[齐尔]";
		mes "唉哟 唉哟..";
		mes "是盟军来了吗?看样子你是不会乖乖的回去了..那我只好让你尝点苦头..";
		next;
		mes "[齐尔]";
		mes "首先呢";
		mes "讨厌的公务员们, 暂时先不要打扰我";
		next;
		donpcevent "::OnKHSpiderWeb";
		mes "[米契尔]";
		mes "这是!!!我们上当了..!!";
		next;
		cutin "kh_kiel03",2;
		mes "[齐尔]";
		mes "那么刺客先生, 就让我看一下你的实力吧?";
		close2;
		cutin "",255;
		monster "kh_kiehl02",50,52,"齐尔",1733,1,"KiehlRoom::OnKiehlDead";
		hideonnpc "齐尔#Original";
		end;
	}
	else if ((KielHyreQuest == 100) && (getvariableofnpc(.KHKilledBoss,"KiehlRoom") == 1)) {
		cutin "kh_kiel02",2;
		mes "[齐尔]";
		mes "唉哟....";
		mes "是我....太大意了吗..";
		mes "果然是有钱的爸爸";
		mes "送来的刺客是不一样的..";
		next;
		cutin "kh_kiel03",2;
		mes "[齐尔]";
		mes "呵呵呵....我就是不能";
		mes "让你们这些家伙把我给拖走了, 你就和我去极乐世界吧, 呵呵呵...";
		mes "不对我没有灵魂啊, ";
		mes "应该只有你们才会去吧...";
		mes "呵呵呵..";
		next;
		mapannounce "kh_kiehl02","嘻嘻嘻嘻嘻嘻~ 得露~得露露露~ 锵咖~",bc_map,"0xFF0000";
		mes "[米契尔]";
		mes "!!!!";
		next;
		mes "[米契尔]";
		mes "!!!!这声音是! 大条啦, 门被关起来了!!不能从这里出去啦!";
		next;
		mes "[齐尔]";
		mes "哈哈哈哈....我们都变成白色灰烬吧~";
		next;
		mes "[米契尔]";
		mes "你在干嘛呀!请你赶快使用^FF0000启 海伊洛^000000给你的动力装置吧!!!!!";
		next;
		mapannounce "kh_kiehl02","哔启~ 积翁~",bc_map,"0xFF0000";
		mes "[齐尔]";
		mes "唉哟 我被他们打败了, 不过没有关系啊, 拥有自爆装置的人并不是我啊...";
		mes "呼呼";
		next;
		mes "[米契尔]";
		mes "什么?!难道是有后台吗!";
		mes "应该不会是 雷根贝勒家吧!!";
		next;
		mes "[????]";
		mes "唉哟 唉哟....";
		mes "你是说 雷根贝勒啊....";
		mes "让我有点不悦啊, 我还故意的把本尊送出去迎接你的..";
		next;
		mes "[米契尔]";
		mes "谁啊! 表明身份吧!!";
		next;
		mes "[????]";
		mes "唉哟 唉哟...这么快就把我的声音给忘掉了吗?";
		next;
		mes "[米契尔]";
		mes "这声音...难道是!!!";
		next;
		hideoffnpc "齐尔#Copy";
		next;
		cutin "kh_kiel01",0;
		mes "[齐尔]";
		mes "玩笑有点过头了, 不好意思, 我来正式的跟你介绍, 我叫^0000FF齐尔 海伊洛^000000";
		next;
		mes "[米契尔]";
		mes "...怎么会....^0000FF齐尔^000000会有两位呢!!";
		next;
		cutin "kh_kiel03",2;
		mes "[齐尔]";
		mes "唉哟....看样子你是忘记了, 我们是机械人形啊, ^0000FF米契尔 拉音拉^000000小姐...";
		next;
		mes "[米契尔]";
		mes "???!你怎么会知道我名字呢...";
		next;
		mes "[齐尔]";
		mes "难道....你以为你以为只有你们才有间谍吗?";
		next;
		mes "[蒙面男子]";
		mes "很抱歉, 米契尔小姐";
		next;
		mes "[米契尔]";
		mes "布凯呜斯!";
		mes "你怎么会...你是....之前不是受了重伤, 还营救总统的人物啊..";
		next;
		mes "[布凯呜斯]";
		mes "为了渗透这点牺牲是微不足道的, 米契尔小姐, 曾嘱咐我要设防亲信的你, 应该不会对突然出现的我有所信赖吧?";
		next;
		mes "[米契尔]";
		mes "唉哟 天啊.... 就这么轻易的被他打败了... 非常抱歉总统先生...";
		next;
		mes "[齐尔]";
		mes "唉哟 唉哟....把淑女给吓着了, 真的是不像个神士啊, 凯音哲先生..";
		mes "呼呼, 很可惜本来想跟你能多聊一点, 现在时间剩不多了";
		next;
		cutin "kh_kiel01",2;
		mes "[齐尔]";
		mes "现在自爆装置已经启动了, 5分钟后这里会消失不见的, ^0000FF米契尔 拉音拉^000000小姐希望你能跟我们一起离开";
		next;
		mes "[齐尔]";
		mes "我对秀发兹发德的总统先生, 目前的想法感到很好奇啊";
		next;
		mes "[齐尔]";
		mes "^0000FF米契尔^000000小姐就拜托你了, 凯音哲先生啊!";
		mes "当然要把淑女郑重的送回去啊";
		next;
		mes "[布凯呜斯-凯音哲]";
		mes ".......";
		next;
		mes "[米契尔]";
		mes "放开我!";
		mes "放手啊 布凯呜斯!!";
		hideonnpc "米契尔#KiehlRoom";
		hideonnpc "要员#KHAgent1";
		hideonnpc "要员#KHAgent2";
		hideonnpc "要员#KHAgent3";
		hideonnpc "要员#KHAgent4";
		next;
		cutin "kh_kiel02",2;
		mes "[齐尔]";
		mes "来, 这一边整理好了...现在跟剩下的人们来聊一聊天吧?";
		next;
		mes "[齐尔]";
		mes "啊.....可是这怎么办啊...好像没有剩下多余的时间啊, 哈哈, 对刺客先生是有点不好意思啦, 和你没有时间聊天啦";
		next;
		cutin "kh_kiel04",2;
		mes "[齐尔]";
		mes "这里看样子快要倒塌了, 请你快一点离开会对你比较好";
		next;
		mes "[齐尔]";
		mes "还有即然你已经来了, 可以帮我送一件礼物给我父亲吗?";
		next;
		cutin "kh_kiel01",2;
		mes "[齐尔]";
		mes "我想我父亲会叫你来, 是想从我的身体里拿出^FF0000戒指^000000吧?当我第一次看到这个时我也吓了一大跳啊";
		next;
		mes "[齐尔]";
		mes "我想是一件很宝贵的物品吧..假如不小心被我破坏掉了的话, 不知道他要该怎么办呢....";
		next;
		mes "[齐尔]";
		mes "23年来你真的辛苦了, 你现在可以休息了, 旧型 ^0000FF齐尔^000000先生..";
		next;
		specialeffect EF_DEVIL;
		next;
		mes "[齐尔]";
		mes "我为了表示没有攻击的意思, 就把我的本体留在这边离开了, 请把^FF0000戒指^000000取出后拿给我父亲吧";
		next;
		mes "[齐尔]";
		mes "从父亲那里得到的身体现在还给他, 从现在开始我和我父亲没有任何的姻缘关系存在了, 请你转告给他";
		next;
		mes "[齐尔]";
		mes "我已经不再是我父亲设计图里所捆绑的第2代人形啦, 而是自我研发的第 4代款式了";
		next;
		mes "[齐尔]";
		mes "这样转述给他的话 他会理解的, 现在只剩下3分钟了, 我把出去的路为你开启 请你快点回去吧..那么就再见了..";
		delitem 7504,1; //Toy_Motor
		set KielHyreQuest,104;
		hideonnpc "齐尔#Copy";
		donpcevent "Kiehl_Room_Exit::OnEnable";			
		enablenpc "Kiehl_Room_Exit";
		initnpctimer;
		cutin "",255;
		close;
	}
	if (KielHyreQuest == 104) {
		cutin "kh_kiel02",2;
		mes "从不能行动的 ^0000FF齐尔^000000身上 把 ^FF0000戒指^000000给拿出来了";
		getitem 7508,1; //Elysia_Ring
		set KielHyreQuest,106;
		close2;
		cutin "",255;
		end;
	}
	else{
		cutin "kh_kiel02",2;
		mes "只剩下不能行动的旧型 ^0000FF齐尔^000000身躯了";
		close2;
		cutin "",255;
		end;
	}


OnTimer180000:
	stopnpctimer;
	mapannounce "kh_kiehl02","哔意意意~",bc_npc,0xFF0000;
	donpcevent "KiehlRoom::OnReset";
	end;

OnTimer179000:
	mapannounce "kh_kiehl02","离爆炸只剩下1秒了",bc_npc,0xFF0000;
	end;

OnTimer178000:
	mapannounce "kh_kiehl02","离爆炸只剩下2秒了",bc_npc,0xFF0000;
	end;

OnTimer177000:
	mapannounce "kh_kiehl02","离爆炸只剩下3秒了",bc_npc,0xFF0000;
	end;

OnTimer176000:
	mapannounce "kh_kiehl02","离爆炸只剩下4秒了",bc_npc,0xFF0000;
	end;

OnTimer175000:
	mapannounce "kh_kiehl02","离爆炸只剩下5秒了",bc_npc,0xFF0000;
	end;

OnTimer170000:
	mapannounce "kh_kiehl02","离爆炸只剩下10秒了",bc_npc,0xFF0000;
	end;

OnTimer160000:
	mapannounce "kh_kiehl02","离爆炸只剩下20秒了",bc_npc,0xFF0000;
	end;

OnTimer150000:
	mapannounce "kh_kiehl02","离爆炸只剩下30秒了",bc_npc,0xFF0000;
	end;

OnTimer120000:
	mapannounce "kh_kiehl02","离爆炸只剩下1分钟了",bc_npc,0xFF0000;
	end;

OnTimer60000:
	mapannounce "kh_kiehl02","离爆炸只剩下2分钟了",bc_npc,0xFF0000;
	end;

OnTimer1000:
	mapannounce "kh_kiehl02","离爆炸只剩下3分钟了",bc_npc,0xFF0000;
	end;
}

//----------------------------------------------------------------------------
// 基尔的房间; NPC for mob control, timers, and other junk.
//----------------------------------------------------------------------------
kh_kiehl02,1,1,0	script	KiehlRoom	-1,{
	end;

OnKiehlMobDead:
	set .KHKilled,.KHKilled+1;
	if (.KHKilled == 5) { 
		hideoffnpc "齐尔#Original"; 
	}
	end;

OnKiehlDead:
	set .KHKilledBoss,1;
	hideoffnpc "齐尔#Original";
	end;
	
OnReset:
	donpcevent "Kiehl_Room_Trap::OnGlobalTimerOff";
	if (getmapusers("kh_kiehl02") > 0)
		mapwarp "kh_kiehl02","lighthalzen",192,200;
	killmonsterall "kh_kiehl02";
	disablenpc "Kiehl_Room_Exit";
	hideonnpc "米契尔#KiehlRoom";
	hideonnpc "要员#KHAgent1";
	hideonnpc "要员#KHAgent2";
	hideonnpc "要员#KHAgent3";
	hideonnpc "要员#KHAgent4";
	hideonnpc "齐尔#Copy";
	hideoffnpc "齐尔#Original"; 
	set .KHKilledBoss,0;
	set .KHKilled,0;
	set getvariableofnpc(.KHTrapSprung,"Kiehl_Room_Trap"),0;
	set $@KHQuestBusy,0;
	end;
}

//----------------------------------------------------------------------------
// 基尔的房间; Mitchell and Agents. (Floating NPC + Duplicates)
//----------------------------------------------------------------------------
kh_kiehl02,49,55,6	script	米契尔#KiehlRoom	4_F_JOB_HUNTER,{
	end;
OnInit:
	hideonnpc "米契尔#KiehlRoom";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}

kh_kiehl02,53,52,4	script	要员#KHAgent1	880,{
	end;
OnInit:
	hideonnpc "要员#KHAgent1";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}

kh_kiehl02,51,49,1	script	要员#KHAgent2	880,{
	end;
OnInit:
	hideonnpc "要员#KHAgent2";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}

kh_kiehl02,47,50,0	script	要员#KHAgent3	880,{
	end;
OnInit:
	hideonnpc "要员#KHAgent3";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}

kh_kiehl02,46,53,6	script	要员#KHAgent4	880,{
	end;
OnInit:
	hideonnpc "要员#KHAgent4";
	end;

OnKHSpiderWeb:
	misceffect 404;
	end;
}


//----------------------------------------------------------------------------
// 基尔的房间; Copy of Kiehl.
//----------------------------------------------------------------------------
kh_kiehl02,48,53,6	script	齐尔#Copy	4_M_KHKIEL,{
	end;

OnInit:
	hideonnpc "齐尔#Copy";
	end;
}

//----------------------------------------------------------------------------
// 基尔的房间; Kiehl_Room_Exit
//----------------------------------------------------------------------------
kh_kiehl02,50,59,0	script	Kiehl_Room_Exit	WARPNPC,1,1,{
OnTouch:
	if (getmapusers("kh_kiehl02") < 1)
		donpcevent "KiehlRoom::OnReset";
	warp "lighthalzen",193,202;
	end;

OnEnable:
	specialeffect EF_SUMMONSLAVE;
	end;

OnInit:
	disablenpc "Kiehl_Room_Exit";
	end;
}

//============================================================
// Old changelog
//============================================================
//= 1.0 First version, needs testing [Playtester]
//= 1.1 Copied over some changes made by -Tsuyuki- [L0ne_W0lf]
//=     Reworked variables slightly so that the permenents ones aside from the 
//=     main tracking variable, are deleted when no longer needed. Renamed
//=     several variables that handle strings to @KHInput$. [L0ne_W0lf]
//= 1.2 Removed duplicate NPCs. [Toms]
//= 1.3 More Bug fixes, fixed typo. Updated Additional comments. [L0ne_W0lf]
//= 1.4 Fixed doors not resetting in kh_kiehl01 after 30 second timer is up. [L0ne_W0lf]
//= 1.5 Another bug fixed (&& instead of ||). [L0ne_W0lf]
//= 1.6 More squashed bugs with if checking. [L0ne_W0lf]
//= 1.7 Corrected some spelling mistakes. [Balish]
//=     Corrected Exploit with the pub man, giving infinite wine and money.
//=     Corrected pool and map not showing text for some states of the quest.
//=     Corrected Elly showing cutin but not text for some states of the quest (causing players to log off to continue).
//=     Let fisherman talk to you when you have 10 fishes OR MORE.
//=     Corrected not letting you enter the tombstone after finishing the quest.
//= 1.8 Elly now deletes the Iron_Box, and Kiel Hyre deletes the Pin. [L0ne_W0lf]
//=     More security on the 5th Big Door, now makes sure no one outside of who-
//=     acticated it initially can use it. Resets after 10 minutes to make it.
//=     Made it so that you need to be at least step 84 to activate the final door.
//=     Corrected not deleting Allysia's Ring from inventory.
//= 1.9 Exit will now enable if you are just retrieving the Ring, keeps you from getting stuck. [L0ne_W0lf]
//=     Corrected "KH_Kielh02", was setting off a debug, invalid map index. Should have been "kh_Kiehl02"
//=     Made .KHQuestBusy$ into a temp global variable. $@KHQuestBusy$. 
//= 2.0 Changed the labels on the "Big Doors" to "Identifier Names" to prevent an error with using getvariableofnpc [L0ne_W0lf]
//= 2.1 Fifth door now checks for a variable HIGHER or EQUAL to 74 not 84, as pointed out by Stollen. [L0ne_W0lf]
//= 2.2 Another fix for Elly, no longer RESETS to 26 when you talk to her. [L0ne_W0lf]
//= 2.3 Should NOT have been setting .KHQuestBusy at all. It's not used or accessed anymore. Removed. [L0ne_W0lf]
//= 2.4 Lots of fixes (4ish) from Valandi. [L0ne_W0lf]
//=     Added a getmapuser check to the mapwarp in KHTimerEnd so it's not trying to warp out 0 users. [L0ne_W0lf]
//= 2.5 Fixed several small issues (and large one) such as typos in cutins, typos in dialog, etc. [L0ne_W0lf]
//=     Added some of the missing dialogs for several NPCs, and fixed a few NPC locations.
//=     ALL books can now trigger the wall.
//=     Allysia will now summon 4 (was 2) G_CONSTANTS instead of REGULAR constants.
//=     Fixed where Golden_Key and Kiel_Button are deleted.
//=     Removed KHTimerEnd, and instead use OnReset.
//=     Fixed typo in the second NPC that gives Black Keycards.
//=     Added Monster Warps. (Keeps monsters from being in dungeon quest area.) [Non-functional]
//= 2.6 Stupid mistake, accidentally had 4 copies of the same script in 1... [L0ne_W0lf the bonehead]
//= 2.7 Fixed the wrong name being displayed for Kiel Hyre in one dialog. 
//=     Removed $@KH_DoorInvoker entirely. The quest is now working like it should according to iRO.
//=     Fixed up a few more NPC headers. Facing direction fixes mostly this time.
//=     More progression changes to Kiehl Hyre. He no longer stops dialog after the agents appear.
//= 2.8 Fixed the weight checking in Vandt, and added official dialog. [L0ne_W0lf]
//=     Added weight checks for all NPCs that give items. Semi-official dialog.
//=     Got the missing portion of dialog for Mills'.
//=     Will add further proper dialogs as I get to them on the second runthrough of the quest.
//= 2.8a minor optimization with extra goto, else or empty switch [Lupus]
//= 2.9 Fixed the "enablenpc" problem with the missing spaces. No idea how it happened. [L0ne_W0lf]
//= 3.0 Fixed a typo in Elly, in her room. (was <= should have been <) [L0ne_W0lf]
//=     Added an 'end;' to the cookie basket. Kiel Hyre's final dialog will now delete all quest-related items.
//= 3.1 Moved the "delitem" for all related quest items to the proper NPC. [L0ne_W0lf]
//= 3.2 Fixed error with Allysia teling you to "Go away." maybe. [L0ne_W0lf]
//= 3.2b Fixed some typos and grammar mistakes. [SinSloth]
//= 3.3 Fixed the receiver log out bugs. [L0ne_W0lf]
//= 3.4 Fixed bug when u can't get a Yellow Keycard if u got the Blue one at first [Lupus]
//=     Note: There are many condition checks that should be omitted in the future fixed item names in item_db.txt / txt resources according the quest
//=     for items, should be used bitwise methods in a single variable. So let's fix the rest possible bugs (if they exist) and then optimize ^_-
//= 3.5 Changed the way the Black Keycard distibuting NPCs work slighty. [L0ne_W0lf]
//= 3.6 Keil Hyre removes ALL outstanding quest items when he is talked [L0ne_W0lf]
//=     to after finishing the quest.
//= 3.7 Corrected NPC names to fall within proper restrictions. [L0ne_W0lf]
//= 3.8 Corrected some delitems. (bugreport:690) [Samuray22]
//= 3.9 Fixed a cutin not being erased. (bugreport:1539) [L0ne_W0lf]
//============================================================
